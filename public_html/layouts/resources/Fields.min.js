'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

App.Fields={Date:{months:['JS_JAN','JS_FEB','JS_MAR','JS_APR','JS_MAY','JS_JUN','JS_JUL','JS_AUG','JS_SEP','JS_OCT','JS_NOV','JS_DEC'],monthsTranslated:['JS_JAN','JS_FEB','JS_MAR','JS_APR','JS_MAY','JS_JUN','JS_JUL','JS_AUG','JS_SEP','JS_OCT','JS_NOV','JS_DEC'].map(function(a){return app.vtranslate(a)}),fullMonths:['JS_JANUARY','JS_FEBRUARY','JS_MARCH','JS_APRIL','JS_MAY','JS_JUNE','JS_JULY','JS_AUGUST','JS_SEPTEMBER','JS_OCTOBER','JS_NOVEMBER','JS_DECEMBER'],fullMonthsTranslated:['JS_JANUARY','JS_FEBRUARY','JS_MARCH','JS_APRIL','JS_MAY','JS_JUNE','JS_JULY','JS_AUGUST','JS_SEPTEMBER','JS_OCTOBER','JS_NOVEMBER','JS_DECEMBER'].map(function(a){return app.vtranslate(a)}),days:['JS_SUN','JS_MON','JS_TUE','JS_WED','JS_THU','JS_FRI','JS_SAT'],daysTranslated:['JS_SUN','JS_MON','JS_TUE','JS_WED','JS_THU','JS_FRI','JS_SAT'].map(function(a){return app.vtranslate(a)}),fullDays:['JS_SUNDAY','JS_MONDAY','JS_TUESDAY','JS_WEDNESDAY','JS_THURSDAY','JS_FRIDAY','JS_SATURDAY'],fullDaysTranslated:['JS_SUNDAY','JS_MONDAY','JS_TUESDAY','JS_WEDNESDAY','JS_THURSDAY','JS_FRIDAY','JS_SATURDAY'].map(function(a){return app.vtranslate(a)}),register:function i(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:'dateField';a='undefined'==typeof a?$('body'):$(a),'undefined'==typeof b&&(b=!0);var e=$('.'+d,a);if(a.hasClass('dateField')&&(e=a),0!==e.length){if(!0===b){var j=e.closest('.date');$('.js-date__btn',j).on('click',function(a){$(a.currentTarget).closest('.date').find('input.dateField').get(0).focus();});}var f=CONFIG.dateFormat,g=e.data('dateFormat');'undefined'!=typeof g&&(f=g),'undefined'==typeof $.fn.datepicker.dates[CONFIG.langKey]&&($.fn.datepicker.dates[CONFIG.langKey]={days:App.Fields.Date.fullDaysTranslated,daysShort:App.Fields.Date.daysTranslated,daysMin:App.Fields.Date.daysTranslated,months:App.Fields.Date.fullMonthsTranslated,monthsShort:App.Fields.Date.monthsTranslated,today:app.vtranslate('JS_TODAY'),clear:app.vtranslate('JS_CLEAR'),format:f,titleFormat:'MM yyyy',weekStart:CONFIG.firstDayOfWeekNo});var h={todayBtn:'linked',clearBtn:!0,language:CONFIG.langKey,starts:CONFIG.firstDayOfWeekNo,autoclose:!0,todayHighlight:!0};'undefined'!=typeof c&&(h=$.extend(h,c)),e.each(function(a,b){$(b).datepicker($.extend(!0,h,$(b).data('params')));});}},registerRange:function h(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};a='undefined'==typeof a?$('body'):$(a);var c=$('.dateRangeField',a);if(a.hasClass('dateRangeField')&&(c=a),0!==c.length){var d=CONFIG.dateFormat.toUpperCase(),e=c.data('dateFormat');'undefined'!=typeof e&&(d=e.toUpperCase());var f={};f[app.vtranslate('JS_TODAY')]=[moment(),moment()],f[app.vtranslate('JS_YESTERDAY')]=[moment().subtract(1,'days'),moment().subtract(1,'days')],f[app.vtranslate('JS_LAST_7_DAYS')]=[moment().subtract(6,'days'),moment()],f[app.vtranslate('JS_CURRENT_MONTH')]=[moment().startOf('month'),moment().endOf('month')],f[app.vtranslate('JS_LAST_MONTH')]=[moment().subtract(1,'month').startOf('month'),moment().subtract(1,'month').endOf('month')],f[app.vtranslate('JS_LAST_3_MONTHS')]=[moment().subtract(3,'month').startOf('month'),moment().subtract(1,'month').endOf('month')],f[app.vtranslate('JS_LAST_6_MONTHS')]=[moment().subtract(6,'month').startOf('month'),moment().subtract(1,'month').endOf('month')];var g={autoUpdateInput:!1,autoApply:!0,ranges:f,opens:'center',locale:{format:d,separator:',',applyLabel:app.vtranslate('JS_APPLY'),cancelLabel:app.vtranslate('JS_CANCEL'),fromLabel:app.vtranslate('JS_FROM'),toLabel:app.vtranslate('JS_TO'),customRangeLabel:app.vtranslate('JS_CUSTOM'),weekLabel:app.vtranslate('JS_WEEK').substr(0,1),firstDay:CONFIG.firstDayOfWeekNo,daysOfWeek:App.Fields.Date.daysTranslated,monthNames:App.Fields.Date.fullMonthsTranslated}};'undefined'!=typeof b&&(g=$.extend(g,b)),$('.js-date__btn').off().on('click',function(a){$(a.currentTarget).parent().next('.dateRangeField')[0].focus();}),c.each(function(a,b){var c=$.extend(!0,g,$(b).data('params'));$(b).daterangepicker(c).on('apply.daterangepicker',function(a,b){$(this).val(b.startDate.format(c.locale.format)+','+b.endDate.format(c.locale.format)),$(this).trigger('change');});});}}},DateTime:{register:function l(a,b){a='undefined'==typeof a?$('body'):$(a);var c=$('.dateTimePickerField',a);if(a.hasClass('dateTimePickerField')&&(c=a),0!==c.length){$('.input-group-text',c.closest('.dateTime')).on('click',function(a){$(a.currentTarget).closest('.dateTime').find('input.dateTimePickerField ').get(0).focus();});var d=CONFIG.dateFormat.toUpperCase(),e=c.data('dateFormat');'undefined'!=typeof e&&(d=e.toUpperCase());var f=CONFIG.hourFormat,g=c.data('hourFormat');'undefined'!=typeof g&&(f=g);var h=!0,i='hh:mm';24!==f&&(h=!1,i='hh:mm A');var j=d+' '+i,k={parentEl:a,singleDatePicker:!0,showDropdowns:!0,timePicker:!0,timePicker24Hour:h,timePickerIncrement:1,autoUpdateInput:!0,autoApply:!0,opens:'left',locale:{format:j,separator:',',applyLabel:app.vtranslate('JS_APPLY'),cancelLabel:app.vtranslate('JS_CANCEL'),fromLabel:app.vtranslate('JS_FROM'),toLabel:app.vtranslate('JS_TO'),customRangeLabel:app.vtranslate('JS_CUSTOM'),weekLabel:app.vtranslate('JS_WEEK').substr(0,1),firstDay:CONFIG.firstDayOfWeekNo,daysOfWeek:App.Fields.Date.daysTranslated,monthNames:App.Fields.Date.fullMonthsTranslated}};'undefined'!=typeof b&&(k=$.extend(k,b)),c.daterangepicker(k).on('apply.daterangepicker',function(a,b){$(this).val(b.startDate.format(j));});}}},Colors:{getColorContrast:function b(a){var c=parseInt(a.substr(0,2),16),d=parseInt(a.substr(2,2),16),e=parseInt(a.substr(4,2),16);return 128<=(299*c+587*d+114*e)/1e3?'light':'dark'},getRandomColor:function d(){for(var a=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'],b='#',c=0;6>c;c++)b+=a[Math.floor(16*Math.random())];return b},getRandomColors:function d(a){for(var b=[],c=0;c<a;c++)b.push(this.getRandomColor());return b}},Text:{registerCopyClipboard:function d(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'.clipboard';if('object'===('undefined'==typeof a?'undefined':_typeof(a))){a=$(a).get(0);var c=a.querySelectorAll(b);return 0===c.length&&(c=b,a=''),new ClipboardJS(c,{container:a,text:function e(b){Vtiger_Helper_Js.showPnotify({text:app.vtranslate('JS_NOTIFY_COPY_TEXT'),type:'success'}),b=$(b);var c=$(b.data('copyTarget'),a),d=void 0;return d='undefined'==typeof b.data('copyType')?'undefined'==typeof b.data('copy-attribute')?c.val():b.data(b.data('copy-attribute')):c.is('select')?c.find('option:selected').data(b.data('copyType')):c.data(b.data('copyType')),d}})}},Editor:function(){function a(b,c){classCallCheck(this,a);var d;b='undefined'==typeof b?$('body'):$(b),d=b.hasClass('js-editor')&&!b.prop('disabled')?b:$('.js-editor:not([disabled])',b),(0!==d.length||'undefined'!=typeof d)&&this.loadEditor(d,c);}return createClass(a,[{key:'setElement',value:function b(a){return this.element=$(a),this}},{key:'getElement',value:function a(){return this.element}},{key:'getElementId',value:function a(){return this.getElement().attr('id')}},{key:'getEditorInstanceFromName',value:function a(){return CKEDITOR.instances[this.getElementId()]}},{key:'loadEditor',value:function e(a,b){this.setElement(a);var c=this.getEditorInstanceFromName(),d={language:CONFIG.langKey,allowedContent:!0,removeButtons:'',scayt_autoStartup:!1,enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_P,on:{instanceReady:function b(a){a.editor.on('blur',function(){a.editor.updateElement();});}},extraPlugins:'colorbutton,colordialog,find,selectall,showblocks,div,print,font,justify,bidi',toolbar:'Full',toolbar_Full:[{name:'clipboard',items:['Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo']},{name:'editing',items:['Find','Replace','-','SelectAll','-','Scayt']},{name:'links',items:['Link','Unlink']},{name:'insert',items:['Image','Table','HorizontalRule','SpecialChar','PageBreak']},{name:'tools',items:['Maximize','ShowBlocks']},{name:'paragraph',items:['Outdent','Indent','-','Blockquote','CreateDiv']},{name:'document',items:['Source','Print']},'/',{name:'styles',items:['Styles','Format','Font','FontSize']},{name:'basicstyles',items:['Bold','Italic','Underline','Strike','Subscript','Superscript']},{name:'colors',items:['TextColor','BGColor']},{name:'paragraph',items:['NumberedList','BulletedList','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl']},{name:'basicstyles',items:['CopyFormatting','RemoveFormat']}],toolbar_Min:[{name:'basicstyles',items:['Bold','Italic','Underline','Strike','Subscript','Superscript']},{name:'colors',items:['TextColor','BGColor']},{name:'tools',items:['Maximize']},{name:'paragraph',items:['NumberedList','BulletedList','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl']},{name:'basicstyles',items:['CopyFormatting','RemoveFormat']}]};'undefined'!=typeof b&&(d=$.extend(d,b)),c&&CKEDITOR.remove(c),a.ckeditor(d);}}]),a}(),destroyEditor:function b(a){'undefined'!=typeof CKEDITOR&&CKEDITOR.instances&&a.attr('id')in CKEDITOR.instances&&CKEDITOR.instances[a.attr('id')].destroy();},generateRandomChar:function b(){var a=Math.floor(Math.random()*'0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ'.length);return '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ'.substring(a,a+1)},generateRandomHash:function c(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'';a=a.toString();var b=Math.random().toString(36).substr(2,9)+'-'+Math.random().toString(36).substr(2,9)+'-'+new Date().valueOf();return a?a+'-'+b:b}},Picklist:{changeSelectElementView:function g(a,b,c){var d=this;if('undefined'==typeof a&&(a=$('body')),'undefined'==typeof b){var e=$('select.select2',a).toArray(),f=$('.chzn-select',a).toArray();return e.forEach(function(a){d.changeSelectElementView($(a),'select2',c);}),void f.forEach(function(a){d.changeSelectElementView($(a),'choosen',c);})}if('string'==typeof b){switch(b){case'select2':return App.Fields.Picklist.showSelect2ElementView(a,c);case'choosen':return App.Fields.Picklist.showChoosenElementView(a,c);}app.errorLog(new Error('Unknown select type ['+b+']'));}},showSelect2ElementView:function k(a,b){var c=this,d=this;if(a=$(a),'undefined'==typeof b&&(b={}),1<$(a).length)return $(a).each(function(a,d){c.showSelect2ElementView($(d).eq(0),b);});if('undefined'==typeof b.dropdownParent){var l=$(a).closest('.modal-body');l.length&&(b.dropdownParent=l);}var e=a.data();null!=e&&(b=$.extend(e,b)),b.language={},b.theme='bootstrap';var f=$(a).data('width');b.width='undefined'==typeof f?'100%':f,b.containerCssClass='form-control w-100';var g=a.data('containerCssClass');if('undefined'!=typeof g&&(b.containerCssClass+=' '+g),b.language.noResults=function(){return app.vtranslate('JS_NO_RESULTS_FOUND')},'undefined'!=typeof b.customSortOptGroup&&b.customSortOptGroup&&($('optgroup',a).each(function(){var a=$(this),b=a.children().toArray().sort(function(c,a){var b=$(c).text(),d=$(a).text();return b<d?1:-1});$.each(b,function(b,c){a.prepend(c);});}),delete b.customSortOptGroup),'undefined'!=typeof b.maximumSelectionLength&&'undefined'==typeof b.formatSelectionTooBig){var h=b.maximumSelectionLength,i=function(a){return app.vtranslate('JS_YOU_CAN_SELECT_ONLY')+' '+a.maximum+' '+app.vtranslate('JS_ITEMS')};b.language.maximumSelected=i;}if('undefined'==typeof a.attr('multiple')||b.placeholder?!b.placeholder&&(b.placeholder=app.vtranslate('JS_SELECT_AN_OPTION')):b.placeholder=app.vtranslate('JS_SELECT_SOME_OPTIONS'),'undefined'==typeof b.templateResult&&(b.templateResult=function(a,b){return a.element&&a.element.className&&$(b).addClass(a.element.className),'undefined'==typeof a.name?a.text:'optgroup'==a.type?'<strong>'+a.name+'</strong>':'<span>'+a.name+'</span>'}),'undefined'==typeof b.templateSelection&&(b.templateSelection=function(a,b){return a.element&&a.element.className&&$(b).addClass(a.element.className),''===a.text?a.name:a.text}),1===a.data('ajaxSearch')){b.tags=!1,b.language.searching=function(){return app.vtranslate('JS_SEARCHING')},b.language.inputTooShort=function(a){var b=a.minimum-a.input.length;return app.vtranslate('JS_INPUT_TOO_SHORT').replace('_LENGTH_',b)},b.language.errorLoading=function(){return app.vtranslate('JS_NO_RESULTS_FOUND')},b.placeholder='',b.ajax={url:a.data('ajaxUrl'),dataType:'json',delay:250,method:'POST',data:function(a){return {value:a.term,page:a.page}},processResults:function d(b){var c=new Array;return !0==b.success&&(a.find('option').each(function(){var a=$(this);c.push({label:a.html(),value:a.val()});}),c=c.concat(b.result.items)),{results:c,pagination:{more:!1}}},cache:!1},b.escapeMarkup=function(a){if('undefined'!==a)return a};var j=3;'undefined'!==a.data('minimumInput')&&(j=a.data('minimumInput')),b.minimumInputLength=j,b.templateResult=function(a){return 'undefined'==typeof a.name?a.text:'optgroup'==a.type?'<strong>'+a.name+'</strong>':'<span>'+a.name+'</span>'},b.templateSelection=function(a){return ''===a.text?a.name:a.text};}return a.each(function(){var a=$(this);if('readonly'==a.attr('readonly')&&!a.attr('disabled')){var c=a.clone().addClass('d-none');a.parent().append(c),a.prop('disabled',!0);}a.hasClass('tags')&&(b.tags=!0),a.select2(b).on('select2:open',function(b){a.data('unselecting')&&(a.removeData('unselecting'),setTimeout(function(){a.each(function(){$(this).select2('close');});},1));var c=$(b.currentTarget),d=c.data('select2');d.$dropdown.css('z-index',1000002);}).on('select2:unselect',function(){a.data('unselecting',!0);}),a.hasClass('js-select2-sortable')&&d.registerSelect2Sortable(a,b.sortableCb);}),a},registerSelect2Sortable:function d(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:function(){},c=a.next('.select2-container').first('ul.select2-selection__rendered');c.sortable({items:'li:not(.select2-search__field)',tolerance:'pointer',stop:function d(){$(c.find('.select2-selection__choice').get().reverse()).each(function(){var b=$(this).attr('title');a.find('option').each(function(){$(this).text()===b&&a.prepend($(this));});}),b(a);}});},showChoosenElementView:function e(a){var b=$('.chzn-select',a);a.is('select.chzn-select')&&(b=a),b.each(function(){0===$(this).prop('id').length&&$(this).attr('id','sel'+App.Fields.Text.generateRandomChar()+App.Fields.Text.generateRandomChar()+App.Fields.Text.generateRandomChar());}),b.filter('[multiple]').filter('[data-validation-engine*="validate"]').on('change',function(a){$(a.currentTarget).trigger('focusout');});var c={no_results_text:app.vtranslate('JS_NO_RESULTS_FOUND')+':'},d=app.getModuleName();return b.filter('[multiple]')&&'Install'!==d&&(c.placeholder_text_multiple=' '+app.vtranslate('JS_SELECT_SOME_OPTIONS')),'Install'!==d&&(c.placeholder_text_single=' '+app.vtranslate('JS_SELECT_AN_OPTION')),b.chosen(c),b.each(function(){var a=$(this);if(a.hasClass('hideSelected')){var b=[];a.find('optgroup,option').each(function(a){$(this).hasClass('d-none')&&b.push(a);}),b.length&&a.next().find('.search-choice-close').each(function(){-1!==$.inArray($(this).data('option-array-index'),b)&&$(this).closest('li').remove();});}'readonly'===a.attr('readonly')&&(a.on('chosen:updated',function(){if(a.attr('readonly')){var b=a.data('chosen');a.attr('disabled','disabled'),'object'===('undefined'==typeof b?'undefined':_typeof(b))&&b.search_field_disabled(),a.is(':disabled')?a.attr('disabled','disabled'):a.removeAttr('disabled');}}),a.trigger('chosen:updated'));}),$('.chosen-container-multi .default, .chosen-container').css('width','100%')},destroyChosenElement:function c(a){'undefined'==typeof a&&(a=$('body'));var b=$('.chzn-select',a);return a.is('select.chzn-select')&&(b=a),b.css('display','block').removeClass('chzn-done').data('chosen',null).next().remove()}},MultiImage:{currentFileUploads:0,register:function b(a){$('.js-multi-image',a).toArray().forEach(function(a){new MultiImage(a);});}},DependentSelect:{generateOptionsFromData:function j(a){var b='',c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=!1;'undefined'!=typeof h.selected&&h.selected&&(i=!0),b+='<option value='+h.value+(i?' selected':'')+'>'+h.text+'</option>';}}catch(a){d=!0,e=a;}finally{try{!c&&g.return&&g.return();}finally{if(d)throw e}}return b},register:function b(a){return 'undefined'!=typeof a&&'undefined'!=typeof a.length&&a.length?void a.each(function(){var a=$(this),b=$(a.data('slave')),c=a.data('data');return b.length?c?void(a.on('change',function(d){var e=$(d.target).val();Array.isArray(e)||(e=[e]);var f=[],g=!0,h=!1,i=void 0;try{for(var j,k=e[Symbol.iterator]();!(g=(j=k.next()).done);g=!0){var l=j.value,m=!0,n=!1,o=void 0;try{for(var p,q,r=c[Symbol.iterator]();!(m=(p=r.next()).done);m=!0)q=p.value,q.value===l&&'undefined'!=typeof q.children&&q.children.forEach(function(a){f.push(a);});}catch(a){n=!0,o=a;}finally{try{!m&&r.return&&r.return();}finally{if(n)throw o}}}}catch(a){h=!0,i=a;}finally{try{!g&&k.return&&k.return();}finally{if(h)throw i}}a.data('sort')&&f.sort(function(c,a){return c.text.localeCompare(a.text)}),b.html(App.Fields.DependentSelect.generateOptionsFromData(f));}),a.html(App.Fields.DependentSelect.generateOptionsFromData(c))):app.errorLog('Could not load data (data-data attribute)'):app.errorLog('Could not find slave select element (data-slave attribute)')}):app.errorLog('Dependend select field container is missing.')}},Gantt:{register:function c(a,b){return new GanttField(a,b)}}};
//# sourceMappingURL=Fields.min.js.map
