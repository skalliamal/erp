{"version":3,"file":"showRelatedModulePass.min.js","sources":["showRelatedModulePass.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n// show/hide password\n'use strict';\n\n$('.show_pass').on('click', function (e) {\n\tvar id = $(this).attr('id').substr(4);\n\tshowRelatedListPassword(id, '');\n\treturn false;\n});\n\n// related modules\nfunction showRelatedListPassword(record) {\n\tvar element = $('#' + record);\n\tvar iconElement = $('a#btn_' + record + ' span');\n\tvar btn = $('a#btn_' + record);\n\tvar copybtn = $('a#copybtn_' + record);\n\tvar passVal = element.html(); // current value of password\n\t// button labels\n\tvar showPassText = btn.data('titleShow') ? btn.data('titleShow') : app.vtranslate('LBL_ShowPassword');\n\tvar hidePassText = btn.data('titleHide') ? btn.data('titleHide') : app.vtranslate('LBL_HidePassword');\n\n\t// if password is hashed, show it\n\tif (passVal == '**********') {\n\t\tvar params = {\n\t\t\t'module': \"OSSPasswords\",\n\t\t\t'action': \"GetPass\",\n\t\t\t'record': record\n\t\t};\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tvar response = data['result'];\n\t\t\tif (response['success']) {\n\t\t\t\t// show password\n\t\t\t\telement.html(response['password']);\n\t\t\t\t// change button title to 'Hide Password'\n\t\t\t\tbtn.on('show.bs.popover', function () {\n\t\t\t\t\tthis.dataset.content = hidePassText;\n\t\t\t\t})\n\t\t\t\t// change icon\n\t\t\t\ticonElement.removeClass('adminIcon-passwords-encryption');\n\t\t\t\ticonElement.addClass('fas fa-lock');\n\t\t\t\t// show copy to clipboard button\n\t\t\t\tcopybtn.removeClass('d-none');\n\t\t\t}\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t});\n\t}\n\t// if password is not hashed, hide it\n\telse {\n\t\t// hide password\n\t\telement.html('**********');\n\t\t// change button title to 'Show Password'\n\t\tbtn.on('show.bs.popover', function () {\n\t\t\tthis.dataset.content = showPassText;\n\t\t})\n\t\tapp.showPopoverElementView(element);\n\t\t// change icon\n\t\ticonElement.removeClass('fas fa-lock');\n\t\ticonElement.addClass('adminIcon-passwords-encryption');\n\t\t// hide copy to clipboard button\n\t\tcopybtn.addClass('d-none');\n\t}\n}\n\nnew ClipboardJS('.copy_pass', {\n\ttext: function (trigger) {\n\t\tVtiger_Helper_Js.showPnotify({\n\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\ttype: 'success'\n\t\t});\n\t\treturn $('#' + trigger.getAttribute('data-id')).text();\n\t}\n});\n\n"],"names":["$","on","attr","substr","id","record","iconElement","btn","copybtn","passVal","element","html","showPassText","data","app","vtranslate","hidePassText","jQuery","progressIndicator","AppConnector","request","done","response","dataset","content","removeClass","addClass","progressIndicatorElement","showPopoverElementView","text","trigger","showPnotify","type","getAttribute"],"mappings":";;AAIAA,EAAE,YAAF,EAAgBC,EAAhB,CAAmB,OAAnB,CAA4B,UAAa,CACxC,MAASD,EAAE,IAAF,EAAQE,IAAR,CAAa,IAAb,EAAmBC,MAAnB,CAA0B,CAA1B,CAAT,CAEA,+BADwBC,CAAxB,CAA4B,EAA5B,CACA,GACA,CAJD,EAOA,gCAAA,CAAiCC,CAAjC,CAAyC,OAC1BL,EAAE,IAAMK,CAAR,CAD0B,CAEpCC,EAAcN,EAAE,SAAWK,CAAX,CAAoB,OAAtB,CAFsB,CAGpCE,EAAMP,EAAE,SAAWK,CAAb,CAH8B,CAIpCG,EAAUR,EAAE,aAAeK,CAAjB,CAJ0B,CAKpCI,EAAUC,EAAQC,IAAR,EAL0B,CAOpCC,EAAeL,EAAIM,IAAJ,CAAS,WAAT,EAAwBN,EAAIM,IAAJ,CAAS,WAAT,CAAxB,CAAgDC,IAAIC,UAAJ,CAAe,kBAAf,CAP3B,CAQpCC,EAAeT,EAAIM,IAAJ,CAAS,WAAT,EAAwBN,EAAIM,IAAJ,CAAS,WAAT,CAAxB,CAAgDC,IAAIC,UAAJ,CAAe,kBAAf,CAR3B,CAWxC,GAAe,YAAX,GAAJ,CAA6B,OAMGE,OAAOC,iBAAP,CAAyB,CACvD,SAAY,MAD2C,CAEvD,UAAa,CACZ,UADY,CAF0C,CAAzB,CANH,CAY5BC,aAAaC,OAAb,CAXa,CACZ,OAAU,cADE,CAEZ,OAAU,SAFE,CAGZ,OAAUf,CAHE,CAWb,EAA6BgB,IAA7B,CAAkC,SAAUR,CAAV,CAAgB,CACjD,MAAeA,QAAf,CACIS,SAF6C,GAIhDZ,EAAQC,IAAR,CAAaW,UAAb,CAJgD,CAMhDf,EAAIN,EAAJ,CAAO,iBAAP,CAA0B,UAAY,CACrC,KAAKsB,OAAL,CAAaC,OAAb,CAAuBR,EACvB,CAFD,CANgD,CAUhDV,EAAYmB,WAAZ,CAAwB,gCAAxB,CAVgD,CAWhDnB,EAAYoB,QAAZ,CAAqB,aAArB,CAXgD,CAahDlB,EAAQiB,WAAR,CAAoB,QAApB,CAbgD,EAejDE,EAAyBT,iBAAzB,CAA2C,CAAC,KAAQ,MAAT,CAA3C,EACA,CAhBD,EAiBA,CA7BD,OAiCSP,IAAR,CAAa,YAAb,CAjCD,CAmCCJ,EAAIN,EAAJ,CAAO,iBAAP,CAA0B,UAAY,CACrC,KAAKsB,OAAL,CAAaC,OAAb,CAAuBZ,EACvB,CAFD,CAnCD,CAsCCE,IAAIc,sBAAJ,CAA2BlB,CAA3B,CAtCD,CAwCCJ,EAAYmB,WAAZ,CAAwB,aAAxB,CAxCD,CAyCCnB,EAAYoB,QAAZ,CAAqB,gCAArB,CAzCD,CA2CClB,EAAQkB,QAAR,CAAiB,QAAjB,EAED,CAED,eAAA,CAAgB,YAAhB,CAA8B,CAC7BG,KAAM,WAAUC,CAAV,CAAmB,CAKxB,wBAJiBC,WAAjB,CAA6B,CAC5BF,KAAMf,IAAIC,UAAJ,CAAe,qBAAf,CADsB,CAE5BiB,KAAM,SAFsB,CAA7B,CAIA,CAAOhC,EAAE,IAAM8B,EAAQG,YAAR,CAAqB,SAArB,CAAR,EAAyCJ,IAAzC,EACP,CAP4B,CAA9B"}