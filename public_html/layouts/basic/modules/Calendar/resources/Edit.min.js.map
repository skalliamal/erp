{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Calendar_Edit_Js\", {}, {\n\tisEvents: function () {\n\t\tvar form = this.getForm();\n\t\tvar moduleName = form.find('[name=\"module\"]').val();\n\t\tif (moduleName == 'Events') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tregisterReminderFieldCheckBox: function () {\n\t\tthis.getForm().find('input[name=\"set_reminder\"]').on('change', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar closestDiv = element.closest('div').next();\n\t\t\tif (element.is(':checked')) {\n\t\t\t\tclosestDiv.removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tclosestDiv.addClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function which will register change event on recurrence field checkbox\n\t */\n\tregisterRecurrenceFieldCheckBox: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = thisInstance.getForm();\n\t\tform.find('input[name=\"reapeat\"]').on('change', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar repeatUI = form.find('.repeatUI');\n\t\t\tvar container = form.find('[name=\"followup\"]').closest('.fieldValue');\n\t\t\tif (element.is(':checked')) {\n\t\t\t\trepeatUI.removeClass('d-none');\n\t\t\t\tcontainer.find('[name=\"followup_display\"]').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('button').attr('disabled', 'disabled');\n\t\t\t} else {\n\t\t\t\tcontainer.find('[name=\"followup_display\"]').removeAttr('disabled');\n\t\t\t\tcontainer.find('button').removeAttr('disabled');\n\t\t\t\trepeatUI.addClass('d-none');\n\t\t\t}\n\t\t});\n\t\tif (form.find('input[name=\"reapeat\"]').is(':checked')) {\n\t\t\tform.find('.repeatUI').removeClass('d-none');\n\t\t\tvar container = form.find('[name=\"followup\"]').closest('.fieldValue');\n\t\t\tcontainer.find('[name=\"followup_display\"]').attr('disabled', 'disabled');\n\t\t\tcontainer.find('button').attr('disabled', 'disabled');\n\t\t}\n\t},\n\t/**\n\t * Function which will register the change event for recurring type\n\t */\n\tregisterRecurringTypeChangeEvent: function () {\n\t\tvar container = this.getForm();\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.recurringType').on('change', function (e) {\n\t\t\tthisInstance.changeRecurringTypesUIStyles(jQuery(e.currentTarget).val());\n\t\t});\n\t\tcontainer.find('.repeatUI [name=\"calendarEndType\"]').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar value = currentTarget.val();\n\t\t\tif (value === 'never') {\n\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t} else if (value === 'count') {\n\t\t\t\tcontainer.find('.countEvents').removeAttr('disabled');\n\t\t\t\tcontainer.find('.calendarUntil').attr('disabled', 'disabled');\n\t\t\t} else if (value === 'until') {\n\t\t\t\tcontainer.find('.countEvents').attr('disabled', 'disabled');\n\t\t\t\tcontainer.find('.calendarUntil').removeAttr('disabled');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Function which will change the UI styles based on recurring type\n\t * @params - recurringType - which recurringtype is selected\n\t */\n\tchangeRecurringTypesUIStyles: function (recurringType) {\n\t\tvar container = this.getForm();\n\t\tif (recurringType == 'DAILY' || recurringType == 'YEARLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'WEEKLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('d-none').addClass('show');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('show').addClass('d-none');\n\t\t} else if (recurringType == 'MONTHLY') {\n\t\t\tcontainer.find('.repeatWeekUI').removeClass('show').addClass('d-none');\n\t\t\tcontainer.find('.repeatMonthUI').removeClass('d-none').addClass('show');\n\t\t}\n\t},\n\tsetDefaultEndTime: function (container) {\n\t\tvar dateStartElement = container.find('[name=\"date_start\"]');\n\t\tvar startTimeElement = container.find('[name=\"time_start\"]');\n\t\tvar endTimeElement = container.find('[name=\"time_end\"]');\n\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\n\t\tif (jQuery('[name=\"userChangedEndDateTime\"]').val() == '1') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar startDate = dateStartElement.val();\n\t\tvar startTime = startTimeElement.val();\n\n\t\tvar result = Vtiger_Time_Validator_Js.invokeValidation(startTimeElement);\n\t\tif (result != true) {\n\t\t\treturn;\n\t\t}\n\t\tvar startDateTime = startDate + ' ' + startTime;\n\t\tvar dateFormat = container.find('[name=\"due_date\"]').data('dateFormat').toUpperCase();\n\t\tvar timeFormat = endTimeElement.data('format');\n\t\tvar endDateString = '';\n\t\tif (container.find('[name=\"activitytype\"]').val() == 'Call') {\n\t\t\tendDateString = moment(startDateTime, dateFormat).add(container.find('[name=\"defaultCallDuration\"]').val(), 'minutes').format(dateFormat);\n\t\t} else {\n\t\t\tendDateString = moment(startDateTime, dateFormat).add(container.find('[name=\"defaultOtherEventDuration\"]').val(), 'minutes').format(dateFormat);\n\t\t}\n\t\tif (timeFormat == 24) {\n\t\t\tvar defaultTimeFormat = 'HH:mm';\n\t\t} else {\n\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t}\n\t\tendDateElement.val(endDateString);\n\t\tendTimeElement.val(moment(startTime, defaultTimeFormat).add(container.find('[name=\"defaultOtherEventDuration\"]').val(), 'minutes').format(defaultTimeFormat));\n\t},\n\t/**\n\t * Function to change the end time based on default call duration\n\t */\n\tregisterActivityTypeChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.on('change', 'select[name=\"activitytype\"]', function (e) {\n\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t});\n\t},\n\t/**\n\t * Function to change the end time based on default call duration\n\t */\n\tregisterTimeStartChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('input[name=\"time_start\"]').on('change', function (e) {\n\t\t\tthisInstance.setDefaultEndTime(container);\n\t\t});\n\n\t\tcontainer.find('[name=\"date_start\"]').on('change', function (e) {\n\t\t\tvar startDateElement = jQuery(e.currentTarget);\n\t\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\n\t\t\tvar start = thisInstance.getDateInstance(container, 'start');\n\t\t\tvar end = thisInstance.getDateInstance(container, 'end');\n\t\t\tvar dateFormat = CONFIG.dateFormat.toUpperCase();\n\t\t\tcontainer.find('.autofill:visible').trigger('change');\n\t\t\tif (start > end) {\n\t\t\t\tend = start;\n\t\t\t\tendDateElement.val(moment(end).format(dateFormat));\n\t\t\t\tApp.Fields.Date.register(container);\n\t\t\t}\n\t\t\tvar timeStartElement = startDateElement.closest('.fieldValue').find('[name=\"time_start\"]');\n\t\t\ttimeStartElement.trigger('changeTime');\n\t\t});\n\n\t\tcontainer.find('input[name=\"time_start\"]').on('focus', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\telement.data('prevValue', element.val());\n\t\t});\n\n\t\tcontainer.find('input[name=\"time_start\"]').on('blur', function (e, data) {\n\t\t\tif (typeof data === \"undefined\") {\n\t\t\t\tdata = {};\n\t\t\t}\n\n\t\t\tif (typeof data.forceChange === \"undefined\") {\n\t\t\t\tdata.forceChange = false;\n\t\t\t}\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar currentValue = element.val();\n\t\t\tvar prevValue = element.data('prevValue');\n\t\t\tif (currentValue != prevValue || data.forceChange) {\n\t\t\t\te = jQuery.Event(\"keydown\");\n\t\t\t\te.which = 13;\n\t\t\t\te.keyCode = 13;\n\t\t\t\telement.trigger(e);\n\t\t\t}\n\t\t});\n\t},\n\tregisterEndDateTimeChangeLogger: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('[name=\"time_end\"]').on('change', function (e) {\n\t\t\tvar timeElement = jQuery(e.currentTarget);\n\t\t\tvar result = Vtiger_Time_Validator_Js.invokeValidation(timeElement);\n\t\t\tif (result != true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar timeDateElement = timeElement.closest('.fieldValue').find('[name=\"due_date\"]');\n\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\ttimeDateElement.data('userChangedTime', true);\n\t\t});\n\n\t\tcontainer.find('[name=\"due_date\"]').on('change', function (e) {\n\t\t\tvar dueDateElement = jQuery(e.currentTarget);\n\t\t\tvar result = Vtiger_Date_Validator_Js.invokeValidation(dueDateElement);\n\t\t\tif (result != true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tjQuery('[name=\"userChangedEndDateTime\"]').val('1');\n\t\t\tdueDateElement.data('userChangedTime', true);\n\t\t});\n\t},\n\t/**\n\t *\n\t * @returns {String}\n\t */\n\tgetRule: function () {\n\t\tvar form = this.getForm();\n\t\tvar freq = form.find('.recurringType').val();\n\t\tvar rule = 'FREQ=' + freq;\n\t\trule += ';INTERVAL=' + form.find('.repeatFrequency').val();\n\t\tvar endValue = form.find('.repeatUI [name=\"calendarEndType\"]:checked').val();\n\t\tif (endValue === 'count') {\n\t\t\trule += ';COUNT=' + form.find('.countEvents').val();\n\t\t} else if (endValue === 'until') {\n\t\t\tvar date = form.find('.calendarUntil').val();\n\t\t\tdate = app.getDateInDBInsertFormat(CONFIG.dateFormat, date);\n\t\t\trule += ';UNTIL=' + date.replace(/-/gi, '') + 'T235959';\n\t\t}\n\t\tif (freq === 'WEEKLY') {\n\t\t\tvar checkedElements = [];\n\t\t\tform.find('.repeatWeekUI [type=\"checkbox\"]').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tcheckedElements.push(currentTarget.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (checkedElements.length > 0) {\n\t\t\t\trule += ';BYDAY=' + checkedElements.join(',');\n\t\t\t}\n\t\t}\n\t\tif (freq === 'MONTHLY') {\n\t\t\tvar dayOfWeek = Vtiger_Helper_Js.getDay(form.find('[name=\"date_start\"]').val());\n\t\t\tvar dateInstance = Vtiger_Helper_Js.getDateInstance(form.find('[name=\"date_start\"]').val(), CONFIG.dateFormat);\n\t\t\tvar dayOfMonth = dateInstance.getDate();\n\t\t\tvar option = form.find('.calendarMontlyType:checked').val();\n\t\t\tif (option == 'DAY') {\n\t\t\t\tvar dayOfWeekLabel = '';\n\t\t\t\tswitch (dayOfWeek) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tdayOfWeekLabel = 'SU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tdayOfWeekLabel = 'MO';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tdayOfWeekLabel = 'WE';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tdayOfWeekLabel = 'TU';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tdayOfWeekLabel = 'FR';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tdayOfWeekLabel = 'SA';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\trule += ';BYDAY=' + (parseInt((dayOfMonth - 1) / 7) + 1) + dayOfWeekLabel;\n\t\t\t} else {\n\t\t\t\trule += ';BYMONTHDAY=' + dayOfMonth;\n\t\t\t}\n\t\t}\n\t\treturn rule;\n\t},\n\t/**\n\t * This function will register the submit event on form\n\t */\n\tregisterFormSubmitEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\tvar lockSave = true;\n\t\tif (app.getRecordId()) {\n\t\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e) {\n\t\t\t\tif (lockSave && form.find('input[name=\"reapeat\"]').is(':checked')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tapp.showModalWindow(form.find('.typeSavingModal').clone(), function (container) {\n\t\t\t\t\t\tcontainer.find('.typeSavingBtn').on('click', function (e) {\n\t\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\t\tform.find('[name=\"typeSaving\"]').val(currentTarget.data('value'));\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tlockSave = false;\n\t\t\t\t\t\t\tform.submit();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tform.on('submit', function (e) {\n\t\t\tvar recurringCheck = form.find('input[name=\"reapeat\"]').is(':checked');\n\t\t\tif (recurringCheck) {\n\t\t\t\tif (app.getRecordId() && lockSave) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t\tform.find('[name=\"recurrence\"]').val(thisInstance.getRule());\n\t\t\t}\n\t\t\tif (thisInstance.isEvents()) {\n\t\t\t\tvar rows = form.find(\".inviteesContent .inviteRow\");\n\t\t\t\tvar invitees = [];\n\t\t\t\trows.each(function (index, domElement) {\n\t\t\t\t\tvar row = jQuery(domElement);\n\t\t\t\t\tif (row.data('crmid') != '') {\n\t\t\t\t\t\tinvitees.push([row.data('email'), row.data('crmid'), row.data('ivid')]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tjQuery('<input type=\"hidden\" name=\"inviteesid\" />').appendTo(form).val(JSON.stringify(invitees));\n\t\t\t}\n\t\t});\n\t},\n\tgetFreeTime: function (container) {\n\t\tvar timeStart = container.find('[name=\"time_start\"], [data-element-name=\"time_start\"]');\n\t\tvar timeEnd = container.find('[name=\"time_end\"], [data-element-name=\"time_end\"]');\n\t\tvar dateStart = container.find('[name=\"date_start\"], [data-element-name=\"date_start\"]');\n\t\tvar params = {\n\t\t\tmodule: 'Calendar',\n\t\t\taction: 'GetFreeTime',\n\t\t\tdateStart: dateStart.val()\n\t\t};\n\t\tcontainer.progressIndicator({});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tcontainer.progressIndicator({mode: 'hide'});\n\t\t\ttimeStart.val(data.result.time_start);\n\t\t\ttimeEnd.val(data.result.time_end);\n\t\t\tdateStart.val(data.result.date_start);\n\t\t\tcontainer.find('[name=\"due_date\"]').val(data.result.date_start);\n\t\t});\n\t},\n\tregisterAutoFillHours: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar allDay = container.find('[name=\"allday\"]');\n\t\tvar timeStart = container.find('[name=\"time_start\"]');\n\t\tvar timeEnd = container.find('[name=\"time_end\"]');\n\t\tvar dateEnd = container.find('[name=\"due_date\"]');\n\t\tcontainer.find('.autofill').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tcontainer.find('.autofill').prop('checked', true);\n\t\t\t\tthisInstance.getFreeTime(container);\n\t\t\t\ttimeStart.attr('readonly', 'readonly');\n\t\t\t\ttimeEnd.attr('readonly', 'readonly');\n\t\t\t\tallDay.attr('disabled', 'disabled');\n\t\t\t\tallDay.prop('checked', false);\n\t\t\t\tallDay.trigger('change');\n\t\t\t\tdateEnd.attr('readonly', 'readonly');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.autofill').prop('checked', false);\n\t\t\t\tallDay.removeAttr('disabled');\n\t\t\t\ttimeStart.removeAttr('readonly');\n\t\t\t\ttimeEnd.removeAttr('readonly');\n\t\t\t\tdateEnd.removeAttr('readonly');\n\t\t\t}\n\t\t});\n\t},\n\tregisterMarkAsCompletedBtn: function (container) {\n\t\tcontainer.find('.js-btn--mark-as-completed').on('click', function () {\n\t\t\tconst self = $(this);\n\t\t\tif (self.hasClass('active')) {\n\t\t\t\tcontainer.find('.js-completed').remove();\n\t\t\t} else {\n\t\t\t\tcontainer.append('<input class=\"js-completed\" type=hidden name=\"markAsCompleted\" value=\"PLL_COMPLETED\" data-js=\"remove\">');\n\t\t\t}\n\t\t});\n\t},\n\tregisterBasicEvents: function (container) {\n\t\tthis._super(container);\n\t\tthis.toggleTimesInputs(container);\n\t\tthis.registerTimesInputs(container);\n\t\tthis.registerTimeStartChangeEvent(container);\n\t\tthis.registerActivityTypeChangeEvent(container);\n\t\tthis.registerEndDateTimeChangeLogger(container);\n\t\tthis.registerAutoFillHours(container);\n\t\tthis.registerMarkAsCompletedBtn(container);\n\t},\n\ttoggleTimesInputs: function (container) {\n\t\tcontainer.find(':checkbox').on('change', function () {\n\t\t\tvar checkboxName = $(this).attr('name');\n\t\t\tif ('allday' == checkboxName) {\n\t\t\t\tvar checkboxIsChecked = $(this).is(':checked');\n\t\t\t\tif (!container.find('#quickCreate').length) {\n\t\t\t\t\tif (checkboxIsChecked) {\n\t\t\t\t\t\tcontainer.find('.time').hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer.find('.time').show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tregisterTimesInputs: function (container) {\n\t\tvar allday = container.find('[name=\"allday\"]:checkbox');\n\t\tif (allday.prop('checked')) {\n\t\t\tcontainer.find('.time').hide();\n\t\t}\n\n\t},\n\tgetDateInstance: function (container, type) {\n\t\tvar startDateElement = container.find('[name=\"date_start\"]');\n\t\tvar endDateElement = container.find('[name=\"due_date\"]');\n\t\tvar endTimeElement = container.find('[name=\"time_end\"]');\n\t\tvar startTimeElement = container.find('[name=\"time_start\"]');\n\t\tvar startDate = startDateElement.val();\n\t\tvar startTime = startTimeElement.val();\n\t\tvar endTime = endTimeElement.val();\n\t\tvar endDate = endDateElement.val();\n\t\tvar dateFormat = CONFIG.dateFormat;\n\t\tif (type == 'start') {\n\t\t\treturn Vtiger_Helper_Js.getDateInstance(startDate + ' ' + startTime, dateFormat);\n\t\t}\n\t\tif (type == 'end') {\n\t\t\treturn Vtiger_Helper_Js.getDateInstance(endDate + ' ' + endTime, dateFormat);\n\t\t}\n\t},\n\tregisterInviteEvent: function (editViewForm) {\n\t\tvar thisInstance = this;\n\t\tthis.registerRow(editViewForm);\n\t\tvar inviteesContent = editViewForm.find('.inviteesContent');\n\t\tvar inviteesSearch = editViewForm.find('input.inviteesSearch');\n\t\t$.widget(\"custom.ivAutocomplete\", $.ui.autocomplete, {\n\t\t\t_create: function () {\n\t\t\t\tthis._super();\n\t\t\t\tthis.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n\t\t\t},\n\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\tvar that = this, currentCategory = \"\";\n\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\tvar li;\n\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + \"</li>\");\n\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t}\n\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t});\n\t\t\t},\n\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\treturn this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\n\t\t\t},\n\t\t\t_renderItem: function (ul, item) {\n\t\t\t\treturn $(\"<li>\")\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.append($(\"<a></a>\").html(item.label))\n\t\t\t\t\t.appendTo(ul);\n\t\t\t},\n\t\t});\n\t\tinviteesSearch.ivAutocomplete({\n\t\t\tdelay: '600',\n\t\t\tminLength: '3',\n\t\t\tsource: function (request, response) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: 'Calendar',\n\t\t\t\t\taction: 'Invitees',\n\t\t\t\t\tmode: 'find',\n\t\t\t\t\tvalue: request.term\n\t\t\t\t}).done(function (result) {\n\t\t\t\t\tvar reponseDataList = result.result;\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t});\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tvar selected = ui.item;\n\n\t\t\t\t//To stop selection if no results is selected\n\t\t\t\tif (typeof selected.type !== \"undefined\" && selected.type == \"no results\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar recordExist = true;\n\t\t\t\tinviteesContent.find('.inviteRow').each(function (index) {\n\t\t\t\t\tif ($(this).data('crmid') == selected.id) {\n\t\t\t\t\t\trecordExist = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (recordExist) {\n\t\t\t\t\tvar inviteRow = inviteesContent.find('.d-none .inviteRow').clone(true, true);\n\t\t\t\t\tVtiger_Index_Js.getEmailFromRecord(selected.id, selected.module).done(function (email) {\n\t\t\t\t\t\tinviteRow.data('crmid', selected.id);\n\t\t\t\t\t\tinviteRow.data('email', email);\n\t\t\t\t\t\tinviteRow.find('.inviteName').data('content', selected.fullLabel + email).text(selected.label);\n\t\t\t\t\t\tinviteRow.find('.inviteIcon .c-badge__icon').removeClass('fas fa-envelope').addClass('userIcon-' + selected.module);\n\t\t\t\t\t\tinviteesContent.append(inviteRow);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: function (event, ui) {\n\t\t\t\tinviteesSearch.val('');\n\t\t\t}\n\n\t\t});\n\t},\n\tregisterRow: function (row) {\n\t\tvar thisInstance = this;\n\t\trow.on(\"click\", '.inviteRemove', function (e) {\n\t\t\t$(e.target).closest('.inviteRow').remove();\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar statusToProceed = this.proceedRegisterEvents();\n\t\tif (!statusToProceed) {\n\t\t\treturn;\n\t\t}\n\t\tvar editViewForm = this.getForm();\n\t\tthis.registerReminderFieldCheckBox();\n\t\tthis.registerRecurrenceFieldCheckBox();\n\t\tthis.registerFormSubmitEvent();\n\t\tthis.registerRecurringTypeChangeEvent();\n\t\tif (this.isEvents()) {\n\t\t\tthis.registerInviteEvent(editViewForm);\n\t\t}\n\t\tthis._super();\n\t}\n});\n\n"],"names":["Vtiger_Edit_Js","isEvents","getForm","moduleName","form","find","val","registerReminderFieldCheckBox","on","e","jQuery","currentTarget","closestDiv","element","closest","next","is","removeClass","addClass","registerRecurrenceFieldCheckBox","thisInstance","repeatUI","container","attr","removeAttr","registerRecurringTypeChangeEvent","changeRecurringTypesUIStyles","$","value","recurringType","setDefaultEndTime","startTimeElement","endTimeElement","endDateElement","dateStartElement","startTime","result","Vtiger_Time_Validator_Js","invokeValidation","startDate","dateFormat","data","toUpperCase","timeFormat","endDateString","moment","startDateTime","add","format","defaultTimeFormat","registerActivityTypeChangeEvent","registerTimeStartChangeEvent","start","getDateInstance","end","CONFIG","trigger","App","Fields","Date","register","startDateElement","timeStartElement","forceChange","currentValue","prevValue","Event","which","keyCode","registerEndDateTimeChangeLogger","timeElement","timeDateElement","Vtiger_Date_Validator_Js","dueDateElement","getRule","freq","rule","date","app","getDateInDBInsertFormat","replace","each","checkedElements","push","length","join","Vtiger_Helper_Js","getDay","dateInstance","dayOfMonth","getDate","option","dayOfWeek","dayOfWeekLabel","parseInt","registerFormSubmitEvent","lockSave","getRecordId","recordPreSave","preventDefault","showModalWindow","clone","hideModalWindow","submit","recurringCheck","invitees","rows","index","domElement","row","appendTo","JSON","stringify","getFreeTime","timeEnd","dateStart","params","module","action","progressIndicator","AppConnector","request","done","mode","timeStart","time_start","time_end","date_start","registerAutoFillHours","allDay","dateEnd","prop","registerMarkAsCompletedBtn","self","hasClass","remove","append","registerBasicEvents","_super","toggleTimesInputs","registerTimesInputs","checkboxName","checkboxIsChecked","hide","show","allday","type","endTime","endDate","registerInviteEvent","editViewForm","registerRow","inviteesSearch","widget","ui","autocomplete","_create","menu","_renderMenu","ul","items","currentCategory","item","category","that","_renderItemData","_renderItem","html","label","ivAutocomplete","delay","minLength","source","response","term","reponseDataList","vtranslate","select","event","inviteesContent","selected","id","recordExist","Vtiger_Index_Js","getEmailFromRecord","email","inviteRow","fullLabel","text","close","target","registerEvents","proceedRegisterEvents","statusToProceed"],"mappings":"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"}