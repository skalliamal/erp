{"version":3,"file":"Map.min.js","sources":["Map.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"OpenStreetMap_Map_Js\", {}, {\n\tcontainer: false,\n\tmapInstance: false,\n\tselectedParams: false,\n\tlayerMarkers: false,\n\tmarkers: false,\n\tcacheMarkers: [],\n\tpolygonLayer: false,\n\trouteLayer: false,\n\trecordsIds: '',\n\tcacheLayerMarkers: {},\n\tindirectPointLayer: {},\n\tsetSelectedParams: function (params) {\n\t\tthis.selectedParams = params;\n\t},\n\tregisterMap: function (startCoordinate, startZoom) {\n\t\tvar myMap = L.map('mapid').setView(startCoordinate, startZoom);\n\t\tL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\tmaxZoom: 19,\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n\n\t\t}).addTo(myMap);\n\t\tthis.mapInstance = myMap;\n\t\treturn myMap;\n\t},\n\tsetMarkersByResponse: function (response) {\n\t\tvar thisInstance = this;\n\t\tvar markerArray = [];\n\t\tvar container = this.container;\n\t\tvar map = this.mapInstance;\n\n\t\tif (typeof response.result.coordinates !== \"undefined\") {\n\t\t\tvar markers = L.markerClusterGroup({\n\t\t\t\tmaxClusterRadius: 10\n\t\t\t});\n\t\t\tvar coordinates = response.result.coordinates;\n\t\t\tif (typeof this.layerMarkers !== 'boolean') {\n\t\t\t\tmap.removeLayer(this.layerMarkers);\n\t\t\t}\n\t\t\tvar records = [];\n\t\t\tcoordinates.forEach(function (e) {\n\t\t\t\tmarkerArray.push([e.lat, e.lon]);\n\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t})\n\t\t\t\t}).bindPopup(e.label);\n\t\t\t\tmarkers.addLayer(marker);\n\t\t\t\trecords.push(e.recordId);\n\t\t\t});\n\t\t\tthis.recordsIds = records;\n\t\t\tthis.markers = coordinates;\n\t\t\tthis.layerMarkers = markers;\n\t\t\tmap.addLayer(markers);\n\t\t}\n\t\tif (typeof this.polygonLayer !== 'boolean') {\n\t\t\tmap.removeLayer(this.polygonLayer);\n\t\t}\n\t\tif (typeof response.result.coordinatesCeneter !== \"undefined\") {\n\t\t\tif (typeof response.result.coordinatesCeneter.error === \"undefined\") {\n\t\t\t\tvar radius = container.find('.radius').val();\n\t\t\t\tmarkerArray.push([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon]);\n\t\t\t\tvar popup = '<span class=\"description\">' + container.find('.searchValue').val() + '</span><br /><input type=hidden class=\"coordinates\" data-lon=\"' + response.result.coordinatesCeneter.lon + '\" data-lat=\"' + response.result.coordinatesCeneter.lat + '\">';\n\t\t\t\tpopup += '<button class=\"btn btn-success btn-sm p-1 startTrack mr-2\"><span class=\"fas  fa-truck\"></span></button>';\n\t\t\t\tpopup += '<button class=\"btn btn-danger btn-sm p-1 endTrack\"><span class=\"fas fa-flag-checkered\"></span></button>';\n\t\t\t\tvar marker = L.marker([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon], {\n\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\ticon: 'search',\n\t\t\t\t\t\tmarkerColor: 'red',\n\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t})\n\t\t\t\t}).bindPopup(popup);\n\t\t\t\tmap.addLayer(marker);\n\t\t\t\tif ($.isNumeric(radius)) {\n\t\t\t\t\tradius = parseInt(radius) * 1000;\n\t\t\t\t\tvar circle = L.circle([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon], radius, {\n\t\t\t\t\t\tcolor: 'red',\n\t\t\t\t\t\tfillColor: '#f03',\n\t\t\t\t\t\tfillOpacity: 0.05\n\t\t\t\t\t});\n\t\t\t\t\tthis.polygonLayer = L.featureGroup([circle]);\n\t\t\t\t\tmap.addLayer(this.polygonLayer);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar params = {\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: response.result.coordinatesCeneter.error,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t}\n\t\t}\n\t\tif (typeof response.result.cache !== \"undefined\") {\n\t\t\tvar cache = response.result.cache;\n\t\t\tObject.keys(cache).forEach(function (key) {\n\t\t\t\tif (typeof thisInstance.cacheLayerMarkers[key] !== \"undefined\") {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t}\n\t\t\t\tvar markersCache = L.markerClusterGroup({\n\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t});\n\t\t\t\tcoordinates = cache[key];\n\t\t\t\tcoordinates.forEach(function (e) {\n\t\t\t\t\tif (thisInstance.recordsIds.indexOf(e.recordId) === -1) {\n\t\t\t\t\t\tmarkerArray.push([e.lat, e.lon]);\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tmarkersCache.addLayer(marker);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.cacheMarkers[key] = coordinates;\n\t\t\t\tmap.addLayer(markersCache);\n\t\t\t\tthisInstance.cacheLayerMarkers[key] = markersCache;\n\t\t\t});\n\t\t}\n\n\t\tvar footer = this.container.find('.modal-footer');\n\t\tif (typeof response.result.legend !== \"undefined\") {\n\t\t\tvar html = '';\n\t\t\tvar legend = response.result.legend;\n\t\t\tlegend.forEach(function (e) {\n\t\t\t\thtml += '<div class=\"pull-left\"><span class=\"leegendIcon\" style=\"background:' + e.color + '\"></span> ' + e.value + '</div>';\n\t\t\t});\n\t\t\tfooter.html(html);\n\t\t} else {\n\t\t\tfooter.html('');\n\t\t}\n\t\tif (markerArray.length)\n\t\t\tmap.fitBounds(markerArray);\n\t\tthis.container.find('.groupNeighbours').prop('checked', true);\n\t},\n\tshowCalculateBtn: function () {\n\t\tvar container = this.container;\n\t\tvar endAddress = container.find('.end').val();\n\t\tvar startAddress = container.find('.start').val();\n\t\tif (endAddress.length > 0 && startAddress.length > 0) {\n\t\t\tcontainer.find('.calculateTrack').removeClass('d-none');\n\t\t}\n\t},\n\tregisterCacheEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.showRecordsFromCache').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\t\taction: 'GetMarkers',\n\t\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\t\tcache: [moduleName],\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthisInstance.mapInstance.removeLayer(thisInstance.cacheLayerMarkers[moduleName]);\n\t\t\t}\n\n\t\t});\n\t\tcontainer.find('.copyToClipboard').on('click', function () {\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'save',\n\t\t\t\trecordIds: JSON.stringify(thisInstance.recordsIds),\n\t\t\t\tsrcModule: app.getModuleName()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tvar countRecords = container.find('.countRecords' + app.getModuleName());\n\t\t\t\tcountRecords.html(response.result);\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.deleteClipBoard').removeClass('d-none');\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.deleteClipBoard').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'delete',\n\t\t\t\tsrcModule: moduleName\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tvar countRecords = container.find('.countRecords' + moduleName);\n\t\t\t\tcountRecords.html('');\n\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.showRecordsFromCache').prop('checked', false);\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.showRecordsFromCache').trigger('change');\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.addAllRecords').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'addAllRecords',\n\t\t\t\tsrcModule: moduleName\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tcontainer.find('.countRecords' + moduleName).html(response.result.count);\n\t\t\t\tvar moduleContainer = currentTarget.closest('.cacheModuleContainer');\n\t\t\t\tmoduleContainer.find('.showRecordsFromCache').prop('checked', true);\n\t\t\t\tmoduleContainer.find('.showRecordsFromCache').trigger('change');\n\t\t\t\tif (response.result.count != '0')\n\t\t\t\t\tmoduleContainer.find('.deleteClipBoard').removeClass('d-none');\n\t\t\t});\n\t\t});\n\t},\n\tgetCacheParamsToRequest: function () {\n\t\tvar container = this.container;\n\t\tvar params = [];\n\t\tcontainer.find('.showRecordsFromCache').each(function () {\n\t\t\tvar currentObject = $(this);\n\t\t\tif (currentObject.is(':checked'))\n\t\t\t\tparams.push(currentObject.data('module'));\n\t\t});\n\t\treturn params;\n\t},\n\tregisterSearchCompany: function () {\n\t\tvar container = this.container;\n\t\tvar searchValue = container.find('.searchCompany');\n\t\tvar searchModule = container.find('.searchModule');\n\t\tvar addButton = container.find('.addRecord');\n\t\tvar thistInstance = this;\n\t\taddButton.on('click', function () {\n\t\t\tvar map = thistInstance.mapInstance;\n\t\t\tvar markers = thistInstance.layerMarkers;\n\t\t\tvar crmId = addButton.data('crmId');\n\t\t\tif (crmId == '')\n\t\t\t\treturn false;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'addRecord',\n\t\t\t\trecord: crmId,\n\t\t\t\tsrcModuleName: searchModule.val()\n\t\t\t}).done(function (response) {\n\t\t\t\taddButton.data('crmId', '');\n\t\t\t\tif (response.result.length == 1) {\n\t\t\t\t\tvar marker = L.marker([response.result[0].lat, response.result[0].lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'cadetblue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: response.result[0].color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(response.result[0].label);\n\t\t\t\t\tmarkers.addLayer(marker);\n\t\t\t\t\tmap.addLayer(markers);\n\t\t\t\t\tmap.setView(new L.LatLng(response.result[0].lat, response.result[0].lon), 14);\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsearchValue.val('');\n\t\t\t});\n\t\t});\n\t\t$.widget(\"custom.ivAutocomplete\", $.ui.autocomplete, {\n\t\t\t_create: function () {\n\t\t\t\tthis._super();\n\t\t\t\tthis.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n\t\t\t},\n\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\tvar that = this, currentCategory = \"\";\n\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\tvar li;\n\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + \"</li>\");\n\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t}\n\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t});\n\t\t\t},\n\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\treturn this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\n\t\t\t},\n\t\t\t_renderItem: function (ul, item) {\n\t\t\t\treturn $(\"<li>\")\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.append($(\"<a></a>\").html(item.label))\n\t\t\t\t\t.appendTo(ul);\n\t\t\t},\n\t\t});\n\t\tsearchValue.ivAutocomplete({\n\t\t\tdelay: '600',\n\t\t\tminLength: '3',\n\t\t\tsource: function (request, response) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: searchModule.val(),\n\t\t\t\t\tcurentModule: app.getModuleName(),\n\t\t\t\t\tsearchModule: searchModule.val(),\n\t\t\t\t\tview: 'BasicAjax',\n\t\t\t\t\tmode: 'showSearchResults',\n\t\t\t\t\tvalue: searchValue.val(),\n\t\t\t\t\thtml: false,\n\t\t\t\t}).done(function (responseAjax) {\n\t\t\t\t\tresponseAjax = JSON.parse(responseAjax);\n\t\t\t\t\tvar reponseDataList = responseAjax.result;\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t});\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tvar selected = ui.item;\n\t\t\t\taddButton.data('crmId', selected.id);\n\t\t\t},\n\t\t\tclose: function (event, ui) {\n\n\t\t\t}\n\n\t\t});\n\t},\n\tregisterBasicModal: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.container;\n\t\tvar map = thisInstance.mapInstance;\n\t\tvar layer, description;\n\t\tthisInstance.registerCacheEvents(container);\n\t\tcontainer.find('.groupBy').on('click', function () {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tgroupBy: container.find('.fieldsToGroup').val(),\n\t\t\t\tsearchValue: container.find('.searchValue').val(),\n\t\t\t\tradius: container.find('.radius').val(),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\t$.extend(params, thisInstance.selectedParams);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.groupNeighbours').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tmap.removeLayer(thisInstance.layerMarkers);\n\t\t\tvar markers = thisInstance.markers;\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tlayer = L.markerClusterGroup({\n\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t});\n\t\t\t\tmarkers.forEach(function (e) {\n\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\tlayer.addLayer(marker);\n\t\t\t\t});\n\n\t\t\t\tObject.keys(thisInstance.cacheLayerMarkers).forEach(function (key) {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t\tvar cacheLayer = L.markerClusterGroup({\n\t\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheMarkers[key].forEach(function (e) {\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tcacheLayer.addLayer(marker);\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheLayerMarkers[key] = cacheLayer;\n\t\t\t\t\tmap.addLayer(cacheLayer);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar markerArray = [];\n\t\t\t\tmarkers.forEach(function (e) {\n\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\tmarkerArray.push(marker);\n\t\t\t\t});\n\t\t\t\tlayer = L.featureGroup(markerArray);\n\t\t\t\tObject.keys(thisInstance.cacheLayerMarkers).forEach(function (key) {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t\tvar markerArray = [];\n\t\t\t\t\tthisInstance.cacheMarkers[key].forEach(function (e) {\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tmarkerArray.push(marker);\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheLayerMarkers[key] = L.featureGroup(markerArray);\n\t\t\t\t\tmap.addLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthisInstance.layerMarkers = layer;\n\t\t\tmap.addLayer(layer);\n\t\t});\n\t\tcontainer.find('.searchBtn').on('click', function (e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tsearchValue: container.find('.searchValue').val(),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tvar radiusValue = container.find('.radius').val();\n\t\t\tif (radiusValue !== '' && parseInt(radiusValue)) {\n\t\t\t\tparams['radius'] = radiusValue;\n\t\t\t}\n\t\t\t$.extend(params, thisInstance.selectedParams);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tvar startIconLayer = false;\n\t\tcontainer.on('click', '.startTrack', function (e) {\n\t\t\tmap.removeLayer(startIconLayer);\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar startElement = container.find('.start');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tstartElement.val(description);\n\t\t\tstartElement.data('lat', coordinates.data('lat'));\n\t\t\tstartElement.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'truck',\n\t\t\t\t\tmarkerColor: 'green',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tstartIconLayer = L.featureGroup([marker]);\n\t\t\tmap.addLayer(startIconLayer);\n\t\t\tthisInstance.showCalculateBtn();\n\t\t});\n\t\tvar endIconLayer = false;\n\t\tcontainer.on('click', '.endTrack', function (e) {\n\t\t\tmap.removeLayer(endIconLayer);\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar endElement = container.find('.end');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tendElement.val(description);\n\t\t\tendElement.data('lat', coordinates.data('lat'));\n\t\t\tendElement.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'flag-checkered',\n\t\t\t\t\tmarkerColor: 'red',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tendIconLayer = L.featureGroup([marker]);\n\t\t\tmap.addLayer(endIconLayer);\n\t\t\tthisInstance.showCalculateBtn();\n\t\t});\n\n\t\tcontainer.on('click', '.indirectPoint', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar template = container.find('.indirectTemplate');\n\t\t\tvar indirect = template.clone();\n\t\t\ttemplate.before(indirect);\n\t\t\tindirect.removeClass('indirectTemplate');\n\t\t\tindirect.removeClass('d-none');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tif (typeof thisInstance.indirectPointLayer[description] !== \"undefined\") {\n\t\t\t\tmap.removeLayer(thisInstance.indirectPointLayer[description]);\n\t\t\t}\n\t\t\tvar indirectField = indirect.find('.indirect');\n\t\t\tindirectField.val(description);\n\t\t\tindirectField.data('lat', coordinates.data('lat'));\n\t\t\tindirectField.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'flag',\n\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tthisInstance.indirectPointLayer[description] = L.featureGroup([marker]);\n\t\t\tmap.addLayer(thisInstance.indirectPointLayer[description]);\n\t\t});\n\t\tcontainer.on('click', '.removeIndirect', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tmap.removeLayer(thisInstance.indirectPointLayer[container.find('.indirect').val()]);\n\t\t\tcurrentTarget.closest('.indirectContainer').remove();\n\t\t});\n\t\tcontainer.on('click', '.moveUp', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tvar previousElement = container.prev();\n\t\t\tif (!previousElement.hasClass('startContainer')) {\n\t\t\t\tpreviousElement.before(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.on('click', '.moveDown', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tvar nextElement = container.next();\n\t\t\tif (!nextElement.hasClass('indirectTemplate')) {\n\t\t\t\tnextElement.after(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.on('click', '.searchInRadius', function (e) {\n\t\t\tmap.removeLayer(endIconLayer);\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tradius: container.find('.radius').val(),\n\t\t\t\tlat: coordinates.data('lat'),\n\t\t\t\tlon: coordinates.data('lon'),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\t$.extend(params, thisInstance.selectedParams);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.calculateTrack').on('click', function () {\n\t\t\tvar indirectLon = [];\n\t\t\tvar indirectLat = [];\n\t\t\tcontainer.find('.indirectContainer:not(.d-none) input.indirect').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tindirectLat.push(currentTarget.data('lat'));\n\t\t\t\tindirectLon.push(currentTarget.data('lon'));\n\t\t\t});\n\t\t\tvar endElement = container.find('.end');\n\t\t\tvar startElement = container.find('.start');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\turl: 'index.php',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\t\taction: 'GetRoute',\n\t\t\t\t\tflon: startElement.data('lon'),\n\t\t\t\t\tflat: startElement.data('lat'),\n\t\t\t\t\tilon: indirectLon,\n\t\t\t\t\tilat: indirectLat,\n\t\t\t\t\ttlon: endElement.data('lon'),\n\t\t\t\t\ttlat: endElement.data('lat')\n\t\t\t\t}\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\tmap.removeLayer(thisInstance.routeLayer);\n\t\t\t\tvar route = L.geoJson(response.result);\n\t\t\t\tthisInstance.routeLayer = L.featureGroup([route]);\n\t\t\t\tmap.addLayer(thisInstance.routeLayer);\n\t\t\t\tcontainer.find('.descriptionContainer').removeClass('d-none');\n\t\t\t\tcontainer.find('.descriptionContent .instruction').html(response.result.properties.description);\n\t\t\t\tcontainer.find('.descriptionContent .distance').html(app.parseNumberToShow(response.result.properties.distance));\n\t\t\t\tcontainer.find('.descriptionContent .travelTime').html(app.parseNumberToShow(response.result.properties.traveltime / 60));\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.setView').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar inputInstance = currentTarget.closest('.input-group').find('.end,.start');\n\t\t\tvar lat = inputInstance.data('lat');\n\t\t\tvar lon = inputInstance.data('lon');\n\t\t\tif (!(typeof lat === \"undefined\" && typeof lon === \"undefined\")) {\n\t\t\t\tmap.setView(new L.LatLng(lat, lon), 14);\n\t\t\t}\n\t\t});\n\t\tthis.registerSearchCompany();\n\t},\n\tregisterModalView: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': container,\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar heightMap = $('body').height();\n\t\tthis.container = container;\n\t\tvar startCoordinate = [0, 0];\n\t\tvar startZoom = 2;\n\t\t$('#mapid').css({\n\t\t\theight: heightMap - 200\n\t\t});\n\t\tthis.registerMap(startCoordinate, startZoom);\n\t\tvar params = {\n\t\t\tmodule: 'OpenStreetMap',\n\t\t\taction: 'GetMarkers',\n\t\t\tsrcModule: app.getModuleName(),\n\t\t};\n\t\t$.extend(params, this.selectedParams);\n\t\tthisInstance.registerBasicModal();\n\t\tAppConnector.request(params).done(function (response) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tthisInstance.setMarkersByResponse(response);\n\n\t\t});\n\t},\n\tregisterDetailView: function (container) {\n\t\tthis.container = container;\n\t\tvar coordinates = container.find('#coordinates').val();\n\t\tcoordinates = JSON.parse(coordinates);\n\t\tvar startCoordinate = [0, 0];\n\t\tvar startZoom = 2;\n\t\tvar $map = container.find('#mapid');\n\t\tif (coordinates.length) {\n\t\t\tstartCoordinate = coordinates[0];\n\t\t\tstartZoom = 6;\n\t\t}\n\t\tif ($('.mainBody').length) {\n\t\t\tif ($('.mainBody').height() < 1000) {\n\t\t\t\t$map.height($('.mainBody').height() - ($('.detailViewTitle').height() + $('.detailViewContainer .related').height() + 25));\n\t\t\t} else {\n\t\t\t\t$map.height(1000);\n\t\t\t}\n\t\t} else {\n\t\t\tif ($('.bodyContents').height() < 1000) {\n\t\t\t\t$map.height($('.bodyContents').height() - ($('.detailViewTitle').height() + $('.detailViewContainer .related').height() + 25));\n\t\t\t} else {\n\t\t\t\t$map.height(1000);\n\t\t\t}\n\t\t}\n\n\t\tvar myMap = this.registerMap(startCoordinate, startZoom);\n\t\tvar markers = L.markerClusterGroup({\n\t\t\tmaxClusterRadius: 10\n\t\t});\n\t\tcoordinates.forEach(function (e) {\n\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'home',\n\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\ticonColor: e.color\n\t\t\t\t})\n\t\t\t}).bindPopup(e.label);\n\t\t\tmarkers.addLayer(marker);\n\t\t});\n\t\tmyMap.addLayer(markers);\n\t}\n});\n\n"],"names":["jQuery","Class","container","mapInstance","selectedParams","layerMarkers","markers","cacheMarkers","polygonLayer","routeLayer","recordsIds","cacheLayerMarkers","indirectPointLayer","setSelectedParams","params","registerMap","startCoordinate","startZoom","L","map","setView","tileLayer","maxZoom","attribution","addTo","myMap","setMarkersByResponse","response","markerArray","result","coordinates","markerClusterGroup","maxClusterRadius","removeLayer","forEach","e","push","lat","lon","marker","icon","AwesomeMarkers","markerColor","prefix","iconColor","color","bindPopup","label","addLayer","records","recordId","coordinatesCeneter","error","find","val","popup","$","isNumeric","radius","circle","fillColor","fillOpacity","featureGroup","title","app","vtranslate","text","type","Vtiger_Helper_Js","showMessage","cache","Object","keys","key","thisInstance","indexOf","markersCache","legend","html","value","footer","length","fitBounds","prop","showCalculateBtn","endAddress","startAddress","removeClass","registerCacheEvents","on","currentTarget","moduleName","data","is","module","action","srcModule","getModuleName","AppConnector","request","done","mode","recordIds","JSON","stringify","countRecords","closest","addClass","trigger","count","moduleContainer","getCacheParamsToRequest","each","currentObject","registerSearchCompany","searchValue","searchModule","addButton","thistInstance","crmId","record","srcModuleName","LatLng","widget","ui","autocomplete","_create","_super","menu","_renderMenu","ul","items","currentCategory","index","item","category","append","that","_renderItemData","_renderItem","appendTo","ivAutocomplete","delay","minLength","source","curentModule","view","responseAjax","parse","reponseDataList","select","event","selected","id","close","registerBasicModal","description","progressIndicator","groupBy","extend","progressIndicatorElement","layer","cacheLayer","radiusValue","parseInt","startIconLayer","containerPopup","replace","startElement","endIconLayer","endElement","indirect","template","clone","before","indirectField","remove","previousElement","prev","hasClass","nextElement","next","after","indirectLat","indirectLon","url","flon","flat","ilon","ilat","tlon","tlat","geoJson","route","properties","parseNumberToShow","distance","traveltime","inputInstance","registerModalView","heightMap","height","css","registerDetailView","$map"],"mappings":"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"}