{"version":3,"file":"NotificationConfig.min.js","sources":["NotificationConfig.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Notification_NotificationConfig_Js\", {}, {\n\tregisterEventForModal: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar table = app.registerDataTables(container.find('.modalDataTable'));\n\t\tapp.showPopoverElementView(container.find('.infoPopover'));\n\t\tcontainer.on('switchChange.bootstrapSwitch', '.sendNotificationsSwitch', function (e, state) {\n\t\t\tif (state) {\n\t\t\t\tcontainer.find('.schedule').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tcontainer.find('.schedule').addClass('d-none');\n\t\t\t}\n\t\t});\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\tvar selectedModules = [];\n\t\t\tvar sendNoticeModules = [];\n\t\t\ttable.$('[type=\"checkbox\"]').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tselectedModules.push(currentTarget.val());\n\t\t\t\t}\n\t\t\t});\n\t\t\ttable.$('.sandNoticeOn').each(function (e) {\n\t\t\t\tvar value = $(this).closest('tr').data('id');\n\t\t\t\tsendNoticeModules.push(value);\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Notification',\n\t\t\t\taction: 'Notification',\n\t\t\t\tmode: 'saveWatchingModules',\n\t\t\t\tselctedModules: selectedModules,\n\t\t\t\tsendNotifications: sendNoticeModules,\n\t\t\t\tfrequency: container.find('select[name=\"frequency\"]').val()\n\t\t\t};\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function () {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t}).fail(function () {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.selectAllModules').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\ttable.$('.watchingModule:not(:disabled)').prop('checked', $(this).is(':checked'));\n\t\t});\n\t\tcontainer.find('.sentNotice').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar val = !element.hasClass('sandNoticeOn');\n\t\t\tthisInstance.changeSendNoticeState(element);\n\t\t\ttable.$('.sandNoticeOn,.sandNoticeOff').each(function () {\n\t\t\t\tthisInstance.changeSendNoticeState($(this), val);\n\t\t\t});\n\t\t});\n\t\ttable.$('.sandNoticeOn,.sandNoticeOff').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tthisInstance.changeSendNoticeState(element);\n\t\t});\n\t},\n\tchangeSendNoticeState: function (element, val) {\n\t\tif (val !== undefined) {\n\t\t\tif (val === true) {\n\t\t\t\telement.addClass('fa-envelope').removeClass('fa-envelope-o');\n\t\t\t\telement.addClass('sandNoticeOn').removeClass('sandNoticeOff');\n\t\t\t} else {\n\t\t\t\telement.addClass('fa-envelope-o').removeClass('fa-envelope');\n\t\t\t\telement.addClass('sandNoticeOff').removeClass('sandNoticeOn');\n\t\t\t}\n\t\t} else {\n\t\t\telement.toggleClass('fa-envelope fa-envelope-o');\n\t\t\telement.toggleClass('sandNoticeOn sandNoticeOff');\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tvar container = $('.modalNotificationNotificationConfig');\n\t\tthis.registerEventForModal(container);\n\t}\n});\njQuery(document).ready(function () {\n\tvar instance = new Notification_NotificationConfig_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","registerEventForModal","container","table","app","registerDataTables","find","showPopoverElementView","on","e","state","removeClass","addClass","sendNoticeModules","$","each","currentTarget","is","selectedModules","push","val","closest","data","value","module","action","mode","selctedModules","sendNotifications","frequency","progress","progressIndicator","AppConnector","request","params","done","hideModalWindow","fail","stopPropagation","prop","element","hasClass","thisInstance","changeSendNoticeState","toggleClass","registerEvents","document","ready","instance"],"mappings":"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"}