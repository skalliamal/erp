'use strict';

Vtiger_List_Js('Portal_List_Js',{getDefaultParams:function b(){var a={module:app.getModuleName(),view:'List',page:jQuery('#pageNumber').val(),orderby:jQuery('#orderBy').val(),sortorder:jQuery('#sortOrder').val(),search_value:jQuery('#alphabetValue').val()};return a},editBookmark:function b(a){AppConnector.request(a).done(function(a){var b=function(){Portal_List_Js.saveBookmark();};app.showModalWindow(a,function(a){'function'==typeof b&&b(a);});});},saveBookmark:function a(){jQuery('#saveBookmark').on('submit',function(a){a.preventDefault();var b=jQuery(a.currentTarget),c=b.serializeFormData();if(''==c.bookmarkName||''==c.bookmarkUrl){var d={title:app.vtranslate('JS_MESSAGE'),text:app.vtranslate('JS_ENTER_MANDATORY_FIELD'),type:'error'};return Vtiger_Helper_Js.showPnotify(d),!1}AppConnector.request(c).done(function(a){if(a.success){var b={title:app.vtranslate('JS_MESSAGE'),text:a.result.message,type:'success'};Vtiger_Helper_Js.showPnotify(b);var c=Portal_List_Js.getDefaultParams();Portal_List_Js.loadListViewContent(c),app.hideModalWindow();}});});},massDeleteRecords:function f(){var a=Vtiger_List_Js.getInstance(),b=a.checkListRecordSelected();if(!0!=b){var c=a.readSelectedIds(!0),d=a.readExcludedIds(!0),e=app.vtranslate('LBL_MASS_DELETE_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:e}).done(function(){var b='index.php?module='+app.getModuleName()+'&action=MassDelete';b+='&selected_ids='+c+'&excluded_ids='+d;var e=a.getAlphabetSearchValue();'undefined'!=typeof e&&0<e.length&&(b+='&search_value='+e),AppConnector.request(b).done(function(a){if(a.success){var b={title:app.vtranslate('JS_MESSAGE'),text:a.result.message,type:'error'};Vtiger_Helper_Js.showPnotify(b);var c=Portal_List_Js.getDefaultParams();Portal_List_Js.loadListViewContent(c);}});});}else a.noRecordSelectedAlert();},loadListViewContent:function c(a){var b=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.requestPjax(a).done(function(a){b.progressIndicator({mode:'hide'}),jQuery('#listViewContents').html(a),Portal_List_Js.updatePagination();});},updatePagination:function l(){var a=jQuery('#previousPageExist').val(),b=jQuery('#nextPageExist').val(),c=jQuery('#previousPageButton'),d=jQuery('#nextPageButton'),e=parseInt(jQuery('#noOfEntries').val()),f=parseInt(jQuery('#pageStartRange').val()),g=parseInt(jQuery('#pageEndRange').val()),h=jQuery('#totalPageCount').text(),i=jQuery('.totalNumberOfRecords'),j=jQuery('.pageNumbersText'),k=parseInt(jQuery('#pageNumber').val());if(jQuery('#pageToJump').val(k),''==a?''==a&&c.attr('disabled','disabled'):c.removeAttr('disabled'),''!=b&&1<h?d.removeAttr('disabled'):(''==b||1==h)&&d.attr('disabled','disabled'),0!=e){j.html(f+' ('+g+')'),i.removeClass('d-none');}else j.html('<span>&nbsp;</span>'),i.hasClass('d-none')||i.addClass('d-none');}},{registerAddBookmark:function a(){jQuery('.addBookmark').on('click',function(){var a={module:app.getModuleName(),parent:app.getParentModuleName(),view:'EditAjax'};Portal_List_Js.editBookmark(a);});},registerEditBookmark:function a(){jQuery('.editRecord').on('click',function(a){a.stopPropagation();var b=jQuery(a.currentTarget),c=b.closest('.listViewEntries').data('id'),d={module:app.getModuleName(),parent:app.getParentModuleName(),view:'EditAjax',record:c};Portal_List_Js.editBookmark(d);});},registerDeleteBookmark:function a(){jQuery('.deleteRecord').on('click',function(a){a.stopPropagation(),a.preventDefault();var b=jQuery(a.currentTarget),c=b.closest('.listViewEntries').data('id'),d=app.vtranslate('LBL_DELETE_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:d}).done(function(){var a={module:app.getModuleName(),parent:app.getParentModuleName(),action:'DeleteAjax',record:c};AppConnector.request(a).done(function(a){if(a.success){var b={title:app.vtranslate('JS_MESSAGE'),text:a.result.message,type:'error'};Vtiger_Helper_Js.showPnotify(b);var c=Portal_List_Js.getDefaultParams();Portal_List_Js.loadListViewContent(c);}});});});},registerAlphabetSearch:function a(){jQuery('.portalAlphabetSearch').on('click',function(a){var b=jQuery(a.currentTarget),c=b.find('a').attr('id'),d=Portal_List_Js.getDefaultParams();d.search_value=c,Portal_List_Js.loadListViewContent(d);});},registerSortingEvent:function a(){jQuery('.portalListViewHeader').on('click',function(a){var b=jQuery(a.currentTarget),c=b.attr('id'),d=b.data('nextsortorderval'),e=Portal_List_Js.getDefaultParams();e.orderby=c,e.sortorder=d,Portal_List_Js.loadListViewContent(e);});},registerPreviousPageEvent:function a(){jQuery('#previousPageButton').on('click',function(){var a=jQuery('#pageNumber').val(),b=parseInt(a)-1;if(1>b)return !1;var c=Portal_List_Js.getDefaultParams();c.page=b,Portal_List_Js.loadListViewContent(c);});},registerNextPageEvent:function a(){jQuery('#nextPageButton').on('click',function(){var a=jQuery('#pageNumber').val(),b=parseInt(a)+1,c=parseInt(jQuery('#totalPageCount').text());if(b>c)return !1;var d=Portal_List_Js.getDefaultParams();d.page=b,Portal_List_Js.loadListViewContent(d);});},registerRowClickEvent:function a(){jQuery('.listViewEntries').on('click',function(a){if(!jQuery(a.target,jQuery(a.currentTarget)).is('td:first-child')&&!jQuery(a.target).is('input[type="checkbox"]')){var b=jQuery(a.currentTarget),c=b.data('recordurl');'undefined'==typeof c||(window.location.href=c);}});},registerEvents:function a(){this._super(),this.registerAddBookmark(),this.registerEditBookmark(),this.registerDeleteBookmark(),this.registerAlphabetSearch(),this.registerSortingEvent(),this.registerPreviousPageEvent(),this.registerNextPageEvent(),this.registerRowClickEvent();}});
//# sourceMappingURL=List.min.js.map
