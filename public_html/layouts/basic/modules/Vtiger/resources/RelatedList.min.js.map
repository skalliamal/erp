{"version":3,"file":"RelatedList.min.js","sources":["RelatedList.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\"Vtiger_RelatedList_Js\", {\n\tgetInstance: function (parentId, parentModule, selectedRelatedTabElement, relatedModuleName) {\n\t\tvar moduleClassName = app.getModuleName() + \"_RelatedList_Js\";\n\t\tvar fallbackClassName = Vtiger_RelatedList_Js;\n\t\tif (typeof window[moduleClassName] !== \"undefined\") {\n\t\t\tvar instance = new window[moduleClassName]();\n\t\t} else {\n\t\t\tvar instance = new fallbackClassName();\n\t\t}\n\t\tinstance.parentRecordId = parentId;\n\t\tinstance.parentModuleName = parentModule;\n\t\tinstance.selectedRelatedTabElement = selectedRelatedTabElement;\n\t\tinstance.moduleName = relatedModuleName;\n\t\tinstance.relatedTabsContainer = selectedRelatedTabElement.closest('div.related');\n\t\tinstance.content = $('div.contents', instance.relatedTabsContainer.closest('div.detailViewContainer'));\n\t\tinstance.relatedView = instance.content.find('input.relatedView').val();\n\t\treturn instance;\n\t},\n\ttriggerMassAction: function (massActionUrl, type) {\n\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\tif (validationResult != true) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\t// Compute selected ids, excluded ids values, along with cvid value and pass as url parameters\n\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\tvar postData = {\n\t\t\t\t\"viewname\": cvId,\n\t\t\t\t\"selected_ids\": selectedIds,\n\t\t\t\t\"excluded_ids\": excludedIds\n\t\t\t};\n\t\t\tvar listViewInstance = Vtiger_List_Js.getInstance();\n\t\t\tif (listViewInstance.getListSearchInstance()) {\n\t\t\t\tvar searchValue = listViewInstance.getListSearchInstance().getAlphabetSearchValue();\n\t\t\t\tpostData.search_params = JSON.stringify(listViewInstance.getListSearchInstance().getListSearchParams());\n\t\t\t\tif ((typeof searchValue !== \"undefined\") && (searchValue.length > 0)) {\n\t\t\t\t\tpostData['search_key'] = listViewInstance.getListSearchInstance().getAlphabetSearchField();\n\t\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\t\tpostData['operator'] = 's';\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar actionParams = {\n\t\t\t\t\"type\": \"POST\",\n\t\t\t\t\"url\": massActionUrl,\n\t\t\t\t\"data\": postData\n\t\t\t};\n\t\t\tif (type === 'sendByForm') {\n\t\t\t\tvar form = $('<form method=\"POST\" action=\"' + massActionUrl + '\">');\n\t\t\t\tif (typeof csrfMagicName !== \"undefined\") {\n\t\t\t\t\tform.append($('<input />', {name: csrfMagicName, value: csrfMagicToken}));\n\t\t\t\t}\n\t\t\t\t$.each(postData, function (k, v) {\n\t\t\t\t\tform.append($('<input />', {name: k, value: v}));\n\t\t\t\t});\n\t\t\t\t$('body').append(form);\n\t\t\t\tform.submit();\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t} else {\n\t\t\t\tAppConnector.request(actionParams).done(function (responseData) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tif (responseData && responseData.result !== null) {\n\t\t\t\t\t\tif (responseData.result.notify) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showMessage(responseData.result.notify);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (responseData.result.reloadList) {\n\t\t\t\t\t\t\tVtiger_Detail_Js.reloadRelatedList();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (responseData.result.procesStop) {\n\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t}\n\n\t}\n}, {\n\tselectedRelatedTabElement: false,\n\tparentRecordId: false,\n\tparentModuleName: false,\n\tmoduleName: false,\n\trelatedTabsContainer: false,\n\tcontent: false,\n\tlistSearchInstance: false,\n\tdetailViewContentHolder: false,\n\trelatedView: false,\n\tframeProgress: false,\n\tsetSelectedTabElement: function (tabElement) {\n\t\tthis.selectedRelatedTabElement = tabElement;\n\t},\n\tgetSelectedTabElement: function () {\n\t\treturn this.selectedRelatedTabElement;\n\t},\n\tgetParentId: function () {\n\t\treturn this.parentRecordId;\n\t},\n\tgetRelatedContainer: function () {\n\t\treturn this.content;\n\t},\n\tsetRelatedContainer: function (container) {\n\t\tthis.content = container;\n\t\tthis.relatedView = container.find('input.relatedView').val();\n\t},\n\tgetContentHolder: function () {\n\t\tif (this.detailViewContentHolder == false) {\n\t\t\tthis.detailViewContentHolder = $('div.details div.contents');\n\t\t}\n\t\treturn this.detailViewContentHolder;\n\t},\n\tgetCurrentPageNum: function () {\n\t\treturn $('input[name=\"currentPageNum\"]', this.content).val();\n\t},\n\tsetCurrentPageNumber: function (pageNumber) {\n\t\t$('input[name=\"currentPageNum\"]', this.content).val(pageNumber);\n\t},\n\tgetOrderBy: function () {\n\t\treturn $('#orderBy', this.content).val();\n\t},\n\tgetSortOrder: function () {\n\t\treturn $(\"#sortOrder\", this.content).val();\n\t},\n\tgetCompleteParams: function () {\n\t\tvar container = this.getRelatedContainer();\n\t\tvar params = {\n\t\t\tview: 'Detail',\n\t\t\tmodule: this.parentModuleName,\n\t\t\trecord: this.getParentId(),\n\t\t\trelatedModule: this.moduleName,\n\t\t\tsortorder: this.getSortOrder(),\n\t\t\torderby: this.getOrderBy(),\n\t\t\tpage: this.getCurrentPageNum(),\n\t\t\trelatedView: this.relatedView,\n\t\t\tmode: 'showRelatedList'\n\t\t};\n\t\tif (container.find('.pagination').length) {\n\t\t\tparams['totalCount'] = container.find('.pagination').data('totalCount');\n\t\t}\n\t\tif (container.find('.entityState').length) {\n\t\t\tparams['entityState'] = container.find('.entityState').val();\n\t\t}\n\t\tif (this.listSearchInstance) {\n\t\t\tvar searchValue = this.listSearchInstance.getAlphabetSearchValue();\n\t\t\tparams.search_params = JSON.stringify(this.listSearchInstance.getListSearchParams());\n\t\t}\n\t\tif ((typeof searchValue !== \"undefined\") && (searchValue.length > 0)) {\n\t\t\tparams['search_key'] = this.listSearchInstance.getAlphabetSearchField();\n\t\t\tparams['search_value'] = searchValue;\n\t\t\tparams['operator'] = 's';\n\t\t}\n\t\tif (this.moduleName == 'Calendar') {\n\t\t\tvar switchBtn = container.find('.js-switch--calendar');\n\t\t\tif (switchBtn.length) {\n\t\t\t\tparams.time = switchBtn.first().prop('checked') ? 'current' : 'history';\n\t\t\t}\n\t\t}\n\t\treturn params;\n\t},\n\tloadRelatedList: function (params) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tif (typeof thisInstance.moduleName === \"undefined\" || thisInstance.moduleName.length <= 0) {\n\t\t\tvar currentInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tcurrentInstance.loadWidgets();\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tvar progressInstance = jQuery.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tvar completeParams = this.getCompleteParams();\n\t\tvar activeTabsReference = thisInstance.relatedTabsContainer.find('li.active').data('reference');\n\t\tAppConnector.request($.extend(completeParams, params)).done(function (responseData) {\n\t\t\tvar currentInstance = Vtiger_Detail_Js.getInstance();\n\t\t\tcurrentInstance.loadWidgets();\n\t\t\tprogressInstance.progressIndicator({'mode': 'hide'});\n\t\t\tif (activeTabsReference !== 'ProductsAndServices') {\n\t\t\t\tthisInstance.relatedTabsContainer.find('li').removeClass('active');\n\t\t\t\tthisInstance.selectedRelatedTabElement.addClass('active');\n\t\t\t\tthisInstance.content.html(responseData);\n\t\t\t\t$('.pageNumbers', thisInstance.content).tooltip();\n\t\t\t\tthisInstance.registerPostLoadEvents();\n\t\t\t\tthisInstance.registerListEvents();\n\t\t\t\tif (thisInstance.listSearchInstance) {\n\t\t\t\t\tthisInstance.listSearchInstance.registerBasicEvents();\n\t\t\t\t}\n\t\t\t}\n\t\t\taDeferred.resolve(responseData);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\tprogressInstance.progressIndicator({'mode': 'hide'});\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\ttriggerDisplayTypeEvent: function () {\n\t\tvar widthType = app.cacheGet('widthType', 'narrowWidthType');\n\t\tif (widthType) {\n\t\t\tvar elements = this.content.find('.listViewEntriesTable').find('td,th');\n\t\t\telements.attr('class', widthType);\n\t\t}\n\t},\n\tshowSelectRelation: function (extendParams) {\n\t\tlet params = $.extend(this.getRecordsListParams(), extendParams);\n\t\tapp.showRecordsList(params, (modal, instance) => {\n\t\t\tinstance.setSelectEvent((responseData) => {\n\t\t\t\tthis.addRelations(Object.keys(responseData)).done(() => {\n\t\t\t\t\tapp.event.trigger(\"RelatedListView.AfterSelectRelation\", responseData, this, instance, params);\n\t\t\t\t\tlet detail = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\tthis.loadRelatedList().done(function () {\n\t\t\t\t\t\tdetail.registerRelatedModulesRecordCount();\n\t\t\t\t\t});\n\t\t\t\t\tif (this.getSelectedTabElement().data('link-key') === 'LBL_RECORD_SUMMARY') {\n\t\t\t\t\t\tdetail.loadWidgets();\n\t\t\t\t\t\tdetail.registerRelatedModulesRecordCount();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tgetRecordsListParams: function () {\n\t\treturn {\n\t\t\tmodule: this.moduleName,\n\t\t\tsrc_module: this.parentModuleName,\n\t\t\tsrc_record: this.parentRecordId,\n\t\t\tmulti_select: true\n\t\t};\n\t},\n\taddRelations: function (idList) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tAppConnector.request({\n\t\t\tmodule: this.parentModuleName,\n\t\t\taction: 'RelationAjax',\n\t\t\tmode: 'addRelation',\n\t\t\trelated_module: this.moduleName,\n\t\t\tsrc_record: this.parentRecordId,\n\t\t\trelated_record_list: $.isArray(idList) ? JSON.stringify(idList) : idList\n\t\t}).done(function (responseData) {\n\t\t\taDeferred.resolve(responseData);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tdeleteRelation: function (relatedIdList) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tAppConnector.request({\n\t\t\tmodule: this.parentModuleName,\n\t\t\taction: 'RelationAjax',\n\t\t\tmode: 'deleteRelation',\n\t\t\trelated_module: this.moduleName,\n\t\t\tsrc_record: this.parentRecordId,\n\t\t\trelated_record_list: JSON.stringify(relatedIdList)\n\t\t}).done(function (responseData) {\n\t\t\taDeferred.resolve(responseData);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to handle Sort\n\t */\n\tsortHandler: function (headerElement) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar sortOrderVal = headerElement.data('nextsortorderval');\n\t\tif (typeof sortOrderVal === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\t\tthis.loadRelatedList({\n\t\t\torderby: headerElement.data('fieldname'),\n\t\t\tsortorder: sortOrderVal,\n\t\t}).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to handle next page navigation\n\t */\n\tnextPageHandler: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tvar pageLimit = jQuery('#pageLimit', this.content).val();\n\t\tvar noOfEntries = jQuery('#noOfEntries', this.content).val();\n\t\tif (noOfEntries == pageLimit) {\n\t\t\tvar pageNumber = this.getCurrentPageNum();\n\t\t\tvar nextPage = parseInt(pageNumber) + 1;\n\t\t\tthis.loadRelatedList({\n\t\t\t\tpage: nextPage\n\t\t\t}).done(function (data) {\n\t\t\t\tthisInstance.setCurrentPageNumber(nextPage);\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to handle next page navigation\n\t */\n\tpreviousPageHandler: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar pageNumber = this.getCurrentPageNum();\n\t\tif (pageNumber > 1) {\n\t\t\tvar previousPage = parseInt(pageNumber) - 1;\n\t\t\tthis.loadRelatedList({\n\t\t\t\tpage: previousPage\n\t\t\t}).done(function (data) {\n\t\t\t\tthisInstance.setCurrentPageNumber(previousPage);\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to handle select page jump in related list\n\t */\n\tselectPageHandler: function (pageNumber) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tthis.loadRelatedList({\n\t\t\tpage: pageNumber,\n\t\t}).done(function (data) {\n\t\t\tthisInstance.setCurrentPageNumber(pageNumber);\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to handle page jump in related list\n\t */\n\tpageJumpHandler: function (e) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tif (e.which == 13) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar response = Vtiger_WholeNumberGreaterThanZero_Validator_Js.invokeValidation(element);\n\t\t\tif (typeof response !== \"undefined\") {\n\t\t\t\telement.validationEngine('showPrompt', response, '', \"topLeft\", true);\n\t\t\t\te.preventDefault();\n\t\t\t} else {\n\t\t\t\telement.validationEngine('hideAll');\n\t\t\t\tvar jumpToPage = parseInt(element.val());\n\t\t\t\tvar totalPages = parseInt(jQuery('#totalPageCount', thisInstance.content).text());\n\t\t\t\tif (jumpToPage > totalPages) {\n\t\t\t\t\tvar error = app.vtranslate('JS_PAGE_NOT_EXIST');\n\t\t\t\t\telement.validationEngine('showPrompt', error, '', \"topLeft\", true);\n\t\t\t\t}\n\t\t\t\tvar invalidFields = element.parent().find('.formError');\n\t\t\t\tif (invalidFields.length < 1) {\n\t\t\t\t\tvar currentPage = jQuery('input[name=\"currentPageNum\"]', thisInstance.content).val();\n\t\t\t\t\tif (jumpToPage == currentPage) {\n\t\t\t\t\t\tvar message = app.vtranslate('JS_YOU_ARE_IN_PAGE_NUMBER') + \" \" + jumpToPage;\n\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t};\n\t\t\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tthis.loadRelatedList({\n\t\t\t\t\t\tpage: jumpToPage\n\t\t\t\t\t}).done(function (data) {\n\t\t\t\t\t\tthisInstance.setCurrentPageNumber(jumpToPage);\n\t\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/**\n\t * Function to add related record for the module\n\t */\n\taddRelatedRecord: function (element, callback) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tvar referenceModuleName = this.moduleName;\n\t\tvar parentId = this.getParentId();\n\t\tvar parentModule = this.parentModuleName;\n\t\tvar quickCreateParams = {};\n\t\tvar relatedParams = {};\n\t\tvar relatedField = element.data('name');\n\t\tvar fullFormUrl = element.data('url');\n\t\trelatedParams[relatedField] = parentId;\n\t\tvar eliminatedKeys = new Array('view', 'module', 'mode', 'action');\n\n\t\tvar preQuickCreateSave = function (data) {\n\t\t\tvar index, queryParam, queryParamComponents;\n\n\t\t\t//To handle switch to task tab when click on add task from related list of activities\n\t\t\t//As this is leading to events tab intially even clicked on add task\n\t\t\tif (typeof fullFormUrl !== \"undefined\" && fullFormUrl.indexOf('?') !== -1) {\n\t\t\t\tvar urlSplit = fullFormUrl.split('?');\n\t\t\t\tvar queryString = urlSplit[1];\n\t\t\t\tvar queryParameters = queryString.split('&');\n\t\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\t\tif (queryParamComponents[0] == 'mode' && queryParamComponents[1] == 'Calendar') {\n\t\t\t\t\t\tdata.find('a[data-tab-name=\"Task\"]').trigger('click');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tjQuery('<input type=\"hidden\" name=\"sourceModule\" value=\"' + parentModule + '\" />').appendTo(data);\n\t\t\tjQuery('<input type=\"hidden\" name=\"sourceRecord\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\tjQuery('<input type=\"hidden\" name=\"relationOperation\" value=\"true\" />').appendTo(data);\n\n\t\t\tif (typeof relatedField !== \"undefined\") {\n\t\t\t\tvar field = data.find('[name=\"' + relatedField + '\"]');\n\t\t\t\t//If their is no element with the relatedField name,we are adding hidden element with\n\t\t\t\t//name as relatedField name,for saving of record with relation to parent record\n\t\t\t\tif (field.length == 0) {\n\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + relatedField + '\" value=\"' + parentId + '\" />').appendTo(data);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (index = 0; index < queryParameters.length; index++) {\n\t\t\t\tqueryParam = queryParameters[index];\n\t\t\t\tqueryParamComponents = queryParam.split('=');\n\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1' && data.find('[name=\"' + queryParamComponents[0] + '\"]').length == 0) {\n\t\t\t\t\tjQuery('<input type=\"hidden\" name=\"' + queryParamComponents[0] + '\" value=\"' + queryParamComponents[1] + '\" />').appendTo(data);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof callback !== \"undefined\") {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\tvar postQuickCreateSave = function (data) {\n\t\t\tthisInstance.loadRelatedList().done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t})\n\t\t}\n\n\t\t//If url contains params then seperate them and make them as relatedParams\n\t\tif (typeof fullFormUrl !== \"undefined\" && fullFormUrl.indexOf('?') !== -1) {\n\t\t\tvar urlSplit = fullFormUrl.split('?');\n\t\t\tvar queryString = urlSplit[1];\n\t\t\tvar queryParameters = queryString.split('&');\n\t\t\tfor (var index = 0; index < queryParameters.length; index++) {\n\t\t\t\tvar queryParam = queryParameters[index];\n\t\t\t\tvar queryParamComponents = queryParam.split('=');\n\t\t\t\tif (jQuery.inArray(queryParamComponents[0], eliminatedKeys) == '-1') {\n\t\t\t\t\trelatedParams[queryParamComponents[0]] = queryParamComponents[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tquickCreateParams['data'] = relatedParams;\n\t\tquickCreateParams['callbackFunction'] = postQuickCreateSave;\n\t\tquickCreateParams['callbackPostShown'] = preQuickCreateSave;\n\t\tquickCreateParams['noCache'] = true;\n\t\tVtiger_Header_Js.getInstance().quickCreateModule(referenceModuleName, quickCreateParams);\n\t\treturn aDeferred.promise();\n\t},\n\tgetRelatedPageCount: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar element = this.content.find('#totalPageCount');\n\t\tvar totalCountElem = this.content.find('#totalCount');\n\t\tvar totalPageNumber = element.text();\n\t\tif (totalPageNumber == \"\") {\n\t\t\telement.progressIndicator({});\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\taction: \"RelationAjax\",\n\t\t\t\tmode: \"getRelatedListPageCount\",\n\t\t\t\trecord: this.getParentId(),\n\t\t\t\trelatedModule: this.moduleName,\n\t\t\t}).done(function (data) {\n\t\t\t\tvar pageCount = data['result']['page'];\n\t\t\t\tvar numberOfRecords = data['result']['numberOfRecords'];\n\t\t\t\ttotalCountElem.val(numberOfRecords);\n\t\t\t\telement.text(pageCount);\n\t\t\t\telement.progressIndicator({'mode': 'hide'});\n\t\t\t\taDeferred.resolve();\n\t\t\t}).fail(function (error, err) {\n\t\t\t\taDeferred.reject(false);\n\t\t\t});\n\t\t} else {\n\t\t\taDeferred.resolve();\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\tfavoritesRelation: function (relcrmId, state) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tif (relcrmId) {\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: this.parentModuleName,\n\t\t\t\taction: \"RelationAjax\",\n\t\t\t\tmode: \"updateFavoriteForRecord\",\n\t\t\t\trecord: this.getParentId(),\n\t\t\t\trelcrmid: relcrmId,\n\t\t\t\trelatedModule: this.moduleName,\n\t\t\t\tactionMode: state ? 'delete' : 'add',\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.result)\n\t\t\t\t\taDeferred.resolve(true);\n\t\t\t}).fail(function (error, err) {\n\t\t\t\taDeferred.reject(false);\n\t\t\t});\n\t\t} else {\n\t\t\taDeferred.reject(false);\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\tupdatePreview: function (url) {\n\t\tvar frame = this.content.find('.listPreviewframe');\n\t\tthis.frameProgress = $.progressIndicator({\n\t\t\tposition: 'html',\n\t\t\tmessage: app.vtranslate('JS_FRAME_IN_PROGRESS'),\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tvar defaultView = '';\n\t\tif (app.getMainParams('defaultDetailViewName')) {\n\t\t\tdefaultView = defaultView + '&mode=showDetailViewByMode&requestMode=' + app.getMainParams('defaultDetailViewName'); // full, summary\n\t\t}\n\t\tframe.attr('src', url.replace(\"view=Detail\", \"view=DetailPreview\") + defaultView);\n\t},\n\tregisterUnreviewedCountEvent: function () {\n\t\tvar ids = [];\n\t\tvar relatedContent = this.content;\n\t\tvar isUnreviewedActive = relatedContent.find('.unreviewed').length;\n\t\trelatedContent.find('tr.listViewEntries').each(function () {\n\t\t\tvar id = jQuery(this).data('id');\n\t\t\tif (id) {\n\t\t\t\tids.push(id);\n\t\t\t}\n\t\t});\n\t\tif (!ids || isUnreviewedActive < 1) {\n\t\t\treturn;\n\t\t}\n\t\tAppConnector.request({\n\t\t\taction: 'ChangesReviewedOn',\n\t\t\tmode: 'getUnreviewed',\n\t\t\tmodule: 'ModTracker',\n\t\t\tsourceModule: this.moduleName,\n\t\t\trecordsId: ids\n\t\t}).done(function (appData) {\n\t\t\tvar data = appData.result;\n\t\t\t$.each(data, function (id, value) {\n\t\t\t\tif (value.a > 0) {\n\t\t\t\t\trelatedContent.find('tr[data-id=\"' + id + '\"] .unreviewed .badge.all').text(value.a).parent().removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (value.m > 0) {\n\t\t\t\t\trelatedContent.find('tr[data-id=\"' + id + '\"] .unreviewed .badge.mail').text(value.m).parent().removeClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterChangeEntityStateEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar relatedContent = this.content;\n\t\trelatedContent.on('click', '.dropdownEntityState a', function (e) {\n\t\t\tvar element = $(this);\n\t\t\trelatedContent.find('.entityState').val(element.data('value'));\n\t\t\trelatedContent.find('.pagination').data('totalCount', 0);\n\t\t\trelatedContent.find('.dropdownEntityState button').find('span').attr('class', element.find('span').attr('class'));\n\t\t\tthisInstance.loadRelatedList({page: 1});\n\t\t});\n\t},\n\tregisterRowsEvent: function () {\n\t\tvar thisInstance = this;\n\t\tif (this.relatedView === 'List' || this.relatedView === 'Detail') {\n\t\t\tthis.content.find('.listViewEntries').on('click', function (e) {\n\t\t\t\tif ($(e.target).is('td')) {\n\t\t\t\t\tif (app.getViewName() == 'DetailPreview') {\n\t\t\t\t\t\ttop.document.location.href = $(e.target).closest('tr').data('recordurl');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.location.href = $(e.target).closest('tr').data('recordurl');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.content.find('.showInventoryRow').on('click', function (e) {\n\t\t\t\tvar target = $(this);\n\t\t\t\tvar row = target.closest('tr');\n\t\t\t\tvar inventoryRow = row.next();\n\t\t\t\tif (inventoryRow.hasClass('listViewInventoryEntries')) {\n\t\t\t\t\tinventoryRow.toggleClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (this.relatedView === 'ListPreview') {\n\t\t\tthis.content.find('.listViewEntries').on('click', function (e) {\n\t\t\t\tlet target = $(e.target);\n\t\t\t\tif (target.closest('div').hasClass('actions'))\n\t\t\t\t\treturn;\n\t\t\t\tif (target.is('button') || target.parent().is('button'))\n\t\t\t\t\treturn;\n\t\t\t\tif (target.closest('a').hasClass('noLinkBtn'))\n\t\t\t\t\treturn;\n\t\t\t\tif ($(e.target, $(e.currentTarget)).is('td:first-child'))\n\t\t\t\t\treturn;\n\t\t\t\tif (target.is('input[type=\"checkbox\"]'))\n\t\t\t\t\treturn;\n\t\t\t\tif ($.contains($(e.currentTarget).find('td:last-child').get(0), target[0]))\n\t\t\t\t\treturn;\n\t\t\t\tif ($.contains($(e.currentTarget).find('td:first-child').get(0), target[0]))\n\t\t\t\t\treturn;\n\t\t\t\tvar recordUrl = $(this).data('recordurl');\n\t\t\t\tthisInstance.content.find('.listViewEntriesTable .listViewEntries').removeClass('active');\n\t\t\t\t$(this).addClass('active');\n\t\t\t\tthisInstance.updatePreview(recordUrl);\n\t\t\t});\n\t\t}\n\t},\n\tregisterSummationEvent: function () {\n\t\tvar thisInstance = this;\n\t\tthis.content.on('click', '.listViewSummation button', function () {\n\t\t\tvar button = $(this);\n\t\t\tvar calculateValue = button.closest('td').find('.calculateValue');\n\t\t\tvar params = thisInstance.getCompleteParams();\n\t\t\tparams['action'] = 'RelationAjax';\n\t\t\tparams['mode'] = 'calculate';\n\t\t\tparams['fieldName'] = button.data('field');\n\t\t\tparams['calculateType'] = button.data('operator');\n\t\t\tdelete params['view'];\n\t\t\tvar progress = $.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('JS_CALCULATING_IN_PROGRESS'),\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tapp.hidePopover(button);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\tcalculateValue.html(response.result);\n\t\t\t\t} else {\n\t\t\t\t\tcalculateValue.html('');\n\t\t\t\t}\n\t\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t\t});\n\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\tregisterPreviewEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar contentHeight = this.content.find('.js-detail-preview,.js-list-preview');\n\t\tcontentHeight.height(app.getScreenHeight() - (this.content.offset().top + $('.js-footer').height()));\n\t\tthis.content.find('.listPreviewframe').on('load', function () {\n\t\t\tif (thisInstance.frameProgress) {\n\t\t\t\tthisInstance.frameProgress.progressIndicator({mode: 'hide'});\n\t\t\t}\n\t\t\tcontentHeight.height($(this).contents().find('.bodyContents').height() + 2);\n\t\t});\n\t\tthis.content.find('.listViewEntriesTable .listViewEntries').first().trigger('click');\n\t},\n\tregisterPaginationEvents: function () {\n\t\tvar thisInstance = this;\n\t\tvar relatedContent = this.content;\n\t\tthis.content.on('click', '#relatedViewNextPageButton', function (e) {\n\t\t\tif ($(this).hasClass('disabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthisInstance.nextPageHandler();\n\t\t});\n\t\tthis.content.on('click', '#relatedViewPreviousPageButton', function () {\n\t\t\tthisInstance.previousPageHandler();\n\t\t});\n\t\tthis.content.on('click', '#relatedListPageJump', function (e) {\n\t\t\tthisInstance.getRelatedPageCount();\n\t\t});\n\t\tthis.content.on('click', '#relatedListPageJumpDropDown > li', function (e) {\n\t\t\te.stopImmediatePropagation();\n\t\t}).on('keypress', '#pageToJump', function (e) {\n\t\t\tthisInstance.pageJumpHandler(e);\n\t\t});\n\t\tthis.content.on('click', '.pageNumber', function () {\n\t\t\tif ($(this).hasClass(\"disabled\")) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthisInstance.selectPageHandler($(this).data(\"id\"));\n\t\t});\n\t\tthis.content.on('click', '#totalCountBtn', function () {\n\t\t\tapp.hidePopover($(this));\n\t\t\tvar params = {\n\t\t\t\tmodule: thisInstance.parentModuleName,\n\t\t\t\tview: 'Pagination',\n\t\t\t\tmode: \"getRelationPagination\",\n\t\t\t\trecord: thisInstance.getParentId(),\n\t\t\t\trelatedModule: thisInstance.moduleName,\n\t\t\t\tnoOfEntries: $('#noOfEntries', relatedContent).val(),\n\t\t\t\tpage: relatedContent.find('[name=\"currentPageNum\"]').val(),\n\t\t\t}\n\t\t\tif (relatedContent.find('.entityState').length) {\n\t\t\t\tparams['entityState'] = relatedContent.find('.entityState').val();\n\t\t\t}\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\trelatedContent.find('.paginationDiv').html(response);\n\t\t\t});\n\t\t});\n\t},\n\tregisterListEvents: function () {\n\t\tvar relatedContent = this.content;\n\t\tvar thisInstance = this;\n\t\tthis.content.on('click', '.relatedListHeaderValues', function (e) {\n\t\t\tthisInstance.sortHandler($(this));\n\t\t});\n\t\tthis.content.find('a.favorites').on('click', function (e) {\n\t\t\tvar progressInstance = jQuery.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar element = $(this);\n\t\t\tvar row = element.closest('tr');\n\t\t\tthisInstance.favoritesRelation(row.data('id'), element.data('state')).done(function (response) {\n\t\t\t\tif (response) {\n\t\t\t\t\tvar state = element.data('state') ? 0 : 1;\n\t\t\t\t\telement.data('state', state);\n\t\t\t\t\telement.find('[data-fa-i2svg]').each(function () {\n\t\t\t\t\t\tif (jQuery(this).hasClass('d-none')) {\n\t\t\t\t\t\t\tjQuery(this).removeClass('d-none');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tjQuery(this).addClass('d-none');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tprogressInstance.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tvar text = app.vtranslate('JS_REMOVED_FROM_FAVORITES');\n\t\t\t\t\tif (state) {\n\t\t\t\t\t\ttext = app.vtranslate('JS_ADDED_TO_FAVORITES');\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({text: text, type: 'success'});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tthis.content.find('[name=\"addButton\"]').on('click', function (e) {\n\t\t\tconst element = $(this);\n\t\t\tif (element.hasClass('quickCreateSupported') !== true) {\n\t\t\t\twindow.location.href = element.data('url');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthisInstance.addRelatedRecord(element);\n\t\t});\n\t\tthis.content.find('button.selectRelation').on('click', function (e) {\n\t\t\tlet restrictionsField = $(this).data('rf');\n\t\t\tlet params = {};\n\t\t\tif (restrictionsField && Object.keys(restrictionsField).length > 0) {\n\t\t\t\tparams = {\n\t\t\t\t\tsearch_key: restrictionsField.key,\n\t\t\t\t\tsearch_value: restrictionsField.name\n\t\t\t\t};\n\t\t\t}\n\t\t\tthisInstance.showSelectRelation(params);\n\t\t});\n\t\tthis.content.find('button.relationDelete').on('click', function (e) {\n\t\t\te.stopImmediatePropagation();\n\t\t\tvar element = $(this);\n\t\t\tVtiger_Helper_Js.showConfirmationBox({message: app.vtranslate('JS_DELETE_CONFIRMATION')}).done(function (e) {\n\t\t\t\tvar row = element.closest('tr');\n\t\t\t\tthisInstance.deleteRelation([row.data('id')]).done(function (response) {\n\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\tvar widget = element.closest('.widgetContentBlock');\n\t\t\t\t\t\tvar detail = Vtiger_Detail_Js.getInstance();\n\t\t\t\t\t\tif (widget.length) {\n\t\t\t\t\t\t\tdetail.loadWidget(widget);\n\t\t\t\t\t\t\tvar updatesWidget = thisInstance.getContentHolder().find(\"[data-type='Updates']\");\n\t\t\t\t\t\t\tif (updatesWidget.length > 0) {\n\t\t\t\t\t\t\t\tdetail.loadWidget(updatesWidget);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthisInstance.loadRelatedList();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdetail.registerRelatedModulesRecordCount();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_CANNOT_REMOVE_RELATION'));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.content.find('.js-switch--calendar').on('change', function (e) {\n\t\t\tthisInstance.loadRelatedList();\n\t\t});\n\t\tthis.content.find('.relatedViewGroup a').on('click', function (e) {\n\t\t\tvar element = $(this);\n\t\t\tthisInstance.relatedView = element.data('view');\n\t\t\trelatedContent.find('.pagination').data('totalCount', 0);\n\t\t\tthisInstance.loadRelatedList({page: 1});\n\t\t});\n\t},\n\tregisterPostLoadEvents: function () {\n\t\tvar thisInstance = this;\n\t\tapp.showPopoverElementView(this.content.find('.js-popover-tooltip'));\n\t\tthis.registerRowsEvent();\n\t\tthis.registerListScroll();\n\t\tif (this.relatedView === 'ListPreview') {\n\t\t\tthis.registerPreviewEvent();\n\t\t\tif (!this.content.find('.gutter').length) {\n\t\t\t\tif (!this.content.find('.js-list-preview').length)\n\t\t\t\t\treturn;\n\t\t\t\tthis.getDomParams(this.content);\n\t\t\t\tthis.toggleSplit(this.content);\n\t\t\t\tthis.registerListPreviewEvents(this.content);\n\t\t\t}\n\t\t}\n\t\tthis.listSearchInstance = YetiForce_ListSearch_Js.getInstance(this.content, false, this);\n\t\tapp.event.trigger(\"RelatedList.AfterLoad\", thisInstance);\n\t},\n\tgetSecondColMinWidth: function (container) {\n\t\tlet maxWidth, thisWidth;\n\t\tcontainer.find('.js-list__row').each(function (i) {\n\t\t\tthisWidth = $(this).find('.js-list__field').first().width();\n\t\t\tif (i === 0) {\n\t\t\t\tmaxWidth = thisWidth;\n\t\t\t} else {\n\t\t\t\tthisWidth > maxWidth ? maxWidth = thisWidth : maxWidth;\n\t\t\t}\n\t\t});\n\t\treturn maxWidth;\n\t},\n\tgetDomParams: function (container) {\n\t\tthis.listColumnFirstWidth = container.find('.listViewEntriesDiv .listViewHeaders th').first().width();\n\t\tthis.listColumnSecondWidth = this.getSecondColMinWidth(container);\n\t\tthis.windowW = $(window).width();\n\t\tthis.mainBody = container.closest('.mainBody');\n\t\tthis.windowMinWidth = (15 / this.windowW) * 100;\n\t\tthis.windowMaxWidth = 100 - this.minWidth;\n\t\tthis.sideBlocks = container.find('.js-side-block');\n\t\tthis.sideBlockLeft = this.sideBlocks.first();\n\t\tthis.sideBlockRight = this.sideBlocks.last();\n\t\tthis.list = container.find('.js-list-preview');\n\t\tthis.preview = container.find('.js-detail-preview');\n\t\tthis.rotatedText = container.find('.u-rotate-90');\n\t\tthis.footerH = $('.js-footer').outerHeight();\n\t\tthis.headerH = $('.js-header').outerHeight();\n\t},\n\tgetDefaultSplitSizes: function () {\n\t\tlet thWidth = ((this.listColumnFirstWidth + this.listColumnSecondWidth + 82) / this.windowW) * 100;\n\t\treturn [thWidth, 100 - thWidth];\n\t},\n\tgetSplitSizes() {\n\t\tconst cachedParams = app.moduleCacheGet('userRelatedSplitSet');\n\t\tif (cachedParams !== null) {\n\t\t\treturn cachedParams;\n\t\t} else {\n\t\t\treturn this.getDefaultSplitSizes();\n\t\t}\n\t},\n\tregisterListPreviewEvents: function (container) {\n\t\tvar listPreview = container.find('.js-detail-preview');\n\t\tvar mainBody = container.closest('.mainBody');\n\t\tapp.showNewScrollbarTopBottom(container.find('.js-list-preview--scroll'));\n\t\tapp.showNewScrollbarLeft(this.list);\n\t\tlet listOffsetTop = this.list.offset().top - this.headerH;\n\t\tlet initialH = this.sideBlocks.height();\n\t\tlet mainViewPortHeightCss = {height: mainBody.height()};\n\t\tlet mainViewPortWidthCss = {width: mainBody.height()};\n\t\tthis.gutter.addClass('js-fixed-scroll');\n\t\tlet fixedElements = container.find('.js-fixed-scroll');\n\t\tif (!mainBody.length) {\n\t\t\tmainBody = $(top.document).find('.mainBody');\n\t\t\tthis.headerH = $(top.document).find('.js-header').outerHeight();\n\t\t\tlet iframe = $(top.document).find('.js-detail-preview');\n\t\t\tlistOffsetTop = this.list.offset().top + iframe.offset().top - this.headerH + 1;\n\t\t\tmainViewPortHeightCss = {height: mainBody.height()};\n\t\t\tmainViewPortWidthCss = {width: mainBody.height()};\n\t\t}\n\t\tthis.list.on('click', '.listViewEntries', () => {\n\t\t\tif (this.split.getSizes()[1] < 10) {\n\t\t\t\tconst defaultGutterPosition = this.getDefaultSplitSizes();\n\t\t\t\tthis.split.setSizes(defaultGutterPosition);\n\t\t\t\tlistPreview.show();\n\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', defaultGutterPosition);\n\t\t\t}\n\t\t});\n\t\tif (this.list.parents('.blockContent').length) {\n\t\t\treturn;\n\t\t}\n\t\tmainBody.on('scroll', () => {\n\t\t\tif (mainBody.scrollTop() >= listOffsetTop) {\n\t\t\t\tfixedElements.css({top: mainBody.scrollTop() - listOffsetTop});\n\t\t\t\tthis.sideBlocks.css({top: mainBody.scrollTop() - listOffsetTop + 56})\n\t\t\t\tfixedElements.css(mainViewPortHeightCss);\n\t\t\t\tthis.rotatedText.css(mainViewPortHeightCss);\n\t\t\t\tthis.rotatedText.css(mainViewPortWidthCss);\n\t\t\t} else {\n\t\t\t\tfixedElements.css({top: 'initial'});\n\t\t\t\tfixedElements.css({height: initialH + mainBody.scrollTop()})\n\t\t\t\tthis.rotatedText.css({\n\t\t\t\t\twidth: initialH + mainBody.scrollTop(),\n\t\t\t\t\theight: initialH + mainBody.scrollTop(),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Registers split's events.\n\t * @param {jQuery} container - current container for reference.\n\t * @param {Split} split - a split object.\n\t */\n\tregisterSplitEvents: function (container, split) {\n\t\tvar rightSplitMaxWidth = (400 / this.windowW) * 100;\n\t\tvar minWindowWidth = (23 / this.windowW) * 100;\n\t\tvar maxWindowWidth = 100 - minWindowWidth;\n\t\tvar listPreview = container.find('.js-detail-preview');\n\t\tthis.gutter.on(\"dblclick\", () => {\n\t\t\tlet gutterRelatedMidPosition = app.moduleCacheGet('gutterRelatedMidPosition');\n\t\t\tif (isNaN(this.split.getSizes()[0])) {\n\t\t\t\tthis.split.setSizes(gutterRelatedMidPosition);\n\t\t\t}\n\t\t\tif (split.getSizes()[0] < 7) {\n\t\t\t\tthis.gutter.removeClass('js-gutter-corr-left');\n\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\tthis.list.removeClass('u-hide-underneath');\n\t\t\t\tif (gutterRelatedMidPosition[0] > 11) {\n\t\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t\t} else {\n\t\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t\t}\n\t\t\t} else if (split.getSizes()[1] < 20) {\n\t\t\t\tif (gutterRelatedMidPosition[1] > rightSplitMaxWidth + 1) {\n\t\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t\t} else {\n\t\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t\t}\n\t\t\t\tthis.gutter.removeClass('js-gutter-corr-right');\n\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\tlistPreview.show();\n\t\t\t} else if (split.getSizes()[0] > 7 && split.getSizes()[0] < 50) {\n\t\t\t\tsplit.setSizes([minWindowWidth, maxWindowWidth]);\n\t\t\t\tthis.gutter.addClass('js-gutter-corr-left');\n\t\t\t\tthis.sideBlockLeft.addClass('d-block');\n\t\t\t\tthis.list.addClass('u-hide-underneath');\n\t\t\t} else if (split.getSizes()[1] > 10 && split.getSizes()[1] < 50) {\n\t\t\t\tsplit.setSizes([maxWindowWidth, minWindowWidth]);\n\t\t\t\tthis.gutter.addClass('js-gutter-corr-right');\n\t\t\t\tthis.sideBlockRight.addClass('d-block');\n\t\t\t\tlistPreview.hide();\n\t\t\t\t//this.list.width(this.list.width() - 10);\n\t\t\t}\n\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t});\n\t\tthis.sideBlockLeft.on(\"click\", () => {\n\t\t\tlet gutterRelatedMidPosition = app.moduleCacheGet('gutterRelatedMidPosition');\n\t\t\tif (gutterRelatedMidPosition[0] > 11) {\n\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t} else {\n\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t}\n\t\t\tthis.gutter.removeClass('js-gutter-corr-left');\n\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\tthis.list.removeClass('u-hide-underneath');\n\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t});\n\t\tthis.sideBlockRight.on(\"click\", () => {\n\t\t\tlet gutterRelatedMidPosition = app.moduleCacheGet('gutterRelatedMidPosition');\n\t\t\tif (gutterRelatedMidPosition[1] > rightSplitMaxWidth + 1) {\n\t\t\t\tsplit.setSizes(gutterRelatedMidPosition);\n\t\t\t} else {\n\t\t\t\tsplit.setSizes(this.getDefaultSplitSizes());\n\t\t\t}\n\t\t\tthis.gutter.removeClass('js-gutter-corr-right');\n\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\tlistPreview.show();\n\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t});\n\t},\n\tregisterSplit: function (container) {\n\t\tvar rightSplitMaxWidth = (400 / this.windowW) * 100;\n\t\tconst splitSizes = this.getSplitSizes();\n\t\tapp.moduleCacheSet('gutterRelatedMidPosition', splitSizes);\n\t\tvar split = Split([this.list[0], this.preview[0]], {\n\t\t\tsizes: splitSizes,\n\t\t\tminSize: 10,\n\t\t\tgutterSize: 24,\n\t\t\tsnapOffset: 100,\n\t\t\tonDrag: () => {\n\t\t\t\tif (split.getSizes()[1] < rightSplitMaxWidth) {\n\t\t\t\t\tsplit.collapse(1);\n\t\t\t\t}\n\t\t\t\tif (split.getSizes()[0] < 7) {\n\t\t\t\t\tthis.sideBlockLeft.addClass('d-block');\n\t\t\t\t\tthis.list.addClass('u-hide-underneath');\n\t\t\t\t} else {\n\t\t\t\t\tthis.gutter.removeClass('js-gutter-corr-left');\n\t\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\t\tthis.list.removeClass('u-hide-underneath');\n\t\t\t\t}\n\t\t\t\tif (split.getSizes()[1] < 10) {\n\t\t\t\t\tthis.sideBlockRight.addClass('d-block');\n\t\t\t\t\tthis.preview.hide();\n\t\t\t\t\tthis.list.width(this.list.width() - 10);\n\t\t\t\t} else {\n\t\t\t\t\tthis.gutter.removeClass('js-gutter-corr-right');\n\t\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\t\tthis.preview.show();\n\t\t\t\t}\n\t\t\t\tif (split.getSizes()[0] > 10 && split.getSizes()[1] > rightSplitMaxWidth) {\n\t\t\t\t\tapp.moduleCacheSet('gutterRelatedMidPosition', split.getSizes());\n\t\t\t\t}\n\t\t\t\tapp.moduleCacheSet('userRelatedSplitSet', split.getSizes());\n\t\t\t}\n\t\t});\n\t\tthis.gutter = container.find('.gutter');\n\t\tif (splitSizes[0] < 10) {\n\t\t\tthis.gutter.addClass('js-gutter-corr-left');\n\t\t\tthis.sideBlockLeft.addClass('d-block');\n\t\t\tthis.list.addClass('u-hide-underneath');\n\t\t} else if (splitSizes[1] < rightSplitMaxWidth) {\n\t\t\tthis.gutter.addClass('js-gutter-corr-right');\n\t\t\tthis.sideBlockRight.addClass('d-block');\n\t\t\tthis.preview.hide();\n\t\t}\n\t\tvar mainWindowHeightCss = {height: $(window).height() - this.list.offset().top - this.footerH};\n\t\tif (!container.closest('.mainBody').length) {\n\t\t\tlet mainBody = $(top.document).find('.mainBody').height();\n\t\t\tlet iframe = $(top.document).find('.js-detail-preview');\n\t\t\tmainWindowHeightCss = {height: mainBody - this.list.offset().top - iframe.offset().top + 50};\n\t\t}\n\t\tif (!this.list.parents('.blockContent').length) {\n\t\t\tthis.gutter.css(mainWindowHeightCss);\n\t\t\tthis.list.css(mainWindowHeightCss);\n\t\t\tthis.sideBlocks.css(mainWindowHeightCss);\n\t\t\tthis.rotatedText.css({\n\t\t\t\twidth: this.sideBlockLeft.height(),\n\t\t\t\theight: this.sideBlockLeft.height()\n\t\t\t});\n\t\t}\n\t\tthis.registerSplitEvents(container, split);\n\t\treturn split;\n\t},\n\ttoggleSplit: function (container) {\n\t\tvar commactHeight = container.closest('.commonActionsContainer').height();\n\t\tvar splitsArray = [];\n\t\tthis.split = this.registerSplit(container);\n\t\tsplitsArray.push(this.split);\n\t\t$(window).on('resize', () => {\n\t\t\tif ($(window).width() < 993) {\n\t\t\t\tif (container.find('.gutter').length) {\n\t\t\t\t\tsplitsArray[splitsArray.length - 1].destroy();\n\t\t\t\t\tthis.sideBlockRight.removeClass('d-block');\n\t\t\t\t\tthis.sideBlockLeft.removeClass('d-block');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (container.find('.gutter').length !== 1) {\n\t\t\t\t\tthis.split = this.registerSplit(container);\n\t\t\t\t\tvar gutter = container.find('.gutter');\n\t\t\t\t\tif (this.mainBody.scrollTop() >= (this.list.offset().top + commactHeight)) {\n\t\t\t\t\t\tgutter.addClass('gutterOnScroll');\n\t\t\t\t\t\tgutter.css('left', this.preview.offset().left - 8);\n\t\t\t\t\t\tgutter.on('mousedown', function () {\n\t\t\t\t\t\t\t$(this).on('mousemove', function (e) {\n\t\t\t\t\t\t\t\t$(this).css('left', this.preview.offset().left - 8);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsplitsArray.push(this.split);\n\t\t\t\t}\n\t\t\t\tvar currentSplit = splitsArray[splitsArray.length - 1];\n\t\t\t\tvar minWidth = (15 / $(window).width()) * 100;\n\t\t\t\tvar maxWidth = 100 - minWidth;\n\t\t\t\tif (typeof currentSplit === \"undefined\")\n\t\t\t\t\treturn;\n\t\t\t\tif (currentSplit.getSizes()[0] < minWidth + 5) {\n\t\t\t\t\tcurrentSplit.setSizes([minWidth, maxWidth]);\n\t\t\t\t} else if (currentSplit.getSizes()[1] < minWidth + 5) {\n\t\t\t\t\tcurrentSplit.setSizes([maxWidth, minWidth]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tregisterListScroll: function () {\n\t\tlet container = $('.listViewEntriesDiv');\n\t\tif (this.relatedView !== 'ListPreview') {\n\t\t\tapp.showNewScrollbarTopBottomRight(container);\n\t\t}\n\t},\n\tregisterRelatedEvents: function () {\n\t\tvar relatedContainer = this.getRelatedContainer();\n\t\tthis.registerUnreviewedCountEvent();\n\t\tthis.registerChangeEntityStateEvent();\n\t\tthis.registerPaginationEvents();\n\t\tthis.registerListEvents();\n\t\tthis.registerPostLoadEvents();\n\t\tthis.registerSummationEvent();\n\t},\n})\n"],"names":["jQuery","Class","getInstance","parentId","parentModule","selectedRelatedTabElement","relatedModuleName","app","getModuleName","fallbackClassName","Vtiger_RelatedList_Js","moduleClassName","parentRecordId","instance","parentModuleName","moduleName","relatedTabsContainer","closest","content","$","relatedView","find","val","triggerMassAction","massActionUrl","type","Vtiger_List_Js","validationResult","listInstance","checkListRecordSelected","progressIndicator","selectedIds","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","listViewInstance","getListSearchInstance","getAlphabetSearchValue","search_params","JSON","stringify","getListSearchParams","length","getAlphabetSearchField","searchValue","form","append","name","csrfMagicName","value","csrfMagicToken","each","k","v","submit","progressIndicatorElement","request","done","responseData","result","notify","Vtiger_Helper_Js","showMessage","reloadList","Vtiger_Detail_Js","reloadRelatedList","procesStop","fail","noRecordSelectedAlert","listSearchInstance","detailViewContentHolder","frameProgress","setSelectedTabElement","tabElement","getSelectedTabElement","getParentId","getRelatedContainer","setRelatedContainer","container","getContentHolder","getCurrentPageNum","setCurrentPageNumber","pageNumber","getOrderBy","getSortOrder","getCompleteParams","params","view","module","record","relatedModule","sortorder","orderby","page","mode","data","switchBtn","time","first","prop","loadRelatedList","Deferred","thisInstance","loadWidgets","aDeferred","promise","position","blockInfo","enabled","completeParams","activeTabsReference","extend","currentInstance","progressInstance","removeClass","addClass","html","tooltip","registerPostLoadEvents","registerListEvents","registerBasicEvents","resolve","textStatus","errorThrown","reject","triggerDisplayTypeEvent","cacheGet","widthType","elements","attr","showSelectRelation","extendParams","getRecordsListParams","showRecordsList","modal","setSelectEvent","addRelations","Object","keys","event","trigger","detail","registerRelatedModulesRecordCount","src_module","src_record","multi_select","idList","action","related_module","related_record_list","isArray","deleteRelation","relatedIdList","sortHandler","headerElement","sortOrderVal","nextPageHandler","pageLimit","noOfEntries","nextPage","parseInt","previousPageHandler","previousPage","selectPageHandler","pageJumpHandler","e","which","currentTarget","response","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","element","validationEngine","preventDefault","totalPages","text","jumpToPage","vtranslate","error","parent","currentPage","message","addRelatedRecord","callback","referenceModuleName","quickCreateParams","relatedParams","relatedField","fullFormUrl","preQuickCreateSave","queryParam","queryParamComponents","indexOf","split","queryString","urlSplit","queryParameters","index","appendTo","inArray","eliminatedKeys","Vtiger_Header_Js","quickCreateModule","getRelatedPageCount","totalCountElem","totalPageNumber","AppConnector","numberOfRecords","pageCount","favoritesRelation","relcrmId","state","relcrmid","actionMode","updatePreview","url","getMainParams","defaultView","frame","replace","registerUnreviewedCountEvent","relatedContent","isUnreviewedActive","id","ids","push","sourceModule","recordsId","appData","a","m","registerChangeEntityStateEvent","on","registerRowsEvent","target","is","getViewName","top","document","location","href","row","inventoryRow","next","hasClass","toggleClass","contains","get","recordUrl","registerSummationEvent","calculateValue","button","hidePopover","success","progress","registerPreviewEvent","contentHeight","height","getScreenHeight","offset","contents","registerPaginationEvents","stopImmediatePropagation","showPnotify","window","restrictionsField","search_key","key","search_value","showConfirmationBox","widget","loadWidget","updatesWidget","showPopoverElementView","registerListScroll","getDomParams","toggleSplit","registerListPreviewEvents","YetiForce_ListSearch_Js","getSecondColMinWidth","thisWidth","i","width","maxWidth","listColumnFirstWidth","listColumnSecondWidth","windowW","mainBody","windowMinWidth","windowMaxWidth","minWidth","sideBlocks","sideBlockLeft","sideBlockRight","last","list","preview","rotatedText","footerH","outerHeight","headerH","getDefaultSplitSizes","thWidth","getSplitSizes","moduleCacheGet","cachedParams","listPreview","showNewScrollbarTopBottom","showNewScrollbarLeft","initialH","mainViewPortHeightCss","mainViewPortWidthCss","gutter","listOffsetTop","iframe","getSizes","setSizes","defaultGutterPosition","show","moduleCacheSet","parents","scrollTop","fixedElements","css","registerSplitEvents","rightSplitMaxWidth","minWindowWidth","maxWindowWidth","isNaN","gutterRelatedMidPosition","hide","registerSplit","splitSizes","Split","sizes","minSize","gutterSize","snapOffset","onDrag","collapse","mainWindowHeightCss","commactHeight","splitsArray","destroy","left","currentSplit","showNewScrollbarTopBottomRight","registerRelatedEvents"],"mappings":"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"}