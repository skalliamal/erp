{"version":3,"file":"GenerateModal.min.js","sources":["GenerateModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Vtiger_GenerateModal_Js\", {}, {\n\tregisterGenetateButton: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('button.js-genetate-button').on('click', function (e) {\n\t\t\tdocument.progressLoader = jQuery.progressIndicator({\n\t\t\t\tmessage: app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tvar actionUrl = currentTarget.data('url');\n\t\t\tvar method = jQuery('[name=\"method\"]:checked');\n\t\t\tif (method.length <= 0) {\n\t\t\t\twindow.location.href = actionUrl;\n\t\t\t} else {\n\t\t\t\tvar params = {};\n\t\t\t\tparams.data = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\taction: 'GenerateRecords',\n\t\t\t\t\trecords: jQuery('[name=\"all_records\"]').val(),\n\t\t\t\t\ttemplate: currentTarget.data('id'),\n\t\t\t\t\ttarget: currentTarget.data('name'),\n\t\t\t\t\tmethod: method.val()\n\t\t\t\t};\n\t\t\t\tparams.dataType = 'json';\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tvar response = data['result'];\n\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\tvar records = response.ok;\n\t\t\t\t\t\tthisInstance.summary(container, response);\n\t\t\t\t\t\tdocument.progressLoader.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\tif (method.val() == 1) {\n\t\t\t\t\t\t\tfor (var i in records) {\n\t\t\t\t\t\t\t\tvar win = window.open(actionUrl + records[i], '_blank');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).fail(function (data, err) {\n\t\t\t\t\tapp.errorLog(data, err);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tsummary: function (container, data) {\n\t\tcontainer.find('.modal-title').text(app.vtranslate('JS_SUMMARY'));\n\t\tcontainer.find('.modal-body').html('<div>' + app.vtranslate('JS_SELECTED_RECORDS') + ': <strong>' + data.all + '</strong></div>\\n\\\n\t\t\t\t\t\t\t\t\t<div>' + app.vtranslate('JS_SUCCESSFULLY_PERFORMED_ACTION_FOR') + ': <strong>' + data.ok.length + '</strong></div>\\n\\\n\t\t\t\t\t\t\t\t\t<div>' + app.vtranslate('JS_ACTION_FAILED_FOR') + ': <strong>' + data.fail.length + '</strong></div>');\n\t},\n\tregisterEvents: function () {\n\t\tvar container = jQuery('.generateMappingModal');\n\t\tapp.showPopoverElementView(container.find('.js-popover-tooltip'));\n\t\tthis.registerGenetateButton(container);\n\t}\n\n});\n\njQuery(document).ready(function (e) {\n\tvar instance = new Vtiger_GenerateModal_Js();\n\tinstance.registerEvents();\n})\n"],"names":["jQuery","Class","registerGenetateButton","container","find","on","e","document","progressLoader","progressIndicator","message","app","vtranslate","position","blockInfo","enabled","currentTarget","actionUrl","data","method","length","window","location","href","params","module","getModuleName","action","records","val","template","target","dataType","AppConnector","request","done","response","ok","thisInstance","summary","open","i","fail","err","errorLog","text","html","all","registerEvents","showPopoverElementView","ready","instance"],"mappings":";;AAGAA,OAAOC,KAAP,CAAa,yBAAb,CAAwC,EAAxC,CAA4C,CAC3CC,uBAAwB,WAAUC,CAAV,CAAqB,CAC5C,MAAmB,IAAnB,CACAA,EAAUC,IAAV,CAAe,2BAAf,EAA4CC,EAA5C,CAA+C,OAA/C,CAAwD,SAAUC,CAAV,CAAa,CACpEC,SAASC,cAAT,CAA0BR,OAAOS,iBAAP,CAAyB,CAClDC,QAASC,IAAIC,UAAJ,CAAe,wBAAf,CADyC,CAElDC,SAAU,MAFwC,CAGlDC,UAAW,CACVC,UADU,CAHuC,CAAzB,CAD0C,OAQhDf,OAAOM,EAAEU,aAAT,CARgD,CAShEC,EAAYD,EAAcE,IAAd,CAAmB,KAAnB,CAToD,CAUhEC,EAASnB,OAAO,yBAAP,CAVuD,CAWpE,GAAqB,CAAjB,IAAOoB,MAAX,CACCC,OAAOC,QAAP,CAAgBC,IAAhB,CAAuBN,CADxB,KAEO,CACN,MAAa,EAAb,CACAO,EAAON,IAAP,CAAc,CACbO,OAAQd,IAAIe,aAAJ,EADK,CAEbC,OAAQ,iBAFK,CAGbC,QAAS5B,OAAO,sBAAP,EAA+B6B,GAA/B,EAHI,CAIbC,SAAUd,EAAcE,IAAd,CAAmB,IAAnB,CAJG,CAKba,OAAQf,EAAcE,IAAd,CAAmB,MAAnB,CALK,CAMbC,OAAQA,EAAOU,GAAP,EANK,CAFR,CAUNL,EAAOQ,QAAP,CAAkB,MAVZ,CAWNC,aAAaC,OAAb,CAAqBV,CAArB,EAA6BW,IAA7B,CAAkC,SAAUjB,CAAV,CAAgB,CACjD,MAAeA,QAAf,CACA,GAAIA,SAAJ,CAAqB,CACpB,MAAckB,EAASC,EAAvB,CAGA,GAFAC,EAAaC,OAAb,CAAqBpC,CAArB,CAAgCiC,CAAhC,CAEA,CADA7B,SAASC,cAAT,CAAwBC,iBAAxB,CAA0C,CAAC,KAAQ,MAAT,CAA1C,CACA,CAAoB,CAAhB,IAAOoB,GAAP,EAAJ,CACC,IAAK,KAAL,KAAA,CACWR,OAAOmB,IAAP,CAAYvB,EAAYW,EAAQa,CAAR,CAAxB,CAAoC,QAApC,EAGZ,CACD,CAZD,EAYGC,IAZH,CAYQ,SAAUxB,CAAV,CAAgByB,CAAhB,CAAqB,CAC5BhC,IAAIiC,QAAJ,CAAa1B,CAAb,CAAmByB,CAAnB,EACA,CAdD,EAeA,CACD,CAxCD,EAyCA,CA5C0C,CA6C3CJ,QAAS,WAAUpC,CAAV,CAAqBe,CAArB,CAA2B,CACnCf,EAAUC,IAAV,CAAe,cAAf,EAA+ByC,IAA/B,CAAoClC,IAAIC,UAAJ,CAAe,YAAf,CAApC,CADmC,CAEnCT,EAAUC,IAAV,CAAe,aAAf,EAA8B0C,IAA9B,CAAmC,QAAUnC,IAAIC,UAAJ,CAAe,qBAAf,CAAV,CAAkD,YAAlD,CAAiEM,EAAK6B,GAAtE,CAA4E,0CAA5E,CACnBpC,IAAIC,UAAJ,CAAe,sCAAf,CADmB,CACsC,YADtC,CACqDM,EAAKmB,EAAL,CAAQjB,MAD7D,CACsE,0CADtE,CAEnBT,IAAIC,UAAJ,CAAe,sBAAf,CAFmB,CAEsB,YAFtB,CAEqCM,EAAKwB,IAAL,CAAUtB,MAF/C,CAEwD,iBAF3F,EAGA,CAlD0C,CAmD3C4B,eAAgB,YAAY,CAC3B,MAAgBhD,OAAO,uBAAP,CAAhB,CACAW,IAAIsC,sBAAJ,CAA2B9C,EAAUC,IAAV,CAAe,qBAAf,CAA3B,CAF2B,CAG3B,KAAKF,sBAAL,CAA4BC,CAA5B,EACA,CAvD0C,CAA5C,EA2DAH,OAAOO,QAAP,EAAiB2C,KAAjB,CAAuB,UAAa,CACnC,MAAe,2BAAf,CACAC,EAASH,cAAT,GACA,CAHD"}