{"version":3,"file":"TreeModal.min.js","sources":["TreeModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\"Base_TreeModal_JS\", {}, {\n\t/**\n\t * Event for select row\n\t */\n\tselectEvent: false,\n\t/**\n\t * Modal container\n\t */\n\tcontainer: false,\n\t/**\n\t * Jstree element\n\t */\n\ttree: false,\n\t/**\n\t * Multiple selection\n\t */\n\tmultiple: false,\n\t/**\n\t * Set event for select row\n\t * @param {function} cb\n\t */\n\tsetSelectEvent: function (cb) {\n\t\tthis.selectEvent = cb;\n\t},\n\t/**\n\t * Generate tree\n\t */\n\tgenerateTree: function () {\n\t\tlet plugins = [];\n\t\tif (this.multiple) {\n\t\t\tplugins.push('category');\n\t\t\tplugins.push('checkbox');\n\t\t}\n\t\tplugins.push('search');\n\t\tthis.tree.jstree($.extend(true, {\n\t\t\tcore: {\n\t\t\t\tdata: JSON.parse(this.container.find('.js-tree-value').val()),\n\t\t\t\tthemes: {\n\t\t\t\t\tname: 'proton',\n\t\t\t\t\tresponsive: true\n\t\t\t\t}\n\t\t\t},\n\t\t\tcheckbox: {\n\t\t\t\tthree_state: false,\n\t\t\t},\n\t\t\tplugins: plugins\n\t\t}, this.tree.data('params')))\n\t},\n\t/**\n\t * Register select events\n\t */\n\tregisterSelectEvent: function () {\n\t\tif (this.multiple) {\n\t\t\tthis.container.find('[name=\"saveButton\"]').on('click', () => {\n\t\t\t\tlet id = [], name = [];\n\t\t\t\t$.each(this.tree.jstree(\"getCategory\", true), function (index, value) {\n\t\t\t\t\tid.push('T' + value.id);\n\t\t\t\t\tname.push(value.text);\n\t\t\t\t});\n\t\t\t\tthis.selectEvent({id: id.join(), name: name.join(\", \")});\n\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t});\n\t\t} else {\n\t\t\tthis.tree.on('select_node.jstree', (event, data) => {\n\t\t\t\tthis.selectEvent({id: 'T' + data.node.id, name: data.node.text});\n\t\t\t\tapp.hideModalWindow(false, this.container.parent().attr('id'));\n\t\t\t});\n\t\t}\n\t},\n\tregisterSearchEvent: function () {\n\t\tconst thisInstance = this;\n\t\tlet valueSearch = this.container.find('#valueSearchTree');\n\t\tvalueSearch.on('keypress', function (e) {\n\t\t\tif (e.which == 13) {\n\t\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t\t}\n\t\t});\n\t\tthis.container.find('#btnSearchTree').on('click', function () {\n\t\t\tthisInstance.searchingInTree(valueSearch.val());\n\t\t});\n\t},\n\tsearchingInTree: function (text) {\n\t\tthis.tree.jstree(true).search(text);\n\t},\n\t/**\n\t * Register base events\n\t * @param {jQuery} modalContainer\n\t */\n\tregisterEvents: function (modalContainer) {\n\t\tthis.container = modalContainer;\n\t\tthis.tree = this.container.find('.js-tree-contents');\n\t\tthis.multiple = this.container.find('.js-multiple').val() == 1 ? true : false;\n\t\tthis.generateTree();\n\t\tthis.registerSearchEvent();\n\t\tthis.registerSelectEvent();\n\t}\n});\n"],"names":["$","Class","selectEvent","container","tree","multiple","setSelectEvent","cb","generateTree","plugins","push","jstree","extend","core","data","JSON","parse","find","val","themes","name","responsive","checkbox","three_state","registerSelectEvent","on","each","index","value","id","text","join","app","hideModalWindow","parent","attr","event","node","registerSearchEvent","valueSearch","e","which","thisInstance","searchingInTree","search","registerEvents","modalContainer"],"mappings":"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"}