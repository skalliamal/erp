{"version":3,"file":"DashBoard.min.js","sources":["DashBoard.js"],"sourcesContent":["/*+**********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.1\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n ************************************************************************************/\n'use strict';\n\n$.Class(\"Vtiger_DashBoard_Js\", {\n\tgrid: false,\n\t//static property which will store the instance of dashboard\n\tcurrentInstance: false,\n\taddWidget: function (element, url) {\n\t\telement = $(element);\n\t\tvar linkId = element.data('linkid');\n\t\tvar name = element.data('name');\n\t\tvar widgetId = element.data('id');\n\t\t$(element).parent().remove();\n\t\tif ($('ul.widgetsList li').length < 1) {\n\t\t\t$('ul.widgetsList').prev('button').css('visibility', 'hidden');\n\t\t}\n\t\tvar widgetContainer = $('<div><div id=\"' + linkId + '-' + widgetId + '\" data-name=\"' + name + '\" data-mode=\"open\" class=\"grid-stack-item-content dashboardWidget new\"></div></div>');\n\t\twidgetContainer.find('.dashboardWidget').data('url', url);\n\t\tvar width = element.data('width');\n\t\tvar height = element.data('height');\n\t\tVtiger_DashBoard_Js.grid.addWidget(widgetContainer,0, 0, width, height);\n\t\tVtiger_DashBoard_Js.currentInstance.loadWidget(widgetContainer.find('.grid-stack-item-content'));\n\t},\n\trestrictContentDrag: function (container) {\n\t\tcontainer.on('mousedown.draggable', function (e) {\n\t\t\tvar element = $(e.target);\n\t\t\tvar isHeaderElement = element.closest('.dashboardWidgetHeader').length > 0 ? true : false;\n\t\t\tif (isHeaderElement) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//Stop the event propagation so that drag will not start for contents\n\t\t\te.stopPropagation();\n\t\t});\n\t},\n}, {\n\tcontainer: false,\n\tnoCache: false,\n\tinstancesCache: {},\n\tinit: function () {\n\t\tVtiger_DashBoard_Js.currentInstance = this;\n\t},\n\tgetContainer: function () {\n\t\tif (this.noCache == true || this.container == false) {\n\n\t\t\tthis.container = $('.grid-stack');\n\t\t}\n\t\treturn this.container;\n\t},\n\tgetCurrentDashboard: function () {\n\t\treturn $('.selectDashboard li a.active').closest('li').data('id');\n\t},\n\tgetWidgetInstance: function (widgetContainer) {\n\t\tvar id = widgetContainer.attr('id');\n\t\tif (this.noCache || !(id in this.instancesCache)) {\n\t\t\tvar widgetName = widgetContainer.data('name');\n\t\t\tthis.instancesCache[id] = Vtiger_Widget_Js.getInstance(widgetContainer, widgetName);\n\t\t}\n\t\treturn this.instancesCache[id];\n\t},\n\tregisterGrid: function () {\n\t\tconst thisInstance = this;\n\t\tVtiger_DashBoard_Js.grid = this.getContainer().gridstack({\n\t\t\tverticalMargin: '0.5rem',\n\t\t\talwaysShowResizeHandle: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),\n\t\t}).data('gridstack');\n\t\t$('.grid-stack').on('change', function (event, ui) {\n\t\t\tthisInstance.savePositions($('.grid-stack-item'));\n\t\t});\n\t\t// load widgets after grid initialization to prevent too early lazy loading - visible viewport changes\n\t\tthis.loadWidgets();\n\t\t// recalculate positions with scrollbars\n\t\tif (this.getContainer().width() !== this.getContainer().parent().width()) {\n\t\t\tconst parentWidth = thisInstance.getContainer().parent().width();\n\t\t\tthis.getContainer().css('width', parentWidth + 'px');\n\t\t}\n\t},\n\tsavePositions: function (widgets) {\n\t\tvar widgetRowColPositions = {},\n\t\t\twidgetSizes = {};\n\t\tfor (var index = 0, len = widgets.length; index < len; ++index) {\n\t\t\tvar widget = $(widgets[index]);\n\t\t\twidgetRowColPositions[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\trow: widget.attr('data-gs-y'),\n\t\t\t\tcol: widget.attr('data-gs-x')\n\t\t\t});\n\t\t\twidgetSizes[widget.find('.grid-stack-item-content').attr('id')] = JSON.stringify({\n\t\t\t\twidth: widget.attr('data-gs-width'),\n\t\t\t\theight: widget.attr('data-gs-height')\n\t\t\t});\n\t\t}\n\t\tthis.updateLazyWidget();\n\t\tAppConnector.request({\n\t\t\tmodule: app.getModuleName(),\n\t\t\taction: 'SaveWidgetPositions',\n\t\t\tposition: widgetRowColPositions,\n\t\t\tsize: widgetSizes\n\t\t});\n\t},\n\tupdateLazyWidget() {\n\t\tconst scrollTop = $('.mainBody').scrollTop();\n\t\t$('.mainBody').scrollTop(scrollTop + 1).scrollTop(scrollTop);\n\t},\n\tloadWidgets: function () {\n\t\tconst thisInstance = this;\n\t\tthisInstance.getContainer().find('.dashboardWidget').Lazy({\n\t\t\tthreshold: 0,\n\t\t\tappendScroll: $('.mainBody'),\n\t\t\twidgetLoader(element) {\n\t\t\t\tthisInstance.loadWidget(element);\n\t\t\t},\n\t\t});\n\t\tthis.updateLazyWidget();\n\t},\n\tloadWidget: function (widgetContainer) {\n\t\tvar thisInstance = this;\n\t\tvar urlParams = widgetContainer.data('url');\n\t\tvar mode = widgetContainer.data('mode');\n\t\twidgetContainer.progressIndicator();\n\t\tif (mode === 'open') {\n\t\t\tvar name = widgetContainer.data('name');\n\t\t\tvar cache = widgetContainer.data('cache');\n\t\t\tvar userId = CONFIG.userId;\n\t\t\tif (cache === 1) {\n\t\t\t\tvar cecheUrl = app.cacheGet(name + userId, false);\n\t\t\t\turlParams = cecheUrl ? cecheUrl : urlParams;\n\t\t\t}\n\t\t\tAppConnector.request(urlParams).done(function (data) {\n\t\t\t\twidgetContainer.html(data);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(widgetContainer.find('.select2'));\n\t\t\t\tthisInstance.getWidgetInstance(widgetContainer);\n\t\t\t\twidgetContainer.trigger(Vtiger_Widget_Js.widgetPostLoadEvent);\n\t\t\t\tconst headerHeight = widgetContainer.find('.dashboardWidgetHeader').outerHeight();\n\t\t\t\tlet adjustedHeight = widgetContainer.height() - headerHeight;\n\t\t\t\tif (widgetContainer.find('.dashboardWidgetFooter').length) {\n\t\t\t\t\tadjustedHeight -= widgetContainer.find('.dashboardWidgetFooter').outerHeight();\n\t\t\t\t}\n\t\t\t\tconst widgetContent = widgetContainer.find('.dashboardWidgetContent');\n\t\t\t\twidgetContent.css('max-height', adjustedHeight + 'px');\n\t\t\t\tapp.showNewScrollbar(widgetContent, {wheelPropagation: true});\n\t\t\t});\n\t\t}\n\t},\n\tregisterRefreshWidget: function () {\n\t\tvar thisInstance = this;\n\t\tthis.getContainer().on('click', 'a[name=\"drefresh\"]', function (e) {\n\t\t\tvar element = $(e.currentTarget);\n\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\tvar widgetInstnace = thisInstance.getWidgetInstance(parent);\n\t\t\twidgetInstnace.refreshWidget();\n\t\t\treturn;\n\t\t});\n\t},\n\tremoveWidget: function () {\n\t\tconst thisInstance = this;\n\t\tthis.getContainer().on('click', '.grid-stack-item a[name=\"dclose\"]', function (e) {\n\t\t\tvar element = $(e.currentTarget);\n\t\t\tvar listItem = $(element).parents('.grid-stack-item');\n\t\t\tvar width = listItem.attr('data-sizex');\n\t\t\tvar height = listItem.attr('data-sizey');\n\n\t\t\tvar url = element.data('url');\n\t\t\tvar parent = element.closest('.dashboardWidgetHeader').parent();\n\t\t\tvar widgetName = parent.data('name');\n\t\t\tvar widgetTitle = parent.find('.dashboardTitle').attr('title');\n\n\t\t\tvar message = app.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET') + \" [\" + widgetTitle + \"]. \" + app.vtranslate('JS_ARE_YOU_SURE_TO_DELETE_WIDGET_INFO');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\tAppConnector.request(url).done(function (response) {\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\tvar nonReversableWidgets = [];\n\t\t\t\t\t\tparent.fadeOut('slow', function () {\n\t\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif ($.inArray(widgetName, nonReversableWidgets) == -1) {\n\t\t\t\t\t\t\tVtiger_DashBoard_Js.grid.removeWidget(element.closest('.grid-stack-item'));\n\t\t\t\t\t\t\t$('.widgetsList').prev('button').css('visibility', 'visible');\n\t\t\t\t\t\t\tvar data = '<li class=\"d-flex flex-row-reverse align-items-center\">';\n\t\t\t\t\t\t\tif (response.result.deleteFromList) {\n\t\t\t\t\t\t\t\tdata += '<button ';\n\t\t\t\t\t\t\t\tdata += 'data-widget-id=\"' + response.result.id + '\" ';\n\t\t\t\t\t\t\t\tdata += 'class=\"removeWidgetFromList btn btn-danger btn-sm m-1 p-1\" '\n\t\t\t\t\t\t\t\tdata += '>'\n\t\t\t\t\t\t\t\tdata += '<span class=\"fas fa-trash-alt\"></span>';\n\t\t\t\t\t\t\t\tdata += '</button>';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdata += '<a onclick=\"Vtiger_DashBoard_Js.addWidget(this, \\'' + response.result.url + '\\')\" ';\n\t\t\t\t\t\t\tdata += 'href=\"javascript:void(0);\" ';\n\t\t\t\t\t\t\tdata += 'class=\"dropdown-item pl-1\" ';\n\t\t\t\t\t\t\tdata += 'data-linkid=\"' + response.result.linkid + '\" ';\n\t\t\t\t\t\t\tdata += 'data-name=\"' + response.result.name + '\" ';\n\t\t\t\t\t\t\tdata += 'data-width=\"' + width + '\" ';\n\t\t\t\t\t\t\tdata += 'data-height=\"' + height + '\" ';\n\t\t\t\t\t\t\tdata += '>';\n\t\t\t\t\t\t\tdata += response.result.title + '</a>';\n\t\t\t\t\t\t\tdata += '</li>';\n\t\t\t\t\t\t\tvar divider = $('.widgetsList .dropdown-divider');\n\t\t\t\t\t\t\tif (divider.length) {\n\t\t\t\t\t\t\t\t$(data).insertBefore(divider);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$('.widgetsList').append(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).fail(function (error, err) {\n\t\t\t});\n\t\t});\n\t},\n\tregisterSelectDashboard: function () {\n\t\tvar thisInstance = this;\n\t\t$('.selectDashboard li').on('click', function (e) {\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar dashboardId = currentTarget.data('id');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tview: app.getViewName(),\n\t\t\t\tdashboardId: dashboardId\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\tthisInstance.noCache = true;\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t});\n\t\t});\n\t},\n\tregisterDatePickerHideInitiater: function () {\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', 'input.dateRange', function (e) {\n\t\t\tvar widgetContainer = $(e.currentTarget).closest('.dashboardWidget');\n\t\t\tvar dashboardWidgetHeader = $('.dashboardWidgetHeader', widgetContainer);\n\n\t\t\tvar callbackFunction = function () {\n\t\t\t\tvar date = $('.dateRange');\n\t\t\t\tdate.DatePickerHide();\n\t\t\t\tdate.blur();\n\t\t\t};\n\t\t\t//adding clickoutside event on the dashboardWidgetHeader\n\t\t\tVtiger_Helper_Js.addClickOutSideEvent(dashboardWidgetHeader.find('.dateRange'), callbackFunction);\n\t\t\treturn false;\n\t\t});\n\t},\n\tregisterShowMailBody: function () {\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.showMailBody', function (e) {\n\t\t\tvar widgetContainer = $(e.currentTarget).closest('.mailRow');\n\t\t\tvar mailBody = widgetContainer.find('.mailBody');\n\t\t\tvar bodyIcon = $(e.currentTarget).find('.body-icon');\n\t\t\tif (mailBody.css(\"display\") == 'none') {\n\t\t\t\tmailBody.show();\n\t\t\t\tbodyIcon.removeClass(\"fa-chevron-down\").addClass(\"fa-chevron-up\");\n\t\t\t} else {\n\t\t\t\tmailBody.hide();\n\t\t\t\tbodyIcon.removeClass(\"fa-chevron-up\").addClass(\"fa-chevron-down\");\n\t\t\t}\n\t\t});\n\t},\n\tregisterChangeMailUser: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\n\t\tcontainer.on('change', '#mailUserList', function (e) {\n\t\t\tvar element = $(e.currentTarget);\n\t\t\tvar parent = element.closest('.dashboardWidget');\n\t\t\tvar contentContainer = parent.find('.dashboardWidgetContent');\n\t\t\tvar optionSelected = $(\"option:selected\", this);\n\t\t\tvar url = parent.data('url') + '&user=' + optionSelected.val();\n\n\t\t\tvar params = {};\n\t\t\tparams.url = url;\n\t\t\tparams.data = {};\n\t\t\tcontentContainer.progressIndicator({});\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tcontentContainer.progressIndicator({'mode': 'hide'});\n\t\t\t\tparent.html(data).trigger(Vtiger_Widget_Js.widgetPostRefereshEvent);\n\t\t\t}).fail(function () {\n\t\t\t\tcontentContainer.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tregisterChartFilterWidget: function () {\n\t\tvar thisInstance = this;\n\t\t$('.dashboardHeading').off('click', '.addChartFilter').on('click', '.addChartFilter', function (e) {\n\t\t\tvar element = $(e.currentTarget);\n\t\t\tvar fieldTypeToGroup = ['currency', 'double', 'percentage', 'integer'];\n\t\t\tapp.showModalWindow(null, \"index.php?module=Home&view=ChartFilter&step=step1\", function (wizardContainer) {\n\t\t\t\tvar form = $('form', wizardContainer);\n\t\t\t\tform.on(\"keypress\", function (event) {\n\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t});\n\t\t\t\tvar sectorContainer = form.find('.sectorContainer');\n\t\t\t\tvar chartType = $('select[name=\"chartType\"]', wizardContainer);\n\t\t\t\tvar moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(sectorContainer.find('.select2'));\n\t\t\t\tvar moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t});\n\t\t\t\tvar step1 = $('.step1', wizardContainer);\n\t\t\t\tvar step2 = $('.step2', wizardContainer);\n\t\t\t\tvar step3 = $('.step3', wizardContainer);\n\t\t\t\tvar footer = $('.modal-footer', wizardContainer);\n\t\t\t\tstep2.remove();\n\t\t\t\tstep3.remove();\n\t\t\t\tfooter.hide();\n\t\t\t\tchartType.on('change', function (e) {\n\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\tvar value = currentTarget.val();\n\t\t\t\t\tif (value == 'Barchat' || value == 'Horizontal') {\n\t\t\t\t\t\tform.find('.isColorContainer').removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tform.find('.isColorContainer').addClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tif (wizardContainer.find('#widgetStep').val() == 4) {\n\t\t\t\t\t\twizardContainer.find('.step3 .groupField').trigger('change');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\tif (!moduleNameSelect2.val())\n\t\t\t\t\t\treturn;\n\t\t\t\t\tfooter.hide();\n\t\t\t\t\twizardContainer.find('.step2').remove();\n\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t}).done(function (step2Response) {\n\t\t\t\t\t\tstep1.after(step2Response);\n\t\t\t\t\t\twizardContainer.find('#widgetStep').val(2);\n\t\t\t\t\t\tconst step2 = wizardContainer.find('.step2');\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\tconst filtersIdElement = step2.find('.filtersId');\n\t\t\t\t\t\tconst valueTypeElement = step2.find('.valueType');\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(filtersIdElement);\n\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(valueTypeElement);\n\t\t\t\t\t\tstep2.find('.filtersId, .valueType').on('change', function () {\n\t\t\t\t\t\t\twizardContainer.find('.step3').remove();\n\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\tvalueType: valueTypeElement.val(),\n\t\t\t\t\t\t\t}).done(function (step3Response) {\n\t\t\t\t\t\t\t\tstep2.last().after(step3Response);\n\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(3);\n\t\t\t\t\t\t\t\tvar step3 = wizardContainer.find('.step3');\n\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step3.find('select'));\n\t\t\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t\t\t\tstep3.find('.groupField').on('change', function () {\n\t\t\t\t\t\t\t\t\twizardContainer.find('.step4').remove();\n\t\t\t\t\t\t\t\t\tvar groupField = $(this);\n\t\t\t\t\t\t\t\t\tif (!groupField.val())\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\t\t\t\t\tview: 'ChartFilter',\n\t\t\t\t\t\t\t\t\t\tstep: 'step4',\n\t\t\t\t\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\t\t\t\t\tfiltersId: filtersIdElement.val(),\n\t\t\t\t\t\t\t\t\t\tgroupField: groupField.val(),\n\t\t\t\t\t\t\t\t\t\tchartType: chartType.val()\n\t\t\t\t\t\t\t\t\t}).done(function (step4Response) {\n\t\t\t\t\t\t\t\t\t\tstep3.last().after(step4Response);\n\t\t\t\t\t\t\t\t\t\twizardContainer.find('#widgetStep').val(4);\n\t\t\t\t\t\t\t\t\t\tvar step4 = wizardContainer.find('.step4');\n\t\t\t\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(step4.find('select'));\n\t\t\t\t\t\t\t\t\t\tapp.registerModalEvents(wizardContainer);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tlet save = true;\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (form.data('jqv').InvalidFields.length > 0) {\n\t\t\t\t\t\tapp.formAlignmentAfterValidation(form);\n\t\t\t\t\t\tsave = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (save) {\n\t\t\t\t\t\tconst selectedModule = moduleNameSelect2.val();\n\t\t\t\t\t\tconst selectedModuleLabel = moduleNameSelect2.find(':selected').text();\n\t\t\t\t\t\tlet selectedFiltersId = form.find('.filtersId').val();\n\t\t\t\t\t\tif (Array.isArray(selectedFiltersId)) {\n\t\t\t\t\t\t\tselectedFiltersId = selectedFiltersId.join(',');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst selectedFilterLabel = form.find('.filterId').find(':selected').text();\n\t\t\t\t\t\tconst selectedFieldLabel = form.find('.groupField').find(':selected').text();\n\t\t\t\t\t\tconst data = {\n\t\t\t\t\t\t\tmodule: selectedModule,\n\t\t\t\t\t\t\tgroupField: form.find('.groupField').val(),\n\t\t\t\t\t\t\tchartType: chartType.val(),\n\t\t\t\t\t\t};\n\t\t\t\t\t\tform.find('.saveParam').each(function (index, element) {\n\t\t\t\t\t\t\telement = $(element);\n\t\t\t\t\t\t\tif (!(element.is('input') && element.prop('type') === 'checkbox' && !element.prop('checked'))) {\n\t\t\t\t\t\t\t\tdata[element.attr('name')] = element.val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthisInstance.saveChartFilterWidget(data, element, selectedModuleLabel, selectedFiltersId, '', selectedFieldLabel, form);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tsaveChartFilterWidget: function (data, element, moduleNameLabel, filtersId, filterLabel, groupFieldName, form) {\n\t\tconst thisInstance = this;\n\t\tlet label = moduleNameLabel;\n\t\tif (typeof filterLabel !== 'undefined' && filterLabel !== null && filterLabel !== '') {\n\t\t\tlabel += ' - ' + filterLabel;\n\t\t}\n\t\tif (typeof groupFieldName !== 'undefined' && groupFieldName !== null && groupFieldName !== '') {\n\t\t\tlabel += ' - ' + groupFieldName;\n\t\t}\n\t\tconst paramsForm = {\n\t\t\tdata: JSON.stringify(data),\n\t\t\tblockid: element.data('block-id'),\n\t\t\tlinkid: element.data('linkid'),\n\t\t\tlabel: label,\n\t\t\tname: 'ChartFilter',\n\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\tfilterid: filtersId,\n\t\t\tisdefault: 0,\n\t\t\theight: 4,\n\t\t\twidth: 4,\n\t\t\towners_all: [\"mine\", \"all\", \"users\", \"groups\"],\n\t\t\tdefault_owner: 'mine',\n\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t};\n\t\tconst sourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function (data) {\n\t\t\tvar result = data['result'];\n\t\t\tvar params = {};\n\t\t\tif (data['success']) {\n\t\t\t\tapp.hideModalWindow();\n\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\tparams['text'] = result['text'];\n\t\t\t\tparams['type'] = 'success';\n\t\t\t\tvar linkElement = element.clone();\n\t\t\t\tlinkElement.data('name', 'ChartFilter');\n\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\tVtiger_DashBoard_Js.addWidget(linkElement, 'index.php?module=Home&view=ShowWidget&name=ChartFilter&linkid=' + element.data('linkid') + '&widgetid=' + result['wid'] + '&active=0');\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t} else {\n\t\t\t\tvar message = data['error']['message'];\n\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\tvar errorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t} else {\n\t\t\t\t\tvar errorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t}\n\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t}\n\t\t});\n\t},\n\tregisterMiniListWidget: function () {\n\t\tconst thisInstance = this;\n\t\t$('.dashboardHeading').off('click', '.addFilter').on('click', '.addFilter', function (e) {\n\t\t\tconst element = $(e.currentTarget);\n\n\t\t\tapp.showModalWindow(null, \"index.php?module=Home&view=MiniListWizard&step=step1\", function (wizardContainer) {\n\t\t\t\tconst form = $('form', wizardContainer);\n\t\t\t\tform.on(\"keypress\", function (event) {\n\t\t\t\t\treturn event.keyCode != 13;\n\t\t\t\t});\n\t\t\t\tconst moduleNameSelectDOM = $('select[name=\"module\"]', wizardContainer);\n\t\t\t\tconst filteridSelectDOM = $('select[name=\"filterid\"]', wizardContainer);\n\t\t\t\tconst fieldsSelectDOM = $('select[name=\"fields\"]', wizardContainer);\n\t\t\t\tconst filterFieldsSelectDOM = $('select[name=\"filter_fields\"]', wizardContainer);\n\n\t\t\t\tconst moduleNameSelect2 = App.Fields.Picklist.showSelect2ElementView(moduleNameSelectDOM, {\n\t\t\t\t\tplaceholder: app.vtranslate('JS_SELECT_MODULE')\n\t\t\t\t});\n\t\t\t\tconst filteridSelect2 = App.Fields.Picklist.showSelect2ElementView(filteridSelectDOM, {\n\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\tdropdownParent: wizardContainer\n\t\t\t\t});\n\t\t\t\tconst fieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(fieldsSelectDOM, {\n\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t\tcloseOnSelect: true,\n\t\t\t\t\tmaximumSelectionLength: 6\n\t\t\t\t});\n\t\t\t\tconst filterFieldsSelect2 = App.Fields.Picklist.showSelect2ElementView(filterFieldsSelectDOM, {\n\t\t\t\t\tplaceholder: app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'),\n\t\t\t\t});\n\t\t\t\tconst footer = $('.modal-footer', wizardContainer);\n\n\t\t\t\tfilteridSelectDOM.closest('tr').hide();\n\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\tfooter.hide();\n\n\t\t\t\tmoduleNameSelect2.on('change', function () {\n\t\t\t\t\tif (!moduleNameSelect2.val()) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfooter.hide();\n\t\t\t\t\tfieldsSelectDOM.closest('tr').hide();\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\tstep: 'step2',\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val()\n\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\tfilteridSelectDOM.empty().html(res).trigger('change');\n\t\t\t\t\t\tfilteridSelect2.closest('tr').show();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tfilteridSelect2.on('change', function () {\n\t\t\t\t\tif (!filteridSelect2.val()) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tAppConnector.request({\n\t\t\t\t\t\tmodule: 'Home',\n\t\t\t\t\t\tview: 'MiniListWizard',\n\t\t\t\t\t\tstep: 'step3',\n\t\t\t\t\t\tselectedModule: moduleNameSelect2.val(),\n\t\t\t\t\t\tfilterid: filteridSelect2.val()\n\t\t\t\t\t}).done(function (res) {\n\t\t\t\t\t\tconst responseHTML = $(res);\n\t\t\t\t\t\tconst fieldsHTML = responseHTML.find('select[name=\"fields\"]').html();\n\t\t\t\t\t\tconst filterFieldsHTML = responseHTML.find('select[name=\"filter_fields\"]').html();\n\t\t\t\t\t\tfieldsSelectDOM.empty().html(fieldsHTML).trigger('change');\n\t\t\t\t\t\tfieldsSelect2.closest('tr').show();\n\t\t\t\t\t\tfieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t\tfilterFieldsSelectDOM.empty().html(filterFieldsHTML).trigger('change');\n\t\t\t\t\t\tfilterFieldsSelect2.closest('tr').show();\n\t\t\t\t\t\tfilterFieldsSelect2.data('select2').$selection.find('.select2-search__field').parent().css('width', '100%');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tfieldsSelect2.on('change', function () {\n\t\t\t\t\tif (!fieldsSelect2.val()) {\n\t\t\t\t\t\tfooter.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfooter.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar selectedModule = moduleNameSelect2.val();\n\t\t\t\t\tvar selectedModuleLabel = moduleNameSelect2.find(':selected').text();\n\t\t\t\t\tvar selectedFilterId = filteridSelect2.val();\n\t\t\t\t\tvar selectedFilterLabel = filteridSelect2.find(':selected').text();\n\t\t\t\t\tvar selectedFields = [];\n\t\t\t\t\tfieldsSelect2.select2('data').map(function (obj) {\n\t\t\t\t\t\tselectedFields.push(obj.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tmodule: selectedModule\n\t\t\t\t\t};\n\t\t\t\t\tif (typeof selectedFields != 'object')\n\t\t\t\t\t\tselectedFields = [selectedFields];\n\t\t\t\t\tdata['fields'] = selectedFields;\n\t\t\t\t\tthisInstance.saveMiniListWidget(data, element, selectedModuleLabel, selectedFilterId, selectedFilterLabel, form);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tsaveMiniListWidget: function (data, element, moduleNameLabel, filterid, filterLabel, form) {\n\t\tvar thisInstance = this;\n\t\tvar paramsForm = {\n\t\t\tdata: JSON.stringify(data),\n\t\t\tblockid: element.data('block-id'),\n\t\t\tlinkid: element.data('linkid'),\n\t\t\tlabel: moduleNameLabel + ' - ' + filterLabel,\n\t\t\ttitle: form.find('[name=\"widgetTitle\"]').val(),\n\t\t\tname: 'Mini List',\n\t\t\tfilterid: filterid,\n\t\t\tisdefault: 0,\n\t\t\theight: 4,\n\t\t\twidth: 4,\n\t\t\towners_all: [\"mine\", \"all\", \"users\", \"groups\"],\n\t\t\tdefault_owner: 'mine',\n\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t};\n\t\tvar sourceModule = $('[name=\"selectedModuleName\"]').val();\n\t\tthisInstance.saveWidget(paramsForm, 'add', sourceModule, paramsForm.linkid).done(function (data) {\n\t\t\tvar result = data['result'];\n\t\t\tvar params = {};\n\t\t\tif (data['success']) {\n\t\t\t\tapp.hideModalWindow();\n\t\t\t\tparamsForm['id'] = result['id'];\n\t\t\t\tparamsForm['status'] = result['status'];\n\t\t\t\tparams['text'] = result['text'];\n\t\t\t\tparams['type'] = 'success';\n\t\t\t\tvar linkElement = element.clone();\n\t\t\t\tlinkElement.data('name', 'MiniList');\n\t\t\t\tlinkElement.data('id', result['wid']);\n\t\t\t\tVtiger_DashBoard_Js.addWidget(linkElement, 'index.php?module=Home&view=ShowWidget&name=MiniList&linkid=' + element.data('linkid') + '&widgetid=' + result['wid'] + '&active=0');\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t} else {\n\t\t\t\tvar message = data['error']['message'];\n\t\t\t\tif (data['error']['code'] != 513) {\n\t\t\t\t\tvar errorField = form.find('[name=\"fieldName\"]');\n\t\t\t\t} else {\n\t\t\t\t\tvar errorField = form.find('[name=\"fieldLabel\"]');\n\t\t\t\t}\n\t\t\t\terrorField.validationEngine('showPrompt', message, 'error', 'topLeft', true);\n\t\t\t}\n\t\t});\n\t},\n\tsaveWidget: function (form, mode, sourceModule, linkid) {\n\t\tvar aDeferred = $.Deferred();\n\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tif (typeof sourceModule === \"undefined\") {\n\t\t\tsourceModule = app.getModuleName();\n\t\t}\n\t\tvar params = {\n\t\t\tform: form,\n\t\t\tmodule: app.getModuleName(),\n\t\t\tsourceModule: sourceModule,\n\t\t\taction: 'Widget',\n\t\t\tmode: mode,\n\t\t\taddToUser: true,\n\t\t\tlinkid: linkid,\n\t\t};\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterTabModules: function () {\n\t\tvar thisInstance = this;\n\t\t$('.selectDashboradView li').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t$('.selectDashboradView li').removeClass('active');\n\t\t\tcurrentTarget.addClass('active');\n\t\t\tvar params = {\n\t\t\t\tmodule: currentTarget.data('module'),\n\t\t\t\tview: app.getViewName(),\n\t\t\t\tsourceModule: app.getModuleName(),\n\t\t\t\tdashboardId: thisInstance.getCurrentDashboard()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t$('.dashboardViewContainer').html(data);\n\t\t\t\tthisInstance.noCache = true;\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * Remove widget from list\n\t */\n\tremoveWidgetFromList: function () {\n\t\tconst thisInstance = this;\n\t\t$('.dashboardHeading').on('click', '.removeWidgetFromList', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar id = currentTarget.data('widget-id');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'Widget',\n\t\t\t\tmode: 'removeWidgetFromList',\n\t\t\t\twidgetid: id\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: app.vtranslate('JS_WIDGET_DELETED'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\tvar parent = currentTarget.closest('.dashboardWidget');\n\t\t\t\t$(parent).remove();\n\t\t\t\tthisInstance.updateLazyWidget();\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerGrid();\n\t\tthis.registerRefreshWidget();\n\t\tthis.removeWidget();\n\t\tthis.registerDatePickerHideInitiater();\n\t\tthis.registerShowMailBody();\n\t\tthis.registerChangeMailUser();\n\t\tthis.registerMiniListWidget();\n\t\tthis.registerChartFilterWidget();\n\t\tthis.registerTabModules();\n\t\tthis.removeWidgetFromList();\n\t\tthis.registerSelectDashboard();\n\t}\n});\n"],"names":["$","Class","grid","currentInstance","addWidget","element","url","data","name","widgetId","parent","remove","length","prev","css","linkId","widgetContainer","find","height","Vtiger_DashBoard_Js","width","loadWidget","restrictContentDrag","container","on","e","target","isHeaderElement","closest","stopPropagation","noCache","instancesCache","init","getContainer","getCurrentDashboard","getWidgetInstance","attr","id","Vtiger_Widget_Js","getInstance","widgetName","registerGrid","gridstack","verticalMargin","alwaysShowResizeHandle","test","navigator","userAgent","thisInstance","savePositions","loadWidgets","parentWidth","widgets","widgetRowColPositions","widgetSizes","index","len","widget","JSON","stringify","row","col","updateLazyWidget","AppConnector","request","module","app","getModuleName","action","position","size","scrollTop","Lazy","threshold","appendScroll","widgetLoader","urlParams","mode","progressIndicator","cache","userId","CONFIG","cacheGet","cecheUrl","done","html","App","Fields","Picklist","showSelect2ElementView","trigger","widgetPostLoadEvent","outerHeight","adjustedHeight","headerHeight","widgetContent","showNewScrollbar","wheelPropagation","registerRefreshWidget","currentTarget","widgetInstnace","refreshWidget","removeWidget","listItem","parents","widgetTitle","message","vtranslate","Vtiger_Helper_Js","showConfirmationBox","response","success","fadeOut","inArray","result","deleteFromList","linkid","title","divider","insertBefore","append","fail","registerSelectDashboard","dashboardId","params","view","getViewName","progressIndicatorElement","registerEvents","registerDatePickerHideInitiater","dashboardWidgetHeader","addClickOutSideEvent","date","DatePickerHide","blur","registerShowMailBody","mailBody","bodyIcon","show","removeClass","addClass","hide","registerChangeMailUser","contentContainer","optionSelected","val","widgetPostRefereshEvent","registerChartFilterWidget","off","showModalWindow","wizardContainer","form","event","keyCode","chartType","moduleNameSelectDOM","sectorContainer","placeholder","step1","step2","step3","footer","value","moduleNameSelect2","step","selectedModule","step2Response","after","valueTypeElement","filtersIdElement","filtersId","valueType","step3Response","last","groupField","step4Response","step4","registerModalEvents","preventDefault","InvalidFields","formAlignmentAfterValidation","save","selectedModuleLabel","text","selectedFiltersId","Array","isArray","join","selectedFieldLabel","each","is","prop","saveChartFilterWidget","moduleNameLabel","filterLabel","groupFieldName","label","blockid","filterid","isdefault","owners_all","default_owner","sourceModule","saveWidget","paramsForm","hideModalWindow","clone","linkElement","showMessage","errorField","validationEngine","registerMiniListWidget","filteridSelectDOM","fieldsSelectDOM","filterFieldsSelectDOM","filteridSelect2","dropdownParent","fieldsSelect2","closeOnSelect","maximumSelectionLength","filterFieldsSelect2","res","empty","fieldsHTML","responseHTML","filterFieldsHTML","$selection","selectedFilterId","selectedFilterLabel","selectedFields","select2","map","obj","push","saveMiniListWidget","Deferred","addToUser","aDeferred","resolve","error","reject","promise","registerTabModules","removeWidgetFromList","widgetid","type"],"mappings":"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"}