{"version":3,"file":"DetailPreview.min.js","sources":["DetailPreview.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\"Vtiger_DetailPreview_Js\", {}, {\n\t/**\n\t * Redirects to the clicked link from the iframe.\n\t */\n\tregisterLinkEvent: function () {\n\t\t$('#page').on('click', 'a', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar target = $(this);\n\t\t\tif (!target.closest('div').hasClass('fieldValue') || target.hasClass('showReferenceTooltip')) {\n\t\t\t\tif (target.attr('href') && target.attr('href') != '#') {\n\t\t\t\t\ttop.location.href = target.attr('href');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * Redirects to the current iframe parent.\n\t */\n\tupdateParentFrame: function () {\n\t\tparent.app.getPageController().updateWindowHeight($(\".mainContainer\").height(), $(window.frameElement));\n\t},\n\t/**\n\t * Function sets the correct iframe size.\n\t * @param {jQuery} currentHeight - ifrmae body height to be set.\n\t * @param {jQuery} frame - ifrmae height to be changed.\n\t */\n\tupdateWindowHeight: function (currentHeight, frame) {\n\t\tvar thisInstance = this;\n\t\tvar relatedContents = frame.closest('.relatedContents');\n\t\tvar fixedListHeight = relatedContents.find(\".js-list-preview--scroll\").height();\n\t\tframe.height(currentHeight);\n\t\tif (fixedListHeight > currentHeight) {\n\t\t\tcurrentHeight = fixedListHeight;\n\t\t}\n\t\tif ($(window).width() < 993) {\n\t\t\trelatedContents.find(\".gutter, .js-list-preview, .js-side-block, .js-list-detail, .recordsListPreview\").height(currentHeight);\n\n\t\t} else {\n\t\t\trelatedContents.find(\".gutter, .js-list-preview, .js-side-block, .js-list-detail, .recordsListPreview\").height(currentHeight);\n\t\t}\n\t\trelatedContents.find(\".gutter, .js-list-preview, .js-side-block, .js-list-detail, .recordsListPreview\").height(currentHeight);\n\n\t\tif (window.frameElement) {\n\t\t\tthisInstance.updateParentFrame();\n\t\t}\n\t},\n\t/**\n\t * Creates ResizeSensor, which detects size changes.\n\t */\n\tregisterSizeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tnew ResizeSensor($('.mainContainer'), function () {\n\t\t\tthisInstance.updateParentFrame();\n\t\t});\n\t},\n\t/**\n\t * Register detail events\n\t */\n\tregisterDetailEvent: function () {\n\t\tlet moduleClassName = app.getModuleName() + \"_Detail_Js\", parent = false;\n\t\tif (typeof window[moduleClassName] === \"undefined\") {\n\t\t\tmoduleClassName = \"Vtiger_Detail_Js\";\n\t\t}\n\t\tif (typeof window[moduleClassName] !== \"undefined\") {\n\t\t\tif (typeof window[moduleClassName] === 'function') {\n\t\t\t\tparent = new window[moduleClassName]();\n\t\t\t}\n\t\t\tif (typeof window[moduleClassName] === 'object') {\n\t\t\t\tparent = window[moduleClassName];\n\t\t\t}\n\t\t\tif (parent) {\n\t\t\t\tparent.registerEvents();\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t * Registers DetailPreview events.\n\t */\n\tregisterEvents: function () {\n\t\tthis.registerDetailEvent();\n\t\tthis.registerLinkEvent();\n\t\tthis.registerSizeEvent();\n\t}\n});\n"],"names":["$","Class","registerLinkEvent","on","e","preventDefault","target","closest","hasClass","attr","top","location","href","updateParentFrame","parent","app","getPageController","updateWindowHeight","height","window","frameElement","currentHeight","frame","relatedContents","fixedListHeight","find","width","thisInstance","registerSizeEvent","registerDetailEvent","getModuleName","moduleClassName","registerEvents"],"mappings":";;;;;;;;AAGAA,EAAEC,KAAF,CAAQ,yBAAR,CAAmC,EAAnC,CAAuC,CAItCC,kBAAmB,YAAY,CAC9BF,EAAE,OAAF,EAAWG,EAAX,CAAc,OAAd,CAAuB,GAAvB,CAA4B,SAAUC,CAAV,CAAa,CACxCA,EAAEC,cAAF,EADwC,CAExC,MAAaL,EAAE,IAAF,CAAb,CAFwC,CAGpC,CAACM,EAAOC,OAAP,CAAe,KAAf,EAAsBC,QAAtB,CAA+B,YAA/B,CAAD,EAAiDF,EAAOE,QAAP,CAAgB,sBAAhB,CAHb,GAInCF,EAAOG,IAAP,CAAY,MAAZ,GAA8C,GAAvB,IAAOA,IAAP,CAAY,MAAZ,CAJY,GAKtCC,IAAIC,QAAJ,CAAaC,IAAb,CAAoBN,EAAOG,IAAP,CAAY,MAAZ,CALkB,EAQxC,CARD,EASA,CAdqC,CAkBtCI,kBAAmB,YAAY,CAC9BC,OAAOC,GAAP,CAAWC,iBAAX,GAA+BC,kBAA/B,CAAkDjB,EAAE,gBAAF,EAAoBkB,MAApB,EAAlD,CAAgFlB,EAAEmB,OAAOC,YAAT,CAAhF,EACA,CApBqC,CA0BtCH,mBAAoB,WAAUI,CAAV,CAAyBC,CAAzB,CAAgC,OAChC,IADgC,CAE/CC,EAAkBD,EAAMf,OAAN,CAAc,kBAAd,CAF6B,CAG/CiB,EAAkBD,EAAgBE,IAAhB,CAAqB,0BAArB,EAAiDP,MAAjD,EAH6B,CAInDI,EAAMJ,MAAN,CAAaG,CAAb,CAJmD,CAK/CG,EAAkBH,CAL6B,GAMlDA,EAAgBG,CANkC,EAQ3B,GAApB,GAAEL,MAAF,EAAUO,KAAV,EAR+C,CASlDH,EAAgBE,IAAhB,CAAqB,iFAArB,EAAwGP,MAAxG,CAA+GG,CAA/G,CATkD,CAYlDE,EAAgBE,IAAhB,CAAqB,iFAArB,EAAwGP,MAAxG,CAA+GG,CAA/G,CAZkD,CAcnDE,EAAgBE,IAAhB,CAAqB,iFAArB,EAAwGP,MAAxG,CAA+GG,CAA/G,CAdmD,CAgB/CF,OAAOC,YAhBwC,EAiBlDO,EAAad,iBAAb,GAED,CA7CqC,CAiDtCe,kBAAmB,YAAY,CAC9B,MAAmB,IAAnB,CACA,gBAAA,CAAiB5B,EAAE,gBAAF,CAAjB,CAAsC,UAAY,CACjD2B,EAAad,iBAAb,GACA,CAFD,EAGA,CAtDqC,CA0DtCgB,oBAAqB,YAAY,CAChC,MAAsBd,IAAIe,aAAJ,GAAsB,YAA5C,CAA0DhB,IAA1D,CACuC,WAAnC,gBAAciB,CAAP,CAFqB,GAG/BA,EAAkB,kBAHa,EAKO,WAAnC,gBAAcA,CAAP,CALqB,GAMQ,UAAnC,gBAAcA,CAAP,CANoB,GAO9BjB,EAAS,WAAWiB,CAAP,CAPiB,EASQ,QAAnC,WAAOZ,OAAOY,CAAP,CAAP,CAT2B,GAU9BjB,EAASK,OAAOY,CAAP,CAVqB,EAY3BjB,CAZ2B,EAa9BA,EAAOkB,cAAP,EAb8B,EAgBhC,CA1EqC,CA8EtCA,eAAgB,YAAY,CAC3B,KAAKH,mBAAL,EAD2B,CAE3B,KAAK3B,iBAAL,EAF2B,CAG3B,KAAK0B,iBAAL,GACA,CAlFqC,CAAvC"}