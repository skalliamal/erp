{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\"KnowledgeBase_Edit_Js\", {}, {\n\tloadEditorElement: function (noteContentElement) {\n\t\tconst customConfig = {};\n\t\tif (noteContentElement.is(':visible')) {\n\t\t\tnoteContentElement.removeAttr('data-validation-engine');\n\t\t\tcustomConfig.filebrowserImageUploadUrl = \"index.php?module=KnowledgeBase&action=ImageUploadAjax\";\n\t\t\tcustomConfig.extraAllowedContent = true;\n\t\t\tcustomConfig.removeFormatAttributes = '';\n\t\t\tcustomConfig.removeFormatTags = '';\n\t\t\tnew App.Fields.Text.Editor(noteContentElement, customConfig);\n\t\t\tCKEDITOR.on('dialogDefinition', function (ev) {\n\t\t\t\tvar dialogName = ev.data.name;\n\t\t\t\tvar dialogDefinition = ev.data.definition;\n\t\t\t\tif (dialogName === 'image') {\n\t\t\t\t\tdialogDefinition.onShow = function () {\n\t\t\t\t\t\tconst form = $('iframe.cke_dialog_ui_input_file').contents().find('form');\n\t\t\t\t\t\tform.append('<input type=\"hidden\" name=\"' + csrfMagicName + '\" value=\"' + csrfMagicToken + '\">');\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t}\n});\n"],"names":["Vtiger_Edit_Js","loadEditorElement","noteContentElement","is","removeAttr","customConfig","filebrowserImageUploadUrl","extraAllowedContent","removeFormatAttributes","removeFormatTags","Fields","Text","Editor","CKEDITOR","on","ev","data","name","dialogDefinition","definition","onShow","$","contents","find","form","append","csrfMagicName","csrfMagicToken","registerEvents","_super"],"mappings":";;AAGAA,eAAe,uBAAf,CAAwC,EAAxC,CAA4C,CAC3CC,kBAAmB,WAAUC,CAAV,CAA8B,CAChD,MAAqB,EAArB,CACIA,EAAmBC,EAAnB,CAAsB,UAAtB,CAF4C,GAG/CD,EAAmBE,UAAnB,CAA8B,wBAA9B,CAH+C,CAI/CC,EAAaC,yBAAb,CAAyC,uDAJM,CAK/CD,EAAaE,mBAAb,GAL+C,CAM/CF,EAAaG,sBAAb,CAAsC,EANS,CAO/CH,EAAaI,gBAAb,CAAgC,EAPe,CAQ/C,QAAQC,MAAJ,CAAWC,IAAX,CAAgBC,MAApB,CAA2BV,CAA3B,CAA+CG,CAA/C,CAR+C,CAS/CQ,SAASC,EAAT,CAAY,kBAAZ,CAAgC,SAAUC,CAAV,CAAc,OAC5BA,EAAGC,IAAH,CAAQC,IADoB,CAEzCC,EAAmBH,EAAGC,IAAH,CAAQG,UAFc,CAG1B,OAAf,IAHyC,GAI5CD,EAAiBE,MAAjB,CAA0B,UAAY,CACrC,MAAaC,EAAE,iCAAF,EAAqCC,QAArC,GAAgDC,IAAhD,CAAqD,MAArD,CAAb,CACAC,EAAKC,MAAL,CAAY,8BAAgCC,aAAhC,CAAgD,WAAhD,CAA8DC,cAA9D,CAA+E,IAA3F,EACA,CAP2C,EAS7C,CATD,CAT+C,EAoBhD,CArB0C,CAsB3CC,eAAgB,YAAY,CAC3B,KAAKC,MAAL,GACA,CAxB0C,CAA5C"}