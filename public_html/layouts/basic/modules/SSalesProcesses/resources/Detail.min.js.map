{"version":3,"file":"Detail.min.js","sources":["Detail.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Detail_Js(\"SSalesProcesses_Detail_Js\", {}, {\n\t//It stores the IStorages Hierarchy response data\n\thierarchyResponseCache: {},\n\t/*\n\t * function to get the IStoragesHierarchy response data\n\t */\n\tgetHierarchyResponseData: function (params) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\t//Check in the cache\n\t\tif (!(jQuery.isEmptyObject(thisInstance.hierarchyResponseCache))) {\n\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t} else {\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t//store it in the cache, so that we dont do multiple request\n\t\t\t\tthisInstance.hierarchyResponseCache = data;\n\t\t\t\taDeferred.resolve(thisInstance.hierarchyResponseCache);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\t/*\n\t * function to display the IStorages Hierarchy response data\n\t */\n\tdisplayHierarchyResponseData: function (data) {\n\t\tvar callbackFunction = function (data) {\n\t\t\tapp.showScrollBar(jQuery('#hierarchyScroll'), {\n\t\t\t\theight: '300px',\n\t\t\t\trailVisible: true,\n\t\t\t\tsize: '6px'\n\t\t\t});\n\t\t};\n\t\tapp.showModalWindow(data, function (data) {\n\t\t\tif (typeof callbackFunction == 'function' && jQuery('#hierarchyScroll').height() > 300) {\n\t\t\t\tcallbackFunction(data);\n\t\t\t}\n\t\t});\n\t},\n\tregisterHierarchyRecordCount: function () {\n\t\tvar hierarchyButton = $('.detailViewTitle .hierarchy');\n\t\tif (hierarchyButton.length) {\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\taction: 'RelationAjax',\n\t\t\t\trecord: app.getRecordId(),\n\t\t\t\tmode: 'getHierarchyCount',\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\t$('.detailViewTitle .hierarchy').append(' <span class=\"badge\">' + response.result + '</span>');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tregisterShowHierarchy: function () {\n\t\tvar thisInstance = this;\n\t\tvar hierarchyButton = $('.detailViewTitle');\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tview: 'Hierarchy',\n\t\t\trecord: app.getRecordId(),\n\t\t};\n\t\thierarchyButton.on('click', '.js-detail__icon', function (e) {\n\t\t\tthisInstance.getHierarchyResponseData(params).done(function (data) {\n\t\t\t\tthisInstance.displayHierarchyResponseData(data);\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerHierarchyRecordCount();\n\t\tthis.registerShowHierarchy();\n\t}\n});\n"],"names":["Vtiger_Detail_Js","hierarchyResponseCache","getHierarchyResponseData","params","aDeferred","jQuery","Deferred","isEmptyObject","thisInstance","AppConnector","request","done","data","resolve","fail","textStatus","errorThrown","reject","promise","displayHierarchyResponseData","app","showScrollBar","height","railVisible","size","showModalWindow","callbackFunction","registerHierarchyRecordCount","$","hierarchyButton","length","module","getModuleName","action","record","getRecordId","mode","response","success","append","result","registerShowHierarchy","view","on","registerEvents","_super"],"mappings":";;AAGAA,iBAAiB,2BAAjB,CAA8C,EAA9C,CAAkD,CAEjDC,uBAAwB,EAFyB,CAMjDC,yBAA0B,WAAUC,CAAV,CAAkB,OACxB,IADwB,CAEvCC,EAAYC,OAAOC,QAAP,EAF2B,CAgB3C,cAXaC,aAAP,CAAqBC,EAAaP,sBAAlC,CAWN,CARCQ,aAAaC,OAAb,CAAqBP,CAArB,EAA6BQ,IAA7B,CAAkC,SAAUC,CAAV,CAAgB,CAEjDJ,EAAaP,sBAAb,CAAsCW,CAFW,CAGjDR,EAAUS,OAAV,CAAkBL,EAAaP,sBAA/B,EACA,CAJD,EAIGa,IAJH,CAIQ,SAAUC,CAAV,CAAsBC,CAAtB,CAAmC,CAC1CZ,EAAUa,MAAV,CAAiBF,CAAjB,CAA6BC,CAA7B,EACA,CAND,CAQD,CAVCZ,EAAUS,OAAV,CAAkBL,EAAaP,sBAA/B,CAUD,CAAOG,EAAUc,OAAV,EACP,CAvBgD,CA2BjDC,6BAA8B,WAAUP,CAAV,CAAgB,CAC7C,MAAuB,UAAgB,CACtCQ,IAAIC,aAAJ,CAAkBhB,OAAO,kBAAP,CAAlB,CAA8C,CAC7CiB,OAAQ,OADqC,CAE7CC,cAF6C,CAG7CC,KAAM,KAHuC,CAA9C,EAKA,CAND,CAOAJ,IAAIK,eAAJ,CAAoBb,CAApB,CAA0B,SAAUA,CAAV,CAAgB,CACV,UAA3B,UAAA,EAA+E,GAAtC,QAAO,kBAAP,EAA2BU,MAA3B,EADJ,EAExCI,EAAiBd,CAAjB,EAED,CAJD,EAKA,CAxCgD,CAyCjDe,6BAA8B,YAAY,CACzC,MAAsBC,EAAE,6BAAF,CAAtB,CACA,GAAIC,EAAgBC,MAApB,CAA4B,CAC3B,MAAa,CACZC,OAAQX,IAAIY,aAAJ,EADI,CAEZC,OAAQ,cAFI,CAGZC,OAAQd,IAAIe,WAAJ,EAHI,CAIZC,KAAM,mBAJM,CAAb,CAMA3B,aAAaC,OAAb,CAAqBP,CAArB,EAA6BQ,IAA7B,CAAkC,SAAU0B,CAAV,CAAoB,CACjDA,EAASC,OADwC,EAEpDV,EAAE,6BAAF,EAAiCW,MAAjC,CAAwC,wBAA0BF,EAASG,MAAnC,CAA4C,SAApF,EAED,CAJD,EAKA,CACD,CAxDgD,CAyDjDC,sBAAuB,YAAY,OACf,IADe,CAE9BZ,EAAkBD,EAAE,kBAAF,CAFY,CAG9BzB,EAAS,CACZ4B,OAAQX,IAAIY,aAAJ,EADI,CAEZU,KAAM,WAFM,CAGZR,OAAQd,IAAIe,WAAJ,EAHI,CAHqB,CAQlCN,EAAgBc,EAAhB,CAAmB,OAAnB,CAA4B,kBAA5B,CAAgD,UAAa,CAC5DnC,EAAaN,wBAAb,CAAsCC,CAAtC,EAA8CQ,IAA9C,CAAmD,SAAUC,CAAV,CAAgB,CAClEJ,EAAaW,4BAAb,CAA0CP,CAA1C,EACA,CAFD,EAGA,CAJD,EAKA,CAtEgD,CAuEjDgC,eAAgB,YAAY,CAC3B,KAAKC,MAAL,EAD2B,CAE3B,KAAKlB,4BAAL,EAF2B,CAG3B,KAAKc,qBAAL,GACA,CA3EgD,CAAlD"}