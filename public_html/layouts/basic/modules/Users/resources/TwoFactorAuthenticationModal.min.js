'use strict';

$.Class('Base_TwoFactorAuthenticationModal_JS',{},{registerSubmitFrom:function c(a){a.find('button[name=saveButton]').prop('disabled',!0),a.find('input[name=user_code]').on('keyup',function(b){13!==b.keyCode&&a.find('button[name=saveButton]').prop('disabled',0===$(b.currentTarget).val().length);}),a.find('input[name=user_code]').on('change',function(b){a.find('button[name=saveButton]').prop('disabled',0===$(b.currentTarget).val().length);}),a.find('input[name=turn_off_2fa]').on('change',function(b){$(b.currentTarget).prop('checked')?(a.find('.js-qr-code,.js-user-code').addClass('hide'),a.find('input[name=mode]').val('off'),a.find('button[name=saveButton]').prop('disabled',!1)):(a.find('.js-qr-code,.js-user-code').removeClass('hide'),a.find('input[name=mode]').val('secret'),a.find('button[name=saveButton]').prop('disabled',!0),a.find('input[name=user_code]').val(''));});var b=a.find('form');b.on('submit',function(a){var c=$.progressIndicator({blockInfo:{enabled:!0}});AppConnector.request(b.serializeFormData()).done(function(a){if(a.result.success)app.hideModalWindow(),Vtiger_Helper_Js.showPnotify({text:app.vtranslate(a.result.message),type:'success',animation:'show'}),'Users'===app.getModuleName()&&location.reload();else{var d=b.find('.js-wrong-code');d.hasClass('hide')&&d.removeClass('hide');}c.progressIndicator({mode:'hide'});}),a.preventDefault();});},registerEvents:function b(a){this.registerSubmitFrom(a);}});
//# sourceMappingURL=TwoFactorAuthenticationModal.min.js.map
