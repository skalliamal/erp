{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nVtiger_Edit_Js(\"Users_Edit_Js\", {\n\t/**\n\t * Function to register change event for currency separator\n\t */\n\tregisterChangeEventForCurrencySeparator: function () {\n\t\tvar form = jQuery('form');\n\t\tjQuery('[name=\"currency_decimal_separator\"]', form).on('change', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = element.val();\n\t\t\tvar groupingSeparatorValue = jQuery('[name=\"currency_grouping_separator\"]', form).data('selectedValue');\n\t\t\tif (groupingSeparatorValue == selectedValue) {\n\t\t\t\tvar message = app.vtranslate('JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\tvar previousSelectedValue = element.data('selectedValue');\n\t\t\t\telement.find('option').removeAttr('selected');\n\t\t\t\telement.find('option[value=\"' + previousSelectedValue + '\"]').attr('selected', 'selected');\n\t\t\t\telement.trigger(\"chosen:updated\");\n\t\t\t} else {\n\t\t\t\telement.data('selectedValue', selectedValue);\n\t\t\t}\n\t\t});\n\t\tjQuery('[name=\"currency_grouping_separator\"]', form).on('change', function (e) {\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar selectedValue = element.val();\n\t\t\tvar decimalSeparatorValue = jQuery('[name=\"currency_decimal_separator\"]', form).data('selectedValue');\n\t\t\tif (decimalSeparatorValue == selectedValue) {\n\t\t\t\tvar message = app.vtranslate('JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME');\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: message,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t\tvar previousSelectedValue = element.data('selectedValue');\n\t\t\t\telement.find('option').removeAttr('selected');\n\t\t\t\telement.find('option[value=\"' + previousSelectedValue + '\"]').attr('selected', 'selected');\n\t\t\t\telement.trigger(\"chosen:updated\");\n\t\t\t} else {\n\t\t\t\telement.data('selectedValue', selectedValue);\n\t\t\t}\n\t\t});\n\t}\n\n}, {\n\tduplicateCheckCache: {},\n\tuserExistCheckCache: {},\n\tpassCheckCache: {},\n\t//Hold the conditions for a hour format\n\thourFormatConditionMapping: false,\n\tregisterHourFormatChangeEvent: function () {\n\n\t},\n\tgetHourValues: function (list, currentValue) {\n\t\tvar options = '';\n\t\tfor (var key in list) {\n\t\t\t//IE Browser consider the prototype properties also, it should consider has own properties only.\n\t\t\tif (list.hasOwnProperty(key)) {\n\t\t\t\tvar conditionValue = list[key];\n\t\t\t\toptions += '<option value=\"' + key + '\"';\n\t\t\t\tif (key == currentValue) {\n\t\t\t\t\toptions += ' selected=\"selected\" ';\n\t\t\t\t}\n\t\t\t\toptions += '>' + conditionValue + '</option>';\n\t\t\t}\n\t\t}\n\t\treturn options;\n\t},\n\tchangeStartHourValuesEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tform.on('change', 'select[name=\"hour_format\"]', function (e) {\n\t\t\tvar hourFormatVal = jQuery(e.currentTarget).val();\n\t\t\tvar startHourElement = jQuery('select[name=\"start_hour\"]', form);\n\t\t\tvar endHourElement = jQuery('select[name=\"end_hour\"]', form);\n\t\t\tvar conditionStartSelected = startHourElement.val();\n\t\t\tvar conditionEndSelected = endHourElement.val();\n\t\t\tif (typeof thisInstance.hourFormatConditionMapping === \"undefined\") {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar list = thisInstance.hourFormatConditionMapping['hour_format'][hourFormatVal]['start_hour'];\n\t\t\tstartHourElement.html(thisInstance.getHourValues(list, conditionStartSelected)).trigger(\"chosen:updated\");\n\t\t\tendHourElement.html(thisInstance.getHourValues(list, conditionEndSelected)).trigger(\"chosen:updated\");\n\t\t});\n\t},\n\ttriggerHourFormatChangeEvent: function (form) {\n\t\tthis.hourFormatConditionMapping = jQuery('input[name=\"timeFormatOptions\"]', form).data('value');\n\t\tthis.changeStartHourValuesEvent(form);\n\t\tjQuery('select[name=\"hour_format\"]', form).trigger('change');\n\t},\n\t/**\n\t * Function to register recordpresave event\n\t */\n\tregisterRecordPreSaveEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tform.on(Vtiger_Edit_Js.recordPreSave, function (e, data) {\n\t\t\tvar record = jQuery('input[name=\"record\"]').val();\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'message': app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (record == '' && jQuery('input[name=\"user_password\"]').val() != jQuery('input[name=\"confirm_password\"]').val()) {\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_REENTER_PASSWORDS'));\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthisInstance.verifyFormData()\n\t\t\t\t.done(function (data) {\n\t\t\t\t\tif (data.result.message) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(data.result.message);\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function (data, error) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\te.preventDefault();\n\t\t\t\t});\n\t\t});\n\t},\n\tverifyFormData: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar thisInstance = this;\n\t\tthisInstance.verifyData().done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}, function (data, error) {\n\t\t\taDeferred.reject();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tverifyData: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tAppConnector.request({\n\t\t\tasync: false,\n\t\t\tdata: {\n\t\t\t\tmodule: 'Users',\n\t\t\t\taction: 'VerifyData',\n\t\t\t\temail: jQuery('[name=\"email1\"]').val(),\n\t\t\t\tuserName: jQuery('input[name=\"user_name\"]').val(),\n\t\t\t\trecord: jQuery('input[name=\"record\"]').val(),\n\t\t\t\tpassword: jQuery('input[name=\"user_password\"]').val(),\n\n\t\t\t}\n\t\t}).done(function (data) {\n\t\t\tif (data.result) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t} else {\n\t\t\t\taDeferred.reject(data);\n\t\t\t}\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tvar form = this.getForm();\n\t\tthis.triggerHourFormatChangeEvent(form);\n\t\tthis.registerRecordPreSaveEvent(form);\n\t\tUsers_Edit_Js.registerChangeEventForCurrencySeparator();\n\t}\n});\n"],"names":["Vtiger_Edit_Js","registerChangeEventForCurrencySeparator","jQuery","form","on","e","currentTarget","selectedValue","element","val","groupingSeparatorValue","data","app","vtranslate","Vtiger_Helper_Js","showMessage","text","message","type","find","removeAttr","previousSelectedValue","attr","trigger","decimalSeparatorValue","duplicateCheckCache","userExistCheckCache","passCheckCache","hourFormatConditionMapping","registerHourFormatChangeEvent","getHourValues","list","currentValue","hasOwnProperty","key","options","conditionValue","changeStartHourValuesEvent","startHourElement","endHourElement","conditionStartSelected","conditionEndSelected","thisInstance","hourFormatVal","html","triggerHourFormatChangeEvent","registerRecordPreSaveEvent","recordPreSave","progressIndicatorElement","progressIndicator","showPnotify","preventDefault","verifyFormData","done","result","fail","Deferred","verifyData","aDeferred","resolve","reject","promise","request","async","module","action","email","userName","record","password","registerEvents","_super","getForm","Users_Edit_Js"],"mappings":"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"}