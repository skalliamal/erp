'use strict';

Vtiger_Edit_Js('Users_Edit_Js',{registerChangeEventForCurrencySeparator:function b(){var a=jQuery('form');jQuery('[name="currency_decimal_separator"]',a).on('change',function(b){var c=jQuery(b.currentTarget),d=c.val(),e=jQuery('[name="currency_grouping_separator"]',a).data('selectedValue');if(e==d){var f=app.vtranslate('JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME');Vtiger_Helper_Js.showMessage({text:f,type:'error'});var g=c.data('selectedValue');c.find('option').removeAttr('selected'),c.find('option[value="'+g+'"]').attr('selected','selected'),c.trigger('chosen:updated');}else c.data('selectedValue',d);}),jQuery('[name="currency_grouping_separator"]',a).on('change',function(b){var c=jQuery(b.currentTarget),d=c.val(),e=jQuery('[name="currency_decimal_separator"]',a).data('selectedValue');if(e==d){var f=app.vtranslate('JS_DECIMAL_SEPARATOR_AND_GROUPING_SEPARATOR_CANT_BE_SAME');Vtiger_Helper_Js.showMessage({text:f,type:'error'});var g=c.data('selectedValue');c.find('option').removeAttr('selected'),c.find('option[value="'+g+'"]').attr('selected','selected'),c.trigger('chosen:updated');}else c.data('selectedValue',d);});}},{duplicateCheckCache:{},userExistCheckCache:{},passCheckCache:{},hourFormatConditionMapping:!1,registerHourFormatChangeEvent:function a(){},getHourValues:function f(a,b){var c='';for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];c+='<option value="'+d+'"',d==b&&(c+=' selected="selected" '),c+='>'+e+'</option>';}return c},changeStartHourValuesEvent:function c(a){var b=this;a.on('change','select[name="hour_format"]',function(c){var d=jQuery(c.currentTarget).val(),e=jQuery('select[name="start_hour"]',a),f=jQuery('select[name="end_hour"]',a),g=e.val(),h=f.val();if('undefined'==typeof b.hourFormatConditionMapping)return !1;var i=b.hourFormatConditionMapping.hour_format[d].start_hour;e.html(b.getHourValues(i,g)).trigger('chosen:updated'),f.html(b.getHourValues(i,h)).trigger('chosen:updated');});},triggerHourFormatChangeEvent:function b(a){this.hourFormatConditionMapping=jQuery('input[name="timeFormatOptions"]',a).data('value'),this.changeStartHourValuesEvent(a),jQuery('select[name="hour_format"]',a).trigger('change');},registerRecordPreSaveEvent:function c(a){var b=this;a.on(Vtiger_Edit_Js.recordPreSave,function(a){var c=jQuery('input[name="record"]').val(),d=jQuery.progressIndicator({message:app.vtranslate('JS_SAVE_LOADER_INFO'),position:'html',blockInfo:{enabled:!0}});''==c&&jQuery('input[name="user_password"]').val()!=jQuery('input[name="confirm_password"]').val()&&(Vtiger_Helper_Js.showPnotify(app.vtranslate('JS_REENTER_PASSWORDS')),d.progressIndicator({mode:'hide'}),a.preventDefault()),b.verifyFormData().done(function(b){b.result.message&&(Vtiger_Helper_Js.showPnotify(b.result.message),d.progressIndicator({mode:'hide'}),a.preventDefault());}).fail(function(){d.progressIndicator({mode:'hide'}),a.preventDefault();});});},verifyFormData:function c(){var a=jQuery.Deferred(),b=this;return b.verifyData().done(function(b){a.resolve(b);},function(){a.reject();}),a.promise()},verifyData:function b(){var a=jQuery.Deferred();return AppConnector.request({async:!1,data:{module:'Users',action:'VerifyData',email:jQuery('[name="email1"]').val(),userName:jQuery('input[name="user_name"]').val(),record:jQuery('input[name="record"]').val(),password:jQuery('input[name="user_password"]').val()}}).done(function(b){b.result?a.resolve(b):a.reject(b);}),a.promise()},registerEvents:function b(){this._super();var a=this.getForm();this.triggerHourFormatChangeEvent(a),this.registerRecordPreSaveEvent(a),Users_Edit_Js.registerChangeEventForCurrencySeparator();}});
//# sourceMappingURL=Edit.min.js.map
