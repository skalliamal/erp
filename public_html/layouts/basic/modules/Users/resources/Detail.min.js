'use strict';

Vtiger_Detail_Js('Users_Detail_Js',{triggerDeleteUser:function c(a){var b=app.vtranslate('LBL_DELETE_USER_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:b}).done(function(){AppConnector.request(a).done(function(a){if(a){var b=function(){var a=app.validationEngineOptions;a.onValidationComplete=function(a,b){return b&&Users_Detail_Js.deleteUser(a),!1},jQuery('#deleteUser').validationEngine(app.validationEngineOptions);};app.showModalWindow(a,function(a){'function'==typeof b&&b(a);});}});}).fail(function(a){console.error(a);});},deleteUser:function e(a){var b=a.find('[name="userid"]').val(),c=a.find('[name="tranfer_owner_id"]').val(),d={module:app.getModuleName(),action:'DeleteAjax',mode:'deleteUser',transfer_user_id:c,userid:b,permanent:a.find('[name="deleteUserPermanent"]:checked').val()};AppConnector.request(d).done(function(a){if(a.success){app.hideModalWindow(),Vtiger_Helper_Js.showPnotify(app.vtranslate(a.result.message));var b=a.result.listViewUrl;window.location.href=b;}});},triggerChangeAccessKey:function d(a){var b=app.vtranslate('JS_NEW_ACCESS_KEY_REQUESTED'),c=app.vtranslate('JS_CHANGE_ACCESS_KEY_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({title:b,message:c}).done(function(){AppConnector.request(a).done(function(a){var b={};if(a.success){a=a.result,b.type='success',c=app.vtranslate(a.message);var d=jQuery('#Users_detailView_fieldValue_accesskey');d.length&&d.find('.value').html(a.accessKey);}else c=app.vtranslate(a.error.message);b.text=c,Vtiger_Helper_Js.showPnotify(b);});});}},{usersEditInstance:!1,updateStartHourElement:function b(a){this.usersEditInstance.triggerHourFormatChangeEvent(a),this.updateStartHourElementValue();},hourFormatUpdateEvent:function b(){var a=this;this.getForm().on(this.fieldUpdatedEvent,'[name="hour_format"]',function(){a.updateStartHourElementValue();});},updateStartHourElementValue:function e(){var a=this.getForm(),b=jQuery('select[name="start_hour"]',a),c=b.find('option:selected').text();b.closest('.fieldValue').find('span.value').text(c);var d=jQuery('select[name="end_hour"]',a);d.closest('.fieldValue').find('span.value').text(d.find('option:selected').text());},startHourUpdateEvent:function c(a){var b=this;a.on(this.fieldUpdatedEvent,'[name="start_hour"]',function(){b.updateStartHourElement(a);});},saveFieldValues:function h(a){var b=jQuery.Deferred(),c=this,d=!1,e=this.getRecordId(),f={};if('undefined'!=typeof a&&(f=a,'email1'==f.field&&c.usersEditInstance.checkEmail(f.value).done(function(){},function(){d=!0,b.reject();})),!0!=d){f.record=e,f.module=app.getModuleName(),f.action='SaveAjax';var g={};g.data=f,g.async=!1,g.dataType='json',AppConnector.request(g).done(function(a){b.resolve(a);});}return b.promise()},registerEvents:function b(){this._super();var a=this.getForm();this.usersEditInstance=Vtiger_Edit_Js.getInstance(),this.updateStartHourElement(a),this.hourFormatUpdateEvent(),this.startHourUpdateEvent(a),Users_Edit_Js.registerChangeEventForCurrencySeparator();}});
//# sourceMappingURL=Detail.min.js.map
