{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nVtiger_Edit_Js(\"EmailTemplates_Edit_Js\", {}, {\n\n\tloadVariablePanel: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (typeof form === \"undefined\") {\n\t\t\tform = this.getForm();\n\t\t}\n\t\tvar panel = form.find('#variablePanel');\n\t\tpanel.progressIndicator();\n\t\tAppConnector.request({\n\t\t\tmodule: 'EmailTemplates',\n\t\t\trecord: app.getRecordId(),\n\t\t\tview: 'VariablePanel',\n\t\t\ttype: 'mail',\n\t\t\tselectedModule: form.find('[name=\"module_name\"]').val()\n\t\t}).done(function (response) {\n\t\t\tpanel.html(response);\n\t\t\tthisInstance.afterLoadVariablePanel(panel);\n\t\t}).fail(function () {\n\t\t\tpanel.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\tafterLoadVariablePanel: function (html) {\n\t\tApp.Fields.Picklist.showSelect2ElementView(html.find('select.select2'));\n\t},\n\tregisterVariablePanelEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (typeof form === \"undefined\") {\n\t\t\tform = this.getForm();\n\t\t}\n\t\tform.find('.js-toggle-panel[data-label=\"LBL_CONTENT_MAIL\"] .blockContent').prepend('<div id=\"variablePanel\" class=\"row px-0 borderBottom bc-gray-lighter\"></div>');\n\t\tthisInstance.loadVariablePanel(form);\n\t\tform.find('[name=\"module_name\"]').on('change', function (e) {\n\t\t\tthisInstance.loadVariablePanel(form);\n\t\t});\n\t},\n\tregisterBasicEvents: function (container) {\n\t\tthis._super(container);\n\t\tthis.registerVariablePanelEvent(container);\n\t\tApp.Fields.Text.registerCopyClipboard(container);\n\t}\n});\n"],"names":["Vtiger_Edit_Js","loadVariablePanel","form","getForm","find","panel","progressIndicator","AppConnector","request","module","record","app","getRecordId","view","type","selectedModule","val","done","response","html","thisInstance","afterLoadVariablePanel","fail","mode","App","Fields","Picklist","showSelect2ElementView","registerVariablePanelEvent","prepend","on","registerBasicEvents","container","_super","Text","registerCopyClipboard"],"mappings":";;AAGAA,eAAe,wBAAf,CAAyC,EAAzC,CAA6C,CAE5CC,kBAAmB,WAAUC,CAAV,CAAgB,CAClC,MAAmB,IAAnB,CACoB,WAAhB,UAF8B,GAGjCA,EAAO,KAAKC,OAAL,EAH0B,EAKlC,MAAYD,EAAKE,IAAL,CAAU,gBAAV,CAAZ,CACAC,EAAMC,iBAAN,EANkC,CAOlCC,aAAaC,OAAb,CAAqB,CACpBC,OAAQ,gBADY,CAEpBC,OAAQC,IAAIC,WAAJ,EAFY,CAGpBC,KAAM,eAHc,CAIpBC,KAAM,MAJc,CAKpBC,eAAgBb,EAAKE,IAAL,CAAU,wBAAV,EAAkCY,GAAlC,EALI,CAArB,EAMGC,IANH,CAMQ,SAAUC,CAAV,CAAoB,CAC3Bb,EAAMc,IAAN,CAAWD,CAAX,CAD2B,CAE3BE,EAAaC,sBAAb,CAAoChB,CAApC,EACA,CATD,EASGiB,IATH,CASQ,UAAY,CACnBjB,EAAMC,iBAAN,CAAwB,CAACiB,KAAM,MAAP,CAAxB,EACA,CAXD,EAYA,CArB2C,CAsB5CF,uBAAwB,WAAUF,CAAV,CAAgB,CACvCK,IAAIC,MAAJ,CAAWC,QAAX,CAAoBC,sBAApB,CAA2CR,EAAKf,IAAL,CAAU,gBAAV,CAA3C,EACA,CAxB2C,CAyB5CwB,2BAA4B,WAAU1B,CAAV,CAAgB,CAC3C,MAAmB,IAAnB,CACoB,WAAhB,UAFuC,GAG1CA,EAAO,KAAKC,OAAL,EAHmC,EAK3CD,EAAKE,IAAL,CAAU,iEAAV,EAA2EyB,OAA3E,CAAmF,kFAAnF,CAL2C,CAM3CT,EAAanB,iBAAb,CAA+BC,CAA/B,CAN2C,CAO3CA,EAAKE,IAAL,CAAU,wBAAV,EAAkC0B,EAAlC,CAAqC,QAArC,CAA+C,UAAa,CAC3DV,EAAanB,iBAAb,CAA+BC,CAA/B,EACA,CAFD,EAGA,CAnC2C,CAoC5C6B,oBAAqB,WAAUC,CAAV,CAAqB,CACzC,KAAKC,MAAL,CAAYD,CAAZ,CADyC,CAEzC,KAAKJ,0BAAL,CAAgCI,CAAhC,CAFyC,CAGzCR,IAAIC,MAAJ,CAAWS,IAAX,CAAgBC,qBAAhB,CAAsCH,CAAtC,EACA,CAxC2C,CAA7C"}