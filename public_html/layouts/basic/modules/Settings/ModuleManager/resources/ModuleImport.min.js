'use strict';

jQuery.Class('Settings_Module_Import_Js',{},{getImportModuleStep1Params:function b(){var a={module:app.getModuleName(),parent:app.getParentModuleName(),view:'ModuleImport'};return a},getImportModuleStepView:function d(a){var b=jQuery.Deferred(),c=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});return AppConnector.request(a).done(function(a){c.progressIndicator({mode:'hide'}),b.resolve(a);}).fail(function(a){c.progressIndicator({mode:'hide'}),b.reject(a);}),b.promise()},registerEventForStep1:function b(){var a=jQuery('.contentsDiv');app.showScrollBar(jQuery('.extensionDescription'),{height:'120px',width:'100%',railVisible:!0}),this.registerEventsForImportModuleStep1(a);},registerEventsForImportModuleStep1:function c(a){var b=this;jQuery(a).find('.installExtension').on('click',function(a){var c=jQuery(a.currentTarget),d=c.closest('.extension_container'),e=d.find('[name="extensionId"]').val(),f=d.find('[name="moduleAction"]').val(),g=d.find('[name="extensionName"]').val(),h={module:app.getModuleName(),parent:app.getParentModuleName(),view:'ModuleImport',mode:'step2',extensionId:e,moduleAction:f,extensionName:g};b.getImportModuleStepView(h).done(function(a){var c=jQuery('.contentsDiv');c.html(a),app.showScrollBar(jQuery('#extensionLicense'),{height:'auto'}),b.registerEventsForImportModuleStep2(c);});});},registerEventsForImportModuleStep2:function c(a){a=jQuery(a);var b=this;a.find('#installExtension').on('click',function(){var c=jQuery('[name="extensionId"]').val(),d=jQuery('[name="targetModule"]').val(),e=jQuery('[name="moduleType"]').val(),f=jQuery('[name="moduleAction"]').val(),g=jQuery('[name="fileName"]').val(),h={module:app.getModuleName(),parent:app.getParentModuleName(),view:'ModuleImport',mode:'step3',extensionId:c,moduleAction:f,targetModule:d,moduleType:e,fileName:g};b.getImportModuleStepView(h).done(function(b){app.showModalWindow({data:b,unblockcb:function b(){a.find('#declineExtension').trigger('click');},css:{width:'60%',height:'40%'},cb:function d(b){var c=jQuery(b).find('[name="installationStatus"]').val();'success'==c&&jQuery('#installExtension').remove(),app.showScrollBar(jQuery('#installationLog'),{height:'150px'}),jQuery(b).find('#importCompleted').on('click',function(){a.find('#declineExtension').trigger('click');});}});});}),a.find('#declineExtension').on('click',function(){var a=b.getImportModuleStep1Params();b.getImportModuleStepView(a).done(function(a){var c=jQuery('.contentsDiv');c.html(a),b.registerEventForStep1();});});},registerEvents:function a(){this.registerEventForStep1();}}),jQuery(document).ready(function(){var a=new Settings_Module_Import_Js;a.registerEvents();});
//# sourceMappingURL=ModuleImport.min.js.map
