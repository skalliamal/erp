'use strict';

jQuery.Class('Settings_Dav_Keys_Js',{},{mobileContainer:!1,getContainer:function a(){return !1==this.mobileContainer&&(this.mobileContainer=jQuery('#DavKeysContainer')),this.mobileContainer},addKey:function e(){var a=jQuery('#DavKeysContainer'),b=a.find('.addKeyContainer'),c=b.clone(!0,!0),d=function(a){a.find('.addKeyContainer').removeClass('d-none').show(),App.Fields.Picklist.showSelect2ElementView(a.find('.select')),a.find('[name="saveButton"]').on('click',function(){var b=a.find('form'),c=b.serializeFormData(),d=$.progressIndicator({message:app.vtranslate('Adding a Key'),blockInfo:{enabled:!0}}),e=new Settings_Dav_Keys_Js;e.registerSaveEvent('addKey',c,!0),d.progressIndicator({mode:'hide'});});};app.showModalWindow(c,function(a){'function'==typeof d&&d(a);},{width:'1000px'});},deleteKey:function e(a){var b=$(a.currentTarget),c=b.closest('.js-tr-row'),d=new Settings_Dav_Keys_Js;d.registerSaveEvent('deleteKey',{user:c.data('user')}),c.remove();},registerSaveEvent:function f(a,b,c){var d={data:{module:app.getModuleName(),parent:app.getParentModuleName(),action:'SaveAjax',mode:a}};if('undefined'!=typeof b)for(var e in b)d.data[e]=b[e];d.async=!1,d.dataType='json',AppConnector.request(d).done(function(a){var b=a.result,d={text:b.message};d.type=!0==b.success?'success':'error',Vtiger_Helper_Js.showPnotify(d),!0==c&&!0==b.success&&window.location.reload();}).fail(function(){});},registerEvents:function c(){var a=this,b=a.getContainer();b.find('.js-add-key').on('click',a.addKey),b.find('.js-delete-key').on('click',a.deleteKey),App.Fields.Text.registerCopyClipboard(b);}});
//# sourceMappingURL=Dav.min.js.map
