{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce Sp. z o.o.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_CronTasks_List_Js\", {\n\ttriggerEditEvent: function (editUrl) {\n\t\tAppConnector.request(editUrl).done(function (data) {\n\t\t\tapp.showModalWindow(data);\n\t\t\tjQuery('#cronJobSaveAjax').validationEngine(app.validationEngineOptions);\n\t\t\tvar listViewInstance = Settings_CronTasks_List_Js.getInstance();\n\t\t\tlistViewInstance.registerSaveEvent();\n\t\t});\n\t}\n}, {\n\n\tgetListViewRecords: function () {\n\t\tvar thisInstance = this;\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'List'\n\t\t}\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tjQuery('#listViewContents').html(data);\n\t\t\tthisInstance.registerSortableEvent();\n\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\tmode: 'hide'\n\t\t\t});\n\t\t})\n\t},\n\n\tregisterSaveEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#cronJobSaveAjax').on('submit', function (e) {\n\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\tvar validationResult = form.validationEngine('validate');\n\t\t\tif (validationResult == true) {\n\t\t\t\tvar timeFormat = jQuery('#time_format').val();\n\t\t\t\tvar frequencyElement = jQuery('#frequencyValue')\n\t\t\t\tif (timeFormat == 'hours') {\n\t\t\t\t\tvar frequencyValue = frequencyElement.val() * 60 * 60;\n\t\t\t\t} else {\n\t\t\t\t\tfrequencyValue = frequencyElement.val() * 60;\n\t\t\t\t}\n\t\t\t\tvar message = app.vtranslate('JS_VALUE_SHOULD_NOT_BE_LESS_THAN');\n\t\t\t\tvar minimumFrequency = jQuery('#minimumFrequency').val();\n\t\t\t\tvar minutes = app.vtranslate('JS_MINUTES');\n\t\t\t\tif (frequencyValue < minimumFrequency) {\n\t\t\t\t\tfrequencyElement.validationEngine('showPrompt', message + ' ' + (minimumFrequency / 60) + ' ' + minutes, 'error');\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tjQuery('#frequency').val(frequencyValue);\n\t\t\t\t}\n\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tif (typeof data.result !== \"undefined\" && data.result[0] == true) {\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\n\tregisterSortableEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar sequenceList = {};\n\t\tvar tbody = jQuery(\"tbody\", jQuery('.listViewEntriesTable'));\n\t\ttbody.sortable({\n\t\t\t'helper': function (e, ui) {\n\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t//look like distrubed\n\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\telement = jQuery(element);\n\t\t\t\t\telement.width(element.width());\n\t\t\t\t})\n\t\t\t\treturn ui;\n\t\t\t},\n\t\t\t'containment': tbody,\n\t\t\t'revert': true,\n\t\t\tupdate: function (e, ui) {\n\t\t\t\tjQuery('tbody tr').each(function (i) {\n\t\t\t\t\tsequenceList[++i] = jQuery(this).data('id');\n\t\t\t\t});\n\t\t\t\tvar params = {\n\t\t\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'UpdateSequence'\n\t\t\t\t}\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tthisInstance.getListViewRecords();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Register events\n\t * @returns {undefined}\n\t */\n\tregisterEvents: function () {\n\t\tthis.registerSortableEvent();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","triggerEditEvent","editUrl","AppConnector","request","done","data","app","showModalWindow","jQuery","validationEngine","validationEngineOptions","Settings_CronTasks_List_Js","getInstance","listViewInstance","registerSaveEvent","getListViewRecords","params","module","getModuleName","parent","getParentModuleName","view","progressIndicatorElement","progressIndicator","html","thisInstance","registerSortableEvent","mode","on","e","currentTarget","validationResult","form","val","frequencyElement","vtranslate","minimumFrequency","minutes","frequencyValue","message","preventDefault","serializeFormData","result","hideModalWindow","sequenceList","tbody","sortable","ui","children","each","index","element","width","update","i","sequencesList","JSON","stringify","action","registerEvents"],"mappings":"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"}