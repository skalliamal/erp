{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_Workflows_List_Js\", {\n\n\ttriggerCreate: function (url) {\n\t\tvar selectedModule = jQuery('#moduleFilter').val();\n\t\tif (selectedModule.length > 0) {\n\t\t\turl += '&source_module=' + selectedModule\n\t\t}\n\t\twindow.location.href = url;\n\t},\n\n\tsetChangeStatusTasks: function (e, recordId, status) {\n\t\tvar changeButtonType = jQuery(e);\n\t\tvar container = jQuery(e).closest('tr');\n\t\tvar message = app.vtranslate('LBL_STATUS_CONFIRMATION');\n\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\tvar module = app.getModuleName();\n\t\t\tvar postData = {\n\t\t\t\t\"module\": module,\n\t\t\t\t\"action\": \"TaskAjax\",\n\t\t\t\t\"mode\": \"changeStatusAllTasks\",\n\t\t\t\t\"record\": recordId,\n\t\t\t\t\"status\": status,\n\t\t\t\t\"parent\": app.getParentModuleName()\n\t\t\t}\n\t\t\tvar deleteMessage = app.vtranslate('JS_TASKS_STATUS_GETTING_CHANGED');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'message': deleteMessage,\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(postData).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t'mode': 'hide'\n\t\t\t\t})\n\t\t\t\tif (data.success) {\n\t\t\t\t\tvar count = data.result.count;\n\t\t\t\t\tvar element = container.find('[data-name=\"active_tasks\"]');\n\t\t\t\t\tchangeButtonType.hide();\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\telement.html('&nbsp;' + count);\n\t\t\t\t\t\tchangeButtonType.closest('td').find('.deactiveTasks').show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.html('&nbsp;0');\n\t\t\t\t\t\tchangeButtonType.closest('td').find('.activeTasks').show();\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION')\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n}, {\n\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\n\t/*\n\t * Function to register the list view row click event\n\t */\n\tregisterRowClickEvent: function () {\n\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\tlistViewContentDiv.on('click', '.listViewEntries', function (e) {\n\t\t\tvar editUrl = jQuery(e.currentTarget).find('.fa-edit').closest('a').attr('href');\n\t\t\twindow.location.href = editUrl;\n\t\t});\n\t},\n\n\tgetDefaultParams: function () {\n\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\tvar module = app.getModuleName();\n\t\tvar parent = app.getParentModuleName();\n\t\tvar params = {\n\t\t\t'module': module,\n\t\t\t'parent': parent,\n\t\t\t'page': pageNumber,\n\t\t\t'view': \"List\",\n\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t};\n\t\treturn params;\n\t},\n\tregisterImportTemplate: function () {\n\t\tjQuery('#importButton').on('click', function () {\n\t\t\twindow.location.href = jQuery(this).data('url');\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.registerImportTemplate();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","triggerCreate","url","jQuery","val","length","selectedModule","window","location","href","setChangeStatusTasks","e","recordId","status","container","closest","message","app","vtranslate","Vtiger_Helper_Js","showConfirmationBox","done","getModuleName","postData","module","getParentModuleName","deleteMessage","progressIndicatorElement","progressIndicator","AppConnector","request","data","success","result","count","element","find","changeButtonType","hide","html","show","text","error","title","showPnotify","params","registerFilterChangeEvent","on","parent","sourceModule","currentTarget","thisInstance","getListViewRecords","updatePagination","registerRowClickEvent","getListViewContentContainer","listViewContentDiv","attr","editUrl","getDefaultParams","pageNumber","registerImportTemplate","registerEvents","_super"],"mappings":"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"}