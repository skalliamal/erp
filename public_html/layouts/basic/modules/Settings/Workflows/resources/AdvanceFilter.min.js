'use strict';

Vtiger_AdvanceFilter_Js('Workflows_AdvanceFilter_Js',{},{validationSupportedFieldConditionMap:{email:['e','n'],date:['is'],datetime:['is']},allConditionValidationNeededFieldList:['double','integer'],comparatorsWithNoValueBoxMap:['has changed','is empty','is not empty','is added','is Watching Record','is Not Watching Record'],getFieldSpecificType:function d(a){var b=a.data('fieldinfo'),c=b.type;return c},getModuleName:function a(){return app.getModuleName()},addNewCondition:function e(a){var b=jQuery('.basic',a),c=b.find('.js-conditions-row').clone(!0,!0);jQuery('select',c).addClass('chzn-select');var d=jQuery('.conditionList',a);return d.append(c),App.Fields.Picklist.changeSelectElementView(c),c.find('[name="columnname"]').find('optgroup:first option:first').attr('selected','selected').trigger('chosen:updated').trigger('change'),this},loadConditions:function n(a){var b=a.closest('div.js-conditions-row'),c=b.find('select[name="comparator"]'),d=c.val(),e=a.find('option:selected'),f=e.val(),g=f.match(/\((\w+)\) (\w+)/),h=this.getFieldSpecificType(e),i=this.getConditionListFromType(h);'undefined'==typeof i&&(i={},i.none='None');var j='';for(var k in i)if(i.hasOwnProperty(k)){var l=i[k],m=this.getConditionLabel(l);null==g?(j+='<option value="'+l+'"',l==d&&(j+=' selected="selected" '),j+='>'+m+'</option>'):'has changed'!=l&&(j+='<option value="'+l+'"',l==d&&(j+=' selected="selected" '),j+='>'+m+'</option>');}return c.empty().html(j).trigger('chosen:updated'),c},getValues:function g(){var a=this,b=this.getFilterContainer(),c=new Array('columnname','comparator','value','valuetype','column_condition'),d={},e=0,f=jQuery('.conditionGroup',b);return f.each(function(b,g){var h=jQuery(g),i=jQuery('.conditionList .js-conditions-row',h);if(0>=i.length)return !0;var j={};i.each(function(d,f){var g=jQuery(f),h=jQuery('[name="columnname"]',g),k=jQuery('[data-value="value"]',g);if(a.isEmptyFieldSelected(h))return !0;var l=h.find('option:selected').data('fieldinfo'),m=l.type,n={};if(-1<$.inArray(m,['picklist','multipicklist','multiReferenceValue']))for(var o in c){var p=c[o];if('value'==p&&k.is('input')){var q=k.val(),r=k.data('picklistvalues'),s=q.split(','),t=[];for(d=0;d<s.length;d++)'undefined'==typeof r[s[d]]?t.push(s[d]):t.push(r[s[d]]);var u=t.join(',');n[p]=u;}else if('value'==p&&k.is('select')&&'picklist'==m)n[p]=k.val();else if('value'==p&&k.is('select')&&-1<$.inArray(m,['multipicklist','multiReferenceValue'])){var v=k.val();n[p]=null==v?v:v.join(',');}else n[p]=jQuery('[name="'+p+'"]',g).val();}else for(var o in c){var p=c[o];n[p]='value'==p?k.val():jQuery('[name="'+p+'"]',g).val();}('false'==jQuery('[name="valuetype"]',g).val()||0==jQuery('[name="valuetype"]',g).length)&&(n.valuetype='rawtext'),n.groupid='0'==b?'0':'1',g.is(':last-child')&&(n.column_condition=''),j[e]=n,e++;}),jQuery.isEmptyObject(j)||(d[b+1]={},d[b+1].columns=j),0<h.find('div.groupCondition').length&&!jQuery.isEmptyObject(d[b+1])&&(d[b+1].condition=f.find('div.groupCondition [name="condition"]').val());}),d},getFieldSpecificUi:function d(a){var b=a.find('option:selected'),c=b.data('fieldinfo');return -1==jQuery.inArray(c.comparatorElementVal,this.comparatorsWithNoValueBoxMap)?this._super(a):jQuery('')}}),Vtiger_Field_Js('Workflows_Field_Js',{},{getUiTypeSpecificHtml:function b(){var a=this.getUiTypeModel();return a.getUi()},getModuleName:function b(){var a=app.getModuleName();return a},getUi:function b(){var a='<input type="text" class="getPopupUi form-control" name="'+this.getName()+'"  /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />';return a=jQuery(a),a.filter('.getPopupUi').val(app.htmlDecode(this.getValue())),this.addValidationToElement(a)}}),Vtiger_Date_Field_Js('Workflows_Date_Field_Js',{},{getDateFormat:function a(){return this.get('date-format')},getUi:function g(){var a=this.get('comparatorElementVal'),b=this.get('dateSpecificConditions');if(0<a.length){if('between'==a||'custom'==a){var c='<div class="date"><input class="dateRangeField" data-calendar-type="range" name="'+this.getName()+'" data-date-format="'+this.getDateFormat()+'" type="text" ReadOnly="true" value="'+this.getValue()+'"></div>',d=jQuery(c);return this.addValidationToElement(d)}if(this._specialDateComparator(a)){var c='<input name="'+this.getName()+'" type="text" value="'+this.getValue()+'" data-validation-engine="validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]" data-validator="[{"name":"PositiveNumber"}]">\n\t\t\t\t\t\t\t<input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />';return jQuery(c)}if(a in b){var e=b[a].startdate,f=b[a].enddate,c='<input name="'+this.getName()+'"  type="text" ReadOnly="true" value="'+e+','+f+'">';return jQuery(c)}if('is today'==a);else return this._super()}else{var c='<input type="text" class="getPopupUi date form-control" name="'+this.getName()+'"  data-date-format="'+this.getDateFormat()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',d=jQuery(c);return this.addValidationToElement(d)}},_specialDateComparator:function d(a){var b=['less than days ago','more than days ago','in less than','in more than','days ago','days later'];for(var c in b)if(a==b[c])return !0;return !1}}),Vtiger_Date_Field_Js('Workflows_Datetime_Field_Js',{},{getDateFormat:function a(){return this.get('date-format')},getUi:function d(){var a=this.get('comparatorElementVal');if(this._specialDateTimeComparator(a))var b='<input name="'+this.getName()+'" type="text" value="'+this.getValue()+'" data-validator="[{name:PositiveNumber}]"><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',c=jQuery(b);else var b='<input type="text" class="getPopupUi date form-control" name="'+this.getName()+'"  data-date-format="'+this.getDateFormat()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',c=jQuery(b);return c},_specialDateTimeComparator:function d(a){var b=['less than hours before','less than hours later','more than hours later','more than hours before'];for(var c in b)if(a==b[c])return !0;return !1}}),Vtiger_Currency_Field_Js('Workflows_Currency_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi marginLeftZero form-control" name="'+this.getName()+'" value="'+this.getValue()+'"  /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Time_Field_Js('Workflows_Time_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi time form-control" name="'+this.getName()+'"  value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Percentage_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi form-control" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Text_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi form-control" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Field_Js('Vtiger_Boolean_Field_Js',{},{getUi:function c(){var a='<input type="text" class="getPopupUi form-control boolean" name="'+this.getName()+'" value="'+this.getValue()+'" /><input type="hidden" name="valuetype" value="'+this.get('workflow_valuetype')+'" />',b=jQuery(a);return this.addValidationToElement(b)}}),Vtiger_Owner_Field_Js('Workflows_Owner_Field_Js',{},{getUi:function h(){var a='<select class="chzn-select" data-value="value" name="'+this.getName()+'">',b=this.getPickListValues(),c=this.getValue();for(var d in b){a+='<optgroup label="'+d+'">';var e=b[d];for(var f in e)a+='<option value="'+f+'" ',f==c&&(a+=' selected '),a+='>'+e[f]+'</option>';a+='</optgroup>';}a+='</select>';var g=jQuery(a);return this.addValidationToElement(g),g}}),Workflows_Owner_Field_Js('Workflows_Sharedowner_Field_Js',{},{}),Vtiger_Picklist_Field_Js('Workflows_Picklist_Field_Js',{},{});
//# sourceMappingURL=AdvanceFilter.min.js.map
