'use strict';

Settings_Workflows_Edit_Js("Settings_Workflows_Edit2_Js",{},{step2Container:!1,advanceFilterInstance:!1,init:function a(){this.initialize();},getContainer:function a(){return this.step2Container},setContainer:function b(a){return this.step2Container=a,this},initialize:function b(a){"undefined"==typeof a&&(a=jQuery("#workflow_step2")),a.is("#workflow_step2")?this.setContainer(a):this.setContainer(jQuery("#workflow_step2"));},calculateValues:function c(){var a=jQuery("#enableAdvanceFilters");if(0<a.length&&!1==a.is(":checked"))jQuery("#advanced_filter").val(jQuery("#olderConditions").val());else{jQuery("[name=\"filtersavedinnew\"]").val("6");var b=this.advanceFilterInstance.getValues();jQuery("#advanced_filter").val(JSON.stringify(b));}},submit:function e(){var a=jQuery.Deferred(),b=this.getContainer();this.calculateValues();var c=b.serializeFormData(),d=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});return AppConnector.request(c).done(function(c){if(b.hide(),c.result){Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_WORKFLOW_SAVED_SUCCESSFULLY")});var e=jQuery("[name=\"record\"]",b);""==e.val()&&e.val(c.result.id);var f={module:app.getModuleName(),parent:app.getParentModuleName(),view:"Edit",mode:"step3",record:c.result.id};AppConnector.request(f).done(function(b){a.resolve(b);});}d.progressIndicator({mode:"hide"});}),a.promise()},registerEnableFilterOption:function a(){jQuery("[name=\"conditionstype\"]").on("change",function(a){var b=jQuery("#advanceFilterContainer"),c=jQuery(a.currentTarget);c.hasClass("recreate")?c.is(":checked")&&b.removeClass("zeroOpacity"):b.addClass("zeroOpacity");});},registerEvents:function c(){var a=app.validationEngineOptions;a.onValidationComplete=function(a,b){return b},a.promptPosition="bottomRight",jQuery("#workflow_step2").validationEngine(a);var b=this.getContainer();jQuery("button[type=\"submit\"]",b).on("click",function(){for(var a=jQuery(".fieldUiHolder"),b=0;b<a.length;b++){var c=a[b],d=jQuery(".getPopupUi",c),e=jQuery("[name=\"valuetype\"]",c).val();"rawtext"!=e&&(d.removeAttr("data-validation-engine"),d.removeClass("validate[funcCall[Vtiger_Base_Validator_Js.invokeValidation]]"));}}),App.Fields.Picklist.changeSelectElementView(b),this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(jQuery(".filterContainer",b)),this.getPopUp(),"5"==jQuery("[name=\"filtersavedinnew\"]",b).val()&&this.registerEnableFilterOption();}});
//# sourceMappingURL=Edit2.min.js.map
