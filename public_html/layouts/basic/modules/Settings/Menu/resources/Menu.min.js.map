{"version":3,"file":"Menu.min.js","sources":["Menu.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Menu_Index_Js', {}, {\n\ttreeInstance: false,\n\tloadMenuTree: function () {\n\t\tvar thisInstance = this;\n\t\tif (thisInstance.treeInstance == false) {\n\t\t\tvar data = JSON.parse($('#treeValues').val());\n\t\t\tif (data.length == 0) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: app.vtranslate('JS_NO_DATA')});\n\t\t\t}\n\t\t\tthisInstance.treeInstance = $(\"#treeContent\");\n\t\t\tthisInstance.treeInstance.jstree({\n\t\t\t\tcore: {\n\t\t\t\t\tdata: data,\n\t\t\t\t\tcheck_callback: true,\n\t\t\t\t},\n\t\t\t\tcontextmenu: {\n\t\t\t\t\titems: {\n\t\t\t\t\t\trename: {\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_EDIT'),\n\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\tvar inst = $.jstree.reference(data.reference);\n\t\t\t\t\t\t\t\tvar id = inst.get_selected();\n\t\t\t\t\t\t\t\tvar menu = inst.get_node(id);\n\t\t\t\t\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\t\t\t\t\tapp.showModalWindow(null, \"index.php?module=Menu&parent=Settings&view=EditMenu&id=\" + id, function (container) {\n\t\t\t\t\t\t\t\t\tthisInstance.registerEditMenu(container);\n\t\t\t\t\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tremove: {\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_REMOVE'),\n\t\t\t\t\t\t\taction: function (data) {\n\t\t\t\t\t\t\t\tvar inst = $.jstree.reference(data.reference);\n\t\t\t\t\t\t\t\tvar ids = inst.get_selected();\n\t\t\t\t\t\t\t\tvar showInfo = false;\n\t\t\t\t\t\t\t\tfor (var i in ids) {\n\t\t\t\t\t\t\t\t\tvar menu = inst.get_node(ids[i]);\n\t\t\t\t\t\t\t\t\tif (menu.children.length > 0) {\n\t\t\t\t\t\t\t\t\t\tshowInfo = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (showInfo) {\n\t\t\t\t\t\t\t\t\tvar modal = $('.modal.deleteAlert').clone(true, true);\n\t\t\t\t\t\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\t\t\t\t\t\tdata.find('.deleteAlert').removeClass('d-none');\n\t\t\t\t\t\t\t\t\t\tdata.find('.btn-danger').on('click', function (e) {\n\t\t\t\t\t\t\t\t\t\t\tthisInstance.removeMenu(ids, inst);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tapp.showModalWindow(modal, function (data) {\n\t\t\t\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthisInstance.removeMenu(ids, inst);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tplugins: [\"contextmenu\", \"dnd\", \"search\", \"state\", \"types\"]\n\t\t\t});\n\t\t}\n\t\tthisInstance.registerMenuChanges();\n\t\treturn this.treeInstance;\n\t},\n\tregisterMenuChanges: function () {\n\t\tvar thisInstance = this;\n\t\tthisInstance.treeInstance.on('move_node.jstree', function (obj) {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tvar json = thisInstance.treeInstance.jstree(\"get_json\");\n\t\t\tvar menus = thisInstance.getChildrenMenu(json, 0);\n\t\t\tthisInstance.save('updateSequence', JSON.stringify(menus)).done(function (data) {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\tthisInstance.loadContent();\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t})\n\t},\n\tgetChildrenMenu: function (childrens, parent) {\n\t\tvar menus = [];\n\t\tvar thisInstance = this;\n\t\tvar roleMenu = $('[name=\"roleMenu\"]').val()\n\t\t$.each(childrens, function (key, value) {\n\t\t\tvar menu = {i: value.id, s: key, p: parent, r: roleMenu};\n\t\t\tif (value.children.length > 0) {\n\t\t\t\tmenu.c = thisInstance.getChildrenMenu(value.children, value.id);\n\t\t\t}\n\t\t\tmenus.push(menu);\n\t\t});\n\t\treturn menus;\n\t},\n\tregisterChangeRoleMenu: function () {\n\t\tvar thisInstance = this;\n\t\t$('.menuConfigContainer').on('change', '[name=\"roleMenu\"]', function (e) {\n\t\t\tthisInstance.loadContent();\n\t\t});\n\t},\n\tgetMenuData: function (selectedRole) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['view'] = app.getViewName();\n\t\tparams['roleid'] = selectedRole;\n\t\tAppConnector.requestPjax(params).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error) {\n\t\t\taDeferred.reject();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterAddMenu: function () {\n\t\tvar thisInstance = this;\n\t\t$('.addMenu').on('click', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Menu&parent=Settings&view=CreateMenu&mode=step1\", function (container) {\n\t\t\t\tthisInstance.registerStep1(container);\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tloadContent: function () {\n\t\tvar progress = jQuery.progressIndicator({\n\t\t\t'position': '#treeContent',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar thisInstance = this;\n\t\tvar contentsDiv = $('.contentsDiv');\n\t\tthisInstance.getMenuData($('[name=\"roleMenu\"]').val()).done(function (data) {\n\t\t\tcontentsDiv.html(data);\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(contentsDiv.find(\"[name='roleMenu']\"));\n\t\t\tthisInstance.registerEvents();\n\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t});\n\t},\n\tregisterEditMenu: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('form').validationEngine(app.validationEngineOptions);\n\t\tthisInstance.registerHotkeys(container);\n\t\tthisInstance.registerHiddenInput(container);\n\t\tthisInstance.registerFilters(container);\n\t\tthisInstance.registerSelectIcons(container);\n\t\tcontainer.find('.saveButton').on('click', function (e) {\n\t\t\tvar form = container.find('form').serializeFormData();\n\t\t\tvar errorExists = container.find('form').validationEngine('validate');\n\t\t\tif (errorExists != false) {\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tthisInstance.save('updateMenu', form).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.loadContent();\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcontainer.find('form').on('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t});\n\t},\n\tregisterStep1: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.nextButton').on('click', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Menu&parent=Settings&view=CreateMenu&mode=step2&mtype=\" + container.find('select.type').val(), function (container) {\n\t\t\t\tthisInstance.registerStep2(container);\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\n\tregisterSelectIcons: function (container) {\n\t\tvar iconSelect = container.find('#selectIconButton');\n\t\tvar icon = container.find('[name=\"icon\"]');\n\t\ticonSelect.on('click', function () {\n\t\t\t$.when(Settings_Vtiger_Index_Js.selectIcon()).done(function (data) {\n\t\t\t\ticon.val(data['name']);\n\t\t\t});\n\t\t});\n\t},\n\tregisterStep2: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('form').validationEngine(app.validationEngineOptions);\n\t\tthisInstance.registerHotkeys(container);\n\t\tthisInstance.registerHiddenInput(container);\n\t\tthisInstance.registerFilters(container);\n\t\tthisInstance.registerSelectIcons(container);\n\t\tapp.showPopoverElementView(jQuery(container).find('.js-popover-tooltip'));\n\t\tcontainer.find('.saveButton').on('click', function (e) {\n\t\t\tvar form = container.find('form').serializeFormData();\n\t\t\tform.role = $('[name=\"roleMenu\"]').val();\n\t\t\tvar errorExists = container.find('form').validationEngine('validate');\n\t\t\tif (errorExists != false) {\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tthisInstance.save('createMenu', form).done(function (data) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.loadContent();\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tcontainer.find('form').on('submit', function (event) {\n\t\t\tevent.preventDefault();\n\t\t});\n\t},\n\tsave: function (mode, data) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['action'] = 'SaveAjax';\n\t\tparams['mode'] = mode;\n\t\tparams['mdata'] = data;\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tremoveMenu: function (id, inst) {\n\t\tvar thisInstance = this;\n\t\tthisInstance.save('removeMenu', id).done(function (data) {\n\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: data.result.message});\n\t\t\tinst.delete_node(id);\n\t\t\tthisInstance.loadContent();\n\t\t});\n\t},\n\tregisterHotkeys: function (container) {\n\t\tcontainer.find('.testBtn').on('click', function (e) {\n\t\t\tvar testBtn = $(this);\n\t\t\tvar key = container.find('[name=\"hotkey\"]').val();\n\t\t\ttestBtn.addClass('active').removeClass('btn-default').addClass('btn-warning');\n\t\t\tMousetrap.bind(key, function () {\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({type: 'success', text: app.vtranslate('JS_TEST_HOTKEY_OK')});\n\t\t\t\ttestBtn.removeClass('btn-warning').addClass('btn-success').removeClass('active');\n\t\t\t\tMousetrap.unbind(key);\n\t\t\t});\n\t\t});\n\t},\n\tregisterHiddenInput: function (container) {\n\t\tif (container.find('#menuType').val() == 'CustomFilter') {\n\t\t\tvar tabid = container.find('select[name=\"dataurl\"] option:selected').data('tabid');\n\t\t\tcontainer.find('[name=\"module\"]').val(tabid);\n\t\t\tcontainer.on('change', 'select[name=\"dataurl\"]', function (e) {\n\t\t\t\tvar tabid = container.find('select[name=\"dataurl\"] option:selected').data('tabid');\n\t\t\t\tcontainer.find('[name=\"module\"]').val(tabid);\n\t\t\t});\n\n\t\t}\n\t},\n\tcacheFilters: false,\n\tregisterFilters: function (container) {\n\t\tvar thisInstance = this;\n\t\tif (container.find('#menuType').val() == 'Module') {\n\t\t\tthisInstance.cacheFilters = container.find('[name=\"filters\"]').clone(true, true);\n\t\t\tcontainer.find('[name=\"module\"]').on('change', function (e) {\n\t\t\t\tthisInstance.loadFilters(container, $(this));\n\t\t\t});\n\t\t\tthisInstance.loadFilters(container, container.find('[name=\"module\"]'));\n\t\t}\n\t},\n\tloadFilters: function (container, module) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('[name=\"filters\"]').html(thisInstance.cacheFilters.html());\n\t\tcontainer.find('[name=\"filters\"] option').each(function (index) {\n\t\t\tif ($(this).data('tabid') != module.val()) {\n\t\t\t\t$(this).remove();\n\t\t\t}\n\t\t});\n\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"filters\"]'), {width: '100%'});\n\t},\n\tregisterModalButton: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = jQuery('.menuConfigContainer');\n\n\t\tcontainer.find('.copyMenu').on('click', function () {\n\n\t\t\tvar myModal = container.find('.copyMenuModal').clone(true, true);\n\t\t\tvar callBackFunction = function (data) {\n\n\t\t\t\tvar selectElement = data.find(\"[name='roles']\");\n\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(selectElement);\n\t\t\t\tvar form = data.find('form');\n\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\t\t\tvar role = currentTarget.find('#roleList');\n\t\t\t\t\tif (role.length && role.val()) {\n\t\t\t\t\t\tthisInstance.copyMenu(role.val());\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t})\n\t\t\t}\n\t\t\tapp.showModalWindow(myModal, function (data) {\n\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t},\n\tcopyMenu: function (fromRole) {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar toRole = $('[name=\"roleMenu\"]').val()\n\t\tvar params = {};\n\t\tparams['module'] = app.getModuleName();\n\t\tparams['parent'] = app.getParentModuleName();\n\t\tparams['action'] = 'SaveAjax';\n\t\tparams['mode'] = 'copyMenu';\n\t\tparams['fromRole'] = fromRole;\n\t\tparams['toRole'] = toRole;\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tapp.hideModalWindow();\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tthisInstance.loadContent();\n\t\t\taDeferred.resolve(data);\n\t\t}).fail(function (error) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\taDeferred.reject(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\n\tregisterEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthisInstance.treeInstance = false;\n\t\tthisInstance.loadMenuTree();\n\t\tthisInstance.registerChangeRoleMenu();\n\t\tthisInstance.registerAddMenu();\n\t\tthisInstance.registerModalButton();\n\t}\n});\n"],"names":["jQuery","Class","treeInstance","loadMenuTree","JSON","parse","$","val","length","Settings_Vtiger_Index_Js","showMessage","text","app","vtranslate","thisInstance","jstree","core","data","check_callback","contextmenu","items","rename","label","action","reference","id","inst","get_selected","menu","get_node","progress","progressIndicator","showModalWindow","container","registerEditMenu","remove","ids","showInfo","i","children","clone","callBackFunction","find","removeClass","on","removeMenu","modal","plugins","registerMenuChanges","json","menus","getChildrenMenu","save","stringify","done","type","result","message","loadContent","childrens","parent","roleMenu","each","key","value","s","p","r","c","push","registerChangeRoleMenu","getMenuData","selectedRole","aDeferred","Deferred","params","getModuleName","getParentModuleName","getViewName","AppConnector","requestPjax","resolve","fail","reject","promise","registerAddMenu","registerStep1","contentsDiv","html","App","Fields","Picklist","showSelect2ElementView","registerEvents","validationEngine","validationEngineOptions","registerHotkeys","registerHiddenInput","registerFilters","registerSelectIcons","serializeFormData","errorExists","form","hideModalWindow","event","preventDefault","registerStep2","icon","iconSelect","when","selectIcon","showPopoverElementView","role","mode","request","textStatus","errorThrown","delete_node","testBtn","addClass","Mousetrap","bind","unbind","tabid","cacheFilters","loadFilters","module","width","registerModalButton","selectElement","e","currentTarget","copyMenu","myModal","fromRole","progressIndicatorElement","toRole","error"],"mappings":"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"}