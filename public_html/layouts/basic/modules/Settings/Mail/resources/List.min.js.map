{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_Mail_List_Js\", {}, {\n\tregisterAcceptanceEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar list = jQuery('.listViewEntriesDiv');\n\t\tlist.on('click', '.acceptanceRecord', function (e) {\n\t\t\tvar elem = this;\n\t\t\tvar id = $(this).closest('tr').data('id');\n\t\t\tvar progressIndicator = jQuery.progressIndicator();\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'acceptanceRecord',\n\t\t\t\tid: id\n\t\t\t}).done(function (data) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message});\n\t\t\t\t$(elem).remove()\n\t\t\t}).fail(function (error) {\n\t\t\t\tprogressIndicator.progressIndicator({'mode': 'hide'});\n\t\t\t});\n\t\t});\n\t},\n\tmassDeleteAction: function () {\n\t\t$('.massDelete').on(\"click\", function () {\n\t\t\tvar listInstance = Settings_Vtiger_List_Js.getInstance();\n\t\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\t\tif (validationResult != true) {\n\t\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\t\tvar message = app.vtranslate('LBL_MASS_DELETE_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'MassDelete';\n\t\t\t\t\tparams['selected_ids'] = selectedIds;\n\t\t\t\t\tvar deleteMessage = app.vtranslate('JS_RECORDS_ARE_GETTING_DELETED');\n\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t'message': deleteMessage,\n\t\t\t\t\t\t'position': 'html',\n\t\t\t\t\t\t'blockInfo': {\n\t\t\t\t\t\t\t'enabled': true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({\n\t\t\t\t\t\t\t'mode': 'hide'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlistInstance.postMassDeleteRecords();\n\t\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\ttext: app.vtranslate(data.error.message),\n\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION')\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\tVtiger_List_Js.clearList();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t\t}\n\t\t});\n\n\t},\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#mailQueueFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t'orderby': jQuery(e.currentTarget).val(),\n\t\t\t\t'page': 1,\n\t\t\t}\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tgetParams: function () {\n\t\tvar listViewContainer = this.getListViewContainer();\n\t\tvar searchParams = {};\n\t\tlistViewContainer.find('input.listSearchContributor, select.listSearchContributor').each(function (i, obj) {\n\t\t\tif ($(obj).val() != null) {\n\t\t\t\tvar column = $(obj).attr(\"name\")\n\t\t\t\tsearchParams[column] = {};\n\t\t\t\tsearchParams[column]['value'] = $(obj).val();\n\t\t\t}\n\t\t});\n\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tpage: 1,\n\t\t\tview: \"List\",\n\t\t\tsearchParams: searchParams\n\t\t}\n\t\treturn params;\n\t},\n\tregisterListSearch: function () {\n\t\tvar thisInstance = this;\n\t\tvar listViewContainer = this.getListViewContainer();\n\t\tlistViewContainer.find('input.listSearchContributor').on('keypress', function (e) {\n\t\t\tif (e.keyCode == 13) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tlistViewContainer.find('[data-trigger=\"listSearch\"]').on('click', function (e) {\n\t\t\tvar params = thisInstance.getParams();\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tregisterListViewSelect: function () {\n\t\tif (app.getMainParams('autoRefreshListOnChange') == '1') {\n\t\t\tvar thisInstance = this;\n\t\t\tvar listViewContainer = this.getListViewContainer();\n\t\t\tlistViewContainer.on('change', '.listViewEntriesTable select', function (e) {\n\t\t\t\tvar params = thisInstance.getParams();\n\t\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.massDeleteAction();\n\t\tthis.registerAcceptanceEvent();\n\t\tthis.registerListSearch();\n\t\tthis.registerListViewSelect();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","registerAcceptanceEvent","thisInstance","list","jQuery","on","id","$","closest","data","progressIndicator","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","done","Settings_Vtiger_Index_Js","showMessage","text","result","message","elem","remove","fail","massDeleteAction","getInstance","validationResult","listInstance","checkListRecordSelected","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","vtranslate","Vtiger_Helper_Js","showConfirmationBox","selectedIds","deleteMessage","progressIndicatorElement","params","postMassDeleteRecords","error","showPnotify","title","Vtiger_List_Js","clearList","noRecordSelectedAlert","registerFilterChangeEvent","e","val","currentTarget","getListViewRecords","updatePagination","getParams","getListViewContainer","searchParams","listViewContainer","find","each","i","obj","attr","column","page","view","registerListSearch","keyCode","registerListViewSelect","getMainParams","registerEvents","_super"],"mappings":"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"}