'use strict';

jQuery.Class('Settings_CurrencyUpdate_Index_Js',{},{registerInfoButton:function b(a){a.find('#supportedCurrencies').on('click',function(){jQuery('#infoBlock').toggleClass('d-none');});},registerAlertButton:function b(a){a.find('#unsupportedCurrencies').on('click',function(){a.find('#alertBlock').toggleClass('d-none');});},registerBankChange:function b(a){a.find('#bank').on('change',function(){var b=a.find('#bank option:selected').data('name');a.find('#alertSpan').html(''),a.find('#infoSpan').html('');var c=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}}),d={};d.data={parent:app.getParentModuleName(),module:app.getModuleName(),action:'GetBankCurrencies',mode:'supported',name:b},d.dataType='json',AppConnector.request(d).done(function(b){var c=b.result,d='';for(var e in c)d+='<p><strong>'+e+'</strong> - '+c[e]+'</p>';a.find('#infoSpan').html(d);}),d.data={parent:app.getParentModuleName(),module:app.getModuleName(),action:'GetBankCurrencies',mode:'unsupported',name:b},d.dataType='json',AppConnector.request(d).done(function(b){var c=b.result;jQuery.isEmptyObject(c)?(!a.find('#unsupportedCurrencies').hasClass('d-none')&&a.find('#unsupportedCurrencies').addClass('d-none'),!a.find('#alertBlock').hasClass('d-none')&&a.find('#alertBlock').addClass('d-none')):a.find('#unsupportedCurrencies').removeClass('d-none');var d='';for(var e in c)d+='<p><strong>'+e+'</strong> - '+c[e]+'</p>';a.find('#alertSpan').html(d);});var e=jQuery('#bank option:selected').val();d.data={parent:app.getParentModuleName(),module:app.getModuleName(),action:'SaveActiveBank',id:e},d.dataType='json',AppConnector.request(d).done(function(a){var b=a.result;if(b.success){var d={text:b.message,type:'success'};Vtiger_Helper_Js.showPnotify(d);}else{var d={text:b.message,hide:!1,type:'error'};Vtiger_Helper_Js.showPnotify(d);}c.progressIndicator({mode:'hide'});});});},registerEvents:function b(){var a=jQuery('#currencyUpdateContainer');App.Fields.Date.register('#datepicker',!1,{}),this.registerInfoButton(a),this.registerAlertButton(a),this.registerBankChange(a);}});
//# sourceMappingURL=Index.min.js.map
