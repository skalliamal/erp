{"version":3,"file":"Edit.min.js","sources":["Edit.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_Edit_Js(\"Settings_PDF_Edit_Js\", {\n\tinstance: {}\n\n}, {\n\tcurrentInstance: false,\n\teditContainer: false,\n\tinit: function () {\n\t\tthis.initiate();\n\t},\n\t/**\n\t * Function to get the container which holds all the workflow elements\n\t * @return jQuery object\n\t */\n\tgetContainer: function () {\n\t\treturn this.editContainer;\n\t},\n\t/**\n\t * Function to set the reports container\n\t * @params : element - which represents the workflow container\n\t * @return : current instance\n\t */\n\tsetContainer: function (element) {\n\t\tthis.editContainer = element;\n\t\treturn this;\n\t},\n\t/*\n\t * Function to return the instance based on the step of the Workflow\n\t */\n\tgetInstance: function (step) {\n\t\tif (step in Settings_PDF_Edit_Js.instance) {\n\t\t\treturn Settings_PDF_Edit_Js.instance[step];\n\t\t} else {\n\t\t\tvar moduleClassName = 'Settings_PDF_Edit' + step + '_Js';\n\t\t\tSettings_PDF_Edit_Js.instance[step] = new window[moduleClassName]();\n\t\t\treturn Settings_PDF_Edit_Js.instance[step]\n\t\t}\n\t},\n\t/*\n\t * Function to get the value of the step\n\t * returns 1 or 2 or 3\n\t */\n\tgetStepValue: function () {\n\t\tvar container = this.currentInstance.getContainer();\n\t\treturn jQuery('.step', container).val();\n\t},\n\t/*\n\t * Function to initiate the step 1 instance\n\t */\n\tinitiate: function (container) {\n\t\tif (typeof container === \"undefined\") {\n\t\t\tcontainer = jQuery('.pdfTemplateContents');\n\t\t}\n\t\tif (container.is('.pdfTemplateContents')) {\n\t\t\tthis.setContainer(container);\n\t\t} else {\n\t\t\tthis.setContainer(jQuery('.pdfTemplateContents', container));\n\t\t}\n\t\tthis.initiateStep('1');\n\t\tthis.currentInstance.registerEvents();\n\t},\n\t/*\n\t * Function to initiate all the operations for a step\n\t * @params step value\n\t */\n\tinitiateStep: function (stepVal) {\n\t\tvar step = 'step' + stepVal;\n\t\tthis.activateHeader(step);\n\t\tthis.currentInstance = this.getInstance(stepVal);\n\t},\n\t/*\n\t * Function to activate the header based on the class\n\t * @params class name\n\t */\n\tactivateHeader: function (step) {\n\t\tvar headersContainer = jQuery('.crumbs ');\n\t\theadersContainer.find('.active').removeClass('active');\n\t\tjQuery('#' + step, headersContainer).addClass('active');\n\t},\n\t/*\n\t * Function to register the click event for next button\n\t */\n\tregisterFormSubmitEvent: function (form) {\n\t\tvar thisInstance = this;\n\t\tif (jQuery.isFunction(thisInstance.currentInstance.submit)) {\n\t\t\tform.on('submit', function (e) {\n\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\tvar specialValidation = true;\n\t\t\t\tif (jQuery.isFunction(thisInstance.currentInstance.isFormValidate)) {\n\t\t\t\t\tspecialValidation = thisInstance.currentInstance.isFormValidate();\n\t\t\t\t}\n\t\t\t\tif (form.validationEngine('validate') && specialValidation) {\n\t\t\t\t\tthisInstance.currentInstance.submit().done(function (data) {\n\t\t\t\t\t\tthisInstance.getContainer().prepend(data);\n\t\t\t\t\t\tvar stepVal = thisInstance.getStepValue();\n\t\t\t\t\t\tvar nextStepVal = parseInt(stepVal) + 1;\n\t\t\t\t\t\tthisInstance.initiateStep(nextStepVal);\n\t\t\t\t\t\tthisInstance.currentInstance.initialize();\n\t\t\t\t\t\tvar container = thisInstance.currentInstance.getContainer();\n\t\t\t\t\t\tthisInstance.registerFormSubmitEvent(container);\n\t\t\t\t\t\tthisInstance.currentInstance.registerEvents();\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\te.preventDefault();\n\t\t\t})\n\t\t}\n\t},\n\tback: function () {\n\t\tvar step = this.getStepValue();\n\t\tvar prevStep = parseInt(step) - 1;\n\t\tthis.currentInstance.initialize();\n\t\tvar container = this.currentInstance.getContainer();\n\t\tvar pdfRecordElement = jQuery('[name=\"record\"]', container);\n\t\tvar pdfId = pdfRecordElement.val();\n\t\tcontainer.remove();\n\t\tthis.initiateStep(prevStep);\n\t\tvar currentContainer = this.currentInstance.getContainer();\n\t\tcurrentContainer.show();\n\t\tjQuery('[name=\"record\"]', currentContainer).val(pdfId);\n\t},\n\tregisterCancelStepClickEvent: function (form) {\n\t\tjQuery('button.cancelLink', form).on('click', function () {\n\t\t\twindow.history.back();\n\t\t});\n\t},\n\t/*\n\t * Function to register the click event for back step\n\t */\n\tregisterBackStepClickEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.getContainer();\n\t\tcontainer.on('click', '.backStep', function (e) {\n\t\t\tthisInstance.back();\n\t\t});\n\t},\n\tregisterMetatagsClickEvent: function (form) {\n\t\tvar metaTagsStatus = form.find('#metatags_status');\n\t\tif (metaTagsStatus.is(':checked')) {\n\t\t\tform.find('.metatags').addClass('d-none');\n\t\t} else {\n\t\t\tform.find('.metatags').removeClass('d-none');\n\t\t}\n\n\t\tmetaTagsStatus.on('change', function () {\n\t\t\tvar status = jQuery(this).is(':checked');\n\t\t\tif (status) {\n\t\t\t\tjQuery('.metatags', form).addClass('d-none');\n\t\t\t} else {\n\t\t\t\tjQuery('#set_subject', form).val(jQuery('#secondary_name', form).val());\n\t\t\t\tjQuery('#set_title', form).val(jQuery('#primary_name', form).val());\n\t\t\t\tjQuery('.metatags', form).removeClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar form = this.currentInstance.getContainer();\n\t\tthis.registerFormSubmitEvent(form);\n\t\tApp.Fields.Text.registerCopyClipboard(form);\n\t\tthis.registerBackStepClickEvent();\n\t\tthis.registerCancelStepClickEvent(form);\n\t\tthis.registerMetatagsClickEvent(form);\n\t}\n});\n"],"names":["Settings_Vtiger_Edit_Js","instance","currentInstance","editContainer","init","initiate","getContainer","setContainer","element","getInstance","step","Settings_PDF_Edit_Js","getStepValue","container","val","jQuery","is","initiateStep","registerEvents","stepVal","activateHeader","headersContainer","find","removeClass","addClass","registerFormSubmitEvent","form","isFunction","thisInstance","submit","on","e","currentTarget","specialValidation","isFormValidate","validationEngine","done","data","prepend","nextStepVal","parseInt","initialize","preventDefault","back","prevStep","pdfRecordElement","pdfId","remove","currentContainer","show","registerCancelStepClickEvent","window","history","registerBackStepClickEvent","registerMetatagsClickEvent","metaTagsStatus","status","App","Fields","Text","registerCopyClipboard"],"mappings":"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"}