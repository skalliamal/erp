'use strict';

$.Class("Settings_Countries_Index_Js",{},{registerSortableEvent:function c(){var a=this,b=$("tbody",$(".listViewEntriesTable"));b.sortable({helper:function c(a,b){return b.children().each(function(a,b){b=$(b),b.width(b.width());}),b},containment:b,revert:!0,update:function b(){a.registerSequenceListOnServer();}});},registerStatus:function b(a){a.find("button.status").on("click",function(){var a=$(this),b=a.closest("tr").data("id"),c=a.data("status")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"updateStatus",id:b,status:c}).done(function(b){b.success&&b.result&&(a.data("status",c),a.toggleClass("btn-success").toggleClass("btn-danger"),Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_COUNTRY_SETTING"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success"}));});});},registerPhone:function b(a){a.find("button.phone").on("click",function(){var a=$(this),b=a.closest("tr").data("id"),c=a.data("phone")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"updatePhone",id:b,phone:c}).done(function(b){b.success&&b.result&&(a.data("phone",c),a.toggleClass("btn-success").toggleClass("btn-danger"),Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_COUNTRY_SETTING"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success"}));});});},registerUitype:function b(a){a.find("button.uitype").on("click",function(){var a=$(this),b=a.closest("tr").data("id"),c=a.data("uitype")?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"updateUitype",id:b,uitype:c}).done(function(b){b.success&&b.result&&(a.data("uitype",c),a.toggleClass("btn-success").toggleClass("btn-danger"),Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_COUNTRY_SETTING"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success"}));});});},allStatuses:1,registerAllStatuses:function c(a){var b=this;a.find("button.all-statuses").on("click",function(){var c=b.allStatuses?0:1;AppConnector.request({module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"updateAllStatuses",status:c}).done(function(d){if(d.success&&d.result){var e=a.find(".status");c?(e.removeClass("btn-success").addClass("btn-danger"),e.data("status",1)):(e.removeClass("btn-danger").addClass("btn-success"),e.data("status",0)),Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_COUNTRY_SETTING"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success"});}d.success&&(b.allStatuses=c);});});},registerRowToTop:function c(a){var b=this;a.find("button.to-top").on("click",function(){var a=$(this).closest("tr");$(this).closest("table.listViewEntriesTable tbody").prepend(a),b.registerSequenceListOnServer();});},registerRowToBottom:function c(a){var b=this;a.find("button.to-bottom").on("click",function(){var a=$(this).closest("tr");$(this).closest("table.listViewEntriesTable tbody").append(a),b.registerSequenceListOnServer();});},registerSequenceListOnServer:function b(){var a={};$("tbody tr").each(function(b){a[++b]=$(this).data("id");}),AppConnector.request({sequencesList:JSON.stringify(a),module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"updateSequence"}).done(function(){Vtiger_Helper_Js.showMessage({title:app.vtranslate("JS_COUNTRY_SETTING"),text:app.vtranslate("JS_SAVE_NOTIFY_OK"),type:"success"});});},registerEvents:function b(){var a=$(".contentsDiv");this.registerSortableEvent(),this.registerStatus(a),this.registerPhone(a),this.registerUitype(a),this.registerAllStatuses(a),this.registerRowToTop(a),this.registerRowToBottom(a);}});
//# sourceMappingURL=Index.min.js.map
