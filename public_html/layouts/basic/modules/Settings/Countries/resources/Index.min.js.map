{"version":3,"file":"Index.min.js","sources":["Index.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\n$.Class(\"Settings_Countries_Index_Js\", {}, {\n\tregisterSortableEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar tbody = $(\"tbody\", $('.listViewEntriesTable'));\n\t\ttbody.sortable({\n\t\t\thelper: function (e, ui) {\n\t\t\t\t//while dragging helper elements td element will take width as contents width\n\t\t\t\t//so we are explicity saying that it has to be same width so that element will not\n\t\t\t\t//look like distrubed\n\t\t\t\tui.children().each(function (index, element) {\n\t\t\t\t\telement = $(element);\n\t\t\t\t\telement.width(element.width());\n\t\t\t\t})\n\t\t\t\treturn ui;\n\t\t\t},\n\t\t\tcontainment: tbody,\n\t\t\trevert: true,\n\t\t\tupdate: function (e, ui) {\n\t\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t\t}\n\t\t});\n\t},\n\tregisterStatus: function (content) {\n\t\tcontent.find('button.status').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar status = element.data('status') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateStatus',\n\t\t\t\tid: id,\n\t\t\t\tstatus: status\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('status', status)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterPhone: function (content) {\n\t\tcontent.find('button.phone').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar phone = element.data('phone') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updatePhone',\n\t\t\t\tid: id,\n\t\t\t\tphone: phone\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('phone', phone)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterUitype: function (content) {\n\t\tcontent.find('button.uitype').on('click', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar id = element.closest('tr').data('id');\n\t\t\tvar uitype = element.data('uitype') ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateUitype',\n\t\t\t\tid: id,\n\t\t\t\tuitype: uitype\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\telement.data('uitype', uitype)\n\t\t\t\t\telement.toggleClass('btn-success')\n\t\t\t\t\t\t.toggleClass('btn-danger');\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tallStatuses: 1,\n\tregisterAllStatuses: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.all-statuses').on('click', function () {\n\t\t\tvar status = thisInstance.allStatuses ? 0 : 1;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'SaveAjax',\n\t\t\t\tmode: 'updateAllStatuses',\n\t\t\t\tstatus: status\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success && data.result) {\n\t\t\t\t\tvar elements = content.find('.status');\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\telements.removeClass('btn-success').addClass('btn-danger');\n\t\t\t\t\t\telements.data('status', 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telements.removeClass('btn-danger').addClass('btn-success');\n\t\t\t\t\t\telements.data('status', 0);\n\t\t\t\t\t}\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (data.success) {\n\t\t\t\t\tthisInstance.allStatuses = status;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterRowToTop: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.to-top').on('click', function () {\n\t\t\tvar row = $(this).closest('tr');\n\t\t\t$(this).closest('table.listViewEntriesTable tbody').prepend(row);\n\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t});\n\t},\n\tregisterRowToBottom: function (content) {\n\t\tvar thisInstance = this;\n\t\tcontent.find('button.to-bottom').on('click', function () {\n\t\t\tvar row = $(this).closest('tr');\n\t\t\t$(this).closest('table.listViewEntriesTable tbody').append(row);\n\t\t\tthisInstance.registerSequenceListOnServer();\n\t\t});\n\t},\n\tregisterSequenceListOnServer: function () {\n\t\tvar sequenceList = {};\n\t\t$('tbody tr').each(function (i) {\n\t\t\tsequenceList[++i] = $(this).data('id');\n\t\t});\n\t\tAppConnector.request({\n\t\t\tsequencesList: JSON.stringify(sequenceList),\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: 'SaveAjax',\n\t\t\tmode: 'updateSequence'\n\t\t}).done(function (data) {\n\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\ttitle: app.vtranslate('JS_COUNTRY_SETTING'),\n\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\ttype: 'success',\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar content = $('.contentsDiv');\n\n\t\tthis.registerSortableEvent();\n\t\tthis.registerStatus(content);\n\t\tthis.registerPhone(content);\n\t\tthis.registerUitype(content);\n\t\tthis.registerAllStatuses(content);\n\t\tthis.registerRowToTop(content);\n\t\tthis.registerRowToBottom(content);\n\t}\n});\n"],"names":["$","Class","registerSortableEvent","tbody","sortable","helper","e","ui","children","each","index","element","width","containment","revert","update","thisInstance","registerSequenceListOnServer","registerStatus","content","find","on","id","closest","data","status","AppConnector","request","module","app","getModuleName","parent","getParentModuleName","action","mode","done","success","result","toggleClass","Vtiger_Helper_Js","showMessage","title","vtranslate","text","type","registerPhone","phone","registerUitype","uitype","allStatuses","registerAllStatuses","elements","removeClass","addClass","registerRowToTop","prepend","row","registerRowToBottom","append","i","sequenceList","sequencesList","JSON","stringify","registerEvents"],"mappings":"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"}