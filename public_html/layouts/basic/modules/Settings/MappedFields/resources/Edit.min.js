'use strict';

Settings_Vtiger_Edit_Js('Settings_MappedFields_Edit_Js',{instance:{}},{currentInstance:!1,editContainer:!1,init:function a(){this.initiate();},getContainer:function a(){return this.editContainer},setContainer:function b(a){return this.editContainer=a,this},getInstance:function b(a){if(a in Settings_MappedFields_Edit_Js.instance)return Settings_MappedFields_Edit_Js.instance[a];return Settings_MappedFields_Edit_Js.instance[a]=new window['Settings_MappedFields_Edit'+a+'_Js'],Settings_MappedFields_Edit_Js.instance[a]},getStepValue:function b(){var a=this.currentInstance.getContainer();return jQuery('.step',a).val()},initiate:function b(a){'undefined'==typeof a&&(a=jQuery('.mfTemplateContents')),a.is('.mfTemplateContents')?this.setContainer(a):this.setContainer(jQuery('.mfTemplateContents',a)),this.initiateStep('1'),this.currentInstance.registerEvents();},initiateStep:function b(a){this.activateHeader('step'+a),this.currentInstance=this.getInstance(a);},activateHeader:function c(a){var b=jQuery('.crumbs ');b.find('.active').removeClass('active'),jQuery('#'+a,b).addClass('active');},registerFormSubmitEvent:function c(a){var b=this;jQuery.isFunction(b.currentInstance.submit)&&a.on('submit',function(a){var c=jQuery(a.currentTarget),d=!0;jQuery.isFunction(b.currentInstance.isFormValidate)&&(d=b.currentInstance.isFormValidate()),c.validationEngine('validate')&&d&&b.currentInstance.submit().done(function(a){if(a){b.getContainer().append(a);var c=b.getStepValue(),d=parseInt(c)+1;b.initiateStep(d),b.currentInstance.initialize();var e=b.currentInstance.getContainer();b.registerFormSubmitEvent(e),b.currentInstance.registerEvents();}}),a.preventDefault();});},back:function g(){var a=this.getStepValue(),b=parseInt(a)-1;this.currentInstance.initialize();var c=this.currentInstance.getContainer(),d=jQuery('[name="record"]',c),e=d.val();c.remove(),this.initiateStep(b);var f=this.currentInstance.getContainer();f.show(),jQuery('[name="record"]',f).val(e);},registerCancelStepClickEvent:function b(a){jQuery('button.cancelLink',a).on('click',function(){window.history.back();});},registerBackStepClickEvent:function c(){var a=this,b=this.getContainer();b.on('click','.backStep',function(){a.back();});},registerEvents:function b(){var a=this.currentInstance.getContainer();this.registerFormSubmitEvent(a),this.registerBackStepClickEvent(),this.registerCancelStepClickEvent(a);}});
//# sourceMappingURL=Edit.min.js.map
