{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js(\"Settings_MappedFields_List_Js\", {}, {\n\tgetListContainer: function () {\n\t\treturn jQuery('#listViewContainer');\n\t},\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t\tthisInstance.registerBasic();\n\t\t\t});\n\t\t});\n\t},\n\t/*\n\t * Function to register the list view row click event\n\t */\n\tregisterRowClickEvent: function () {\n\t\tvar listViewContentDiv = this.getListViewContentContainer();\n\t\tlistViewContentDiv.on('click', '.listViewEntries td:not(.tdActions)', function (e) {\n\t\t\tvar editUrl = jQuery(e.currentTarget).parent().find('.[data-fa-i2svg]').closest('a').attr('href');\n\t\t\twindow.location.href = editUrl;\n\t\t});\n\t},\n\tgetDefaultParams: function () {\n\t\tvar pageNumber = jQuery('#pageNumber').val();\n\t\tvar module = app.getModuleName();\n\t\tvar parent = app.getParentModuleName();\n\t\tvar params = {\n\t\t\t'module': module,\n\t\t\t'parent': parent,\n\t\t\t'page': pageNumber,\n\t\t\t'view': \"List\",\n\t\t\tsourceModule: jQuery('#moduleFilter').val()\n\t\t}\n\n\t\treturn params;\n\t},\n\tregisterAddNewTemplate: function (container) {\n\t\tjQuery('#addButton', container).on('click', function () {\n\t\t\tvar selectedModule = jQuery('#moduleFilter option:selected').val();\n\t\t\twindow.location.href = jQuery(this).data('url') + ((selectedModule) ? '&source_module=' + selectedModule : '');\n\t\t});\n\t},\n\tregisterImportTemplate: function (container) {\n\t\tvar thisInstance = this;\n\t\tjQuery('#importButton', container).on('click', function (e) {\n\t\t\tvar currentElement = jQuery(e.currentTarget);\n\t\t\tvar url = currentElement.data('url');\n\t\t\tif (typeof url !== \"undefined\") {\n\t\t\t\tapp.showModalWindow(null, url,\n\t\t\t\t\tfunction (data) {\n\t\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\t\t\t\t\tvar invalidFields = form.data('jqv').InvalidFields;\n\t\t\t\t\t\t\tif (invalidFields.length > 0) {\n\t\t\t\t\t\t\t\t//If validation fails, form should submit again\n\t\t\t\t\t\t\t\tform.removeData('submit');\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t\t\t\t\t'position': 'html',\n\t\t\t\t\t\t\t\t'blockInfo': {\n\t\t\t\t\t\t\t\t\t'enabled': true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthisInstance.importSave(form).done(function (data) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'})\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({text: data.result.message, type: 'info'});\n\t\t\t\t\t\t\t\tjQuery('#moduleFilter').trigger('change');\n\t\t\t\t\t\t\t}).fail(function (error, err) {\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t});\n\t},\n\timportSave: function (form) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar formData = new FormData(form[0]);\n\t\tif (typeof file !== \"undefined\") {\n\t\t\tformData.append(\"imported_xml\", file);\n\t\t\tfile = false;\n\t\t}\n\t\tif (formData) {\n\t\t\tvar params = {\n\t\t\t\turl: \"index.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t}\n\t\treturn aDeferred.promise();\n\t},\n\tregisterDeleteMap: function () {\n\t\tvar thisInstance = this;\n\t\tthis.getListContainer().find('.deleteMap').each(function (index) {\n\t\t\tjQuery(this).on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar templateId = jQuery(this).closest('tr').data('id');\n\t\t\t\tSettings_MappedFields_List_Js.deleteById(templateId).done(function () {\n\t\t\t\t\tthisInstance.registerBasic();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tregisterBasic: function () {\n\t\tthis.registerDeleteMap();\n\t},\n\tregisterEvents: function () {\n\t\tthis._super();\n\t\tvar container = this.getListContainer();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.registerAddNewTemplate(container);\n\t\tthis.registerImportTemplate(container);\n\t\tthis.registerBasic();\n\t}\n});\n"],"names":["Settings_Vtiger_List_Js","getListContainer","registerFilterChangeEvent","jQuery","on","e","val","module","app","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","thisInstance","getListViewRecords","params","done","updatePagination","registerBasic","registerRowClickEvent","getListViewContentContainer","listViewContentDiv","find","closest","attr","window","location","href","editUrl","getDefaultParams","pageNumber","registerAddNewTemplate","container","data","selectedModule","registerImportTemplate","url","currentElement","showModalWindow","form","validationEngine","validationEngineOptions","invalidFields","InvalidFields","length","removeData","progressIndicator","importSave","hideModalWindow","progressIndicatorElement","Settings_Vtiger_Index_Js","showMessage","result","message","type","trigger","fail","preventDefault","stopPropagation","Deferred","formData","append","file","AppConnector","request","processData","contentType","aDeferred","resolve","textStatus","errorThrown","reject","promise","registerDeleteMap","each","Settings_MappedFields_List_Js","deleteById","templateId","registerEvents","_super"],"mappings":"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"}