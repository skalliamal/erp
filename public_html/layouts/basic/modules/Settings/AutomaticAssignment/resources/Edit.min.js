'use strict';

jQuery.Class('Settings_AutomaticAssignment_Edit_Js',{},{container:!1,advanceFilterInstance:!1,getContainer:function a(){return !1==this.container&&(this.container=jQuery('div.contentsDiv')),this.container},registerBasicEvents:function f(a){var b=this,c=a.find('.filterContainer');c.length&&(this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(c));var d=a.find('form');d.length&&(d.validationEngine(app.validationEngineOptions),d.find('[data-inputmask]').inputmask()),a.find('.select2noactive').each(function(a,b){var c=$(b);c.data('select2')||App.Fields.Picklist.showSelect2ElementView(c,{placeholder:app.vtranslate('JS_SELECT_AN_OPTION')});});var e=app.registerDataTables(a.find('.dataTable'));e&&(e.$('.changeRoleType').on('click',function(a){a.stopPropagation(),a.preventDefault();var c=jQuery(a.currentTarget),d=c.closest('tr');app.saveAjax('changeRoleType',d.data('value'),{record:app.getMainParams('record')}).done(function(){b.refreshTab();});}),e.$('.delete').on('click',function(a){a.stopPropagation(),a.preventDefault();var c=jQuery(a.currentTarget),d=c.closest('tr'),e={record:app.getMainParams('record'),value:d.data('value'),name:d.data('name')};app.saveAjax('deleteElement',null,e).done(function(){b.refreshTab();});})),a.find('.fieldContainer').on('click',function(a){a.stopPropagation(),a.preventDefault();}),a.find('.saveValue').on('click',function(a){var c=jQuery(a.currentTarget),d=c.closest('.fieldContainer'),e=d.data('dbname');if('conditions'===e)var f=b.advanceFilterInstance.getValues(),g=JSON.stringify(f);else{var h=d.data('name'),i=d.find('[name="'+h+'"]');if(i.validationEngine('validate'))return !1;var g=i.val();}var j=[];j[e]=g,app.saveAjax('save',jQuery.extend({},j),{record:app.getMainParams('record')}).done(function(){b.refreshTab();});}),a.find('.js-switch').on('change',function(a){var c=$(a.currentTarget),d=c.val(),e=[];if(c.hasClass('noField')){if('1'===d)return c.closest('form').find('.fieldToShowHide').removeClass('d-none'),!1;'0'===d&&c.closest('form').find('.fieldToShowHide').addClass('d-none');}e[c.attr('name')]=Number(d),app.saveAjax('save',jQuery.extend({},e),{record:app.getMainParams('record')}).done(function(){b.refreshTab();});});},refreshTab:function c(){var a=this;Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate('JS_SAVE_SUCCESS')});var b=this.getContainer().find('.tab-pane.active');return !b.hasClass('noRefresh')&&void AppConnector.request(b.data('url')).done(function(c){b.html(c),a.registerBasicEvents(b);}).fail(function(a,b){app.errorLog(a,b);})},registerEvents:function a(){this.registerBasicEvents(this.getContainer());}});
//# sourceMappingURL=Edit.min.js.map
