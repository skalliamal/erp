{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nSettings_Vtiger_List_Js('Settings_AutomaticAssignment_List_Js', {\n\tchangeRecordState: function (recordId, state) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar message = app.vtranslate('JS_STATE_CONFIRMATION');\n\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\tapp.saveAjax('save', {active: state}, {record: recordId}).done(function (respons) {\n\t\t\t\tvar listInstance = Settings_AutomaticAssignment_List_Js.getInstance();\n\t\t\t\tlistInstance.getListViewRecords();\n\t\t\t});\n\t\t}).fail(function (error, err) {\n\t\t\tapp.errorLog(error, err);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n}, {\n\tcontainer: false,\n\tregisterFilterChangeEvent: function () {\n\t\tvar thisInstance = this;\n\t\tjQuery('#moduleFilter').on('change', function (e) {\n\t\t\tjQuery('#pageNumber').val(\"1\");\n\t\t\tjQuery('#pageToJump').val('1');\n\t\t\tjQuery('#orderBy').val('');\n\t\t\tjQuery(\"#sortOrder\").val('');\n\t\t\tvar params = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\tsourceModule: jQuery(e.currentTarget).val()\n\t\t\t}\n\t\t\t//Make the select all count as empty\n\t\t\tjQuery('#recordsCount').val('');\n\t\t\t//Make total number of pages as empty\n\t\t\tjQuery('#totalPageCount').text(\"\");\n\t\t\tthisInstance.getListViewRecords(params).done(function (data) {\n\t\t\t\tthisInstance.updatePagination();\n\t\t\t});\n\t\t});\n\t},\n\tgetContainer: function () {\n\t\tif (this.container == false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\tregisterModalEvents: function (data, url) {\n\t\tvar form = data.find('form');\n\t\tvar submitButton = data.find('.submitButton');\n\t\tdata.find('[name=\"tabid\"]').on('change', function (e) {\n\t\t\tvar progress = jQuery.progressIndicator({\n\t\t\t\t'position': 'html',\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar getFieldsUrl = url + '&tabid=' + element.val();\n\t\t\tAppConnector.request(getFieldsUrl).done(function (fields) {\n\t\t\t\t\tdata.find('.fieldList').html(fields);\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('.fieldList select'));\n\t\t\t\t\tsubmitButton.removeClass('d-none');\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar params = form.serializeFormData();\n\t\t\tapp.saveAjax('save', params).done(function (response) {\n\t\t\t\tvar id = response.result;\n\t\t\t\tif (id) {\n\t\t\t\t\tvar url = form.attr('action');\n\t\t\t\t\turl = url + '&record=' + id;\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tvar thisInstance = this;\n\t\tthis._super();\n\t\tthis.registerFilterChangeEvent();\n\t\tthis.getContainer().find('.addRecord').on('click', function (e) {\n\t\t\tvar button = jQuery(e.currentTarget);\n\t\t\tvar url = button.data('url');\n\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\tthisInstance.registerModalEvents(data, url);\n\t\t\t});\n\t\t});\n\t}\n})\n"],"names":["Settings_Vtiger_List_Js","changeRecordState","recordId","state","jQuery","Deferred","message","app","vtranslate","showConfirmationBox","done","saveAjax","active","record","Settings_AutomaticAssignment_List_Js","getInstance","listInstance","getListViewRecords","fail","error","err","errorLog","aDeferred","promise","container","registerFilterChangeEvent","on","e","val","module","getModuleName","parent","getParentModuleName","sourceModule","currentTarget","text","thisInstance","params","updatePagination","getContainer","registerModalEvents","data","url","find","submitButton","progressIndicator","element","getFieldsUrl","AppConnector","request","fields","html","App","Fields","Picklist","showSelect2ElementView","removeClass","progress","textStatus","errorThrown","form","preventDefault","serializeFormData","response","result","id","attr","window","location","href","registerEvents","_super","button","showModalWindow"],"mappings":"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"}