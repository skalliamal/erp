'use strict';

Settings_Vtiger_Index_Js('Settings_Colors_Index_Js',{},{registerEvents:function a(){this.registerModuleTabEvent(),this.registerModuleChangeEvent(),this.registerModulePickListChangeEvent(),this.initEvants();},initEvants:function c(){var a=this,b=$('.UserColors');b.find('.updateUserColor').on('click',function(b){a.updateUserColor(b,a);}),b.find('.generateUserColor').on('click',this.generateUserColor),b.find('.removeUserColor').on('click',this.removeUserColor),b.find('.updateGroupColor').on('click',function(b){a.updateGroupColor(b,a);}),b.find('.generateGroupColor').on('click',this.generateGroupColor),b.find('.removeGroupColor').on('click',this.removeGroupColor),b.find('.updateModuleColor').on('click',function(b){a.updateModuleColor(b,a);}),b.find('.generateModuleColor').on('click',this.generateModuleColor),b.find('.removeModuleColor').on('click',this.removeModuleColor),b.find('.activeModuleColor').on('click',this.activeModuleColor),b.find('.addPicklistColorColumn').on('click',this.addPicklistColorColumn),b.find('.updatePicklistValueColor').on('click',function(b){a.updatePicklistValueColor(b,a);}),b.find('.generatePicklistValueColor').on('click',this.generatePicklistValueColor),b.find('.removePicklistValueColor').on('click',this.removePicklistValueColor),b.find('.updateColor').on('click',function(b){a.updateCalendarColor(b,a);}),b.find('#update_event').on('click',this.updateEvent),b.find('.generateColor').on('click',this.generateCalendarColor),b.find('.removeCalendarColor').on('click',this.removeCalendarColor);},registerColorPicker:function e(a,b,c){var d={inline:!0,container:!0,color:b.data('color')};'undefined'!=typeof customParams&&(d=jQuery.extend(d,customParams)),a.find('.calendarColorPicker').colorpicker(d).on('changeColor',function(a){c.val(a.color.toHex()),b.contents().length||b.data('color',a.color.toHex());});},updateUserColor:function h(a,b){var c=$(a.currentTarget),d=jQuery('.UserColors .editColorContainer'),e=d.clone(!0,!0),f=$('#calendarColorPreviewUser'+c.data('record')),g=function(a){a.find('.editColorContainer').removeClass('d-none').show();var d=a.find('.selectedColor');d.val(f.data('color')),b.registerColorPicker(a,f,d),a.find('[name="saveButton"]').on('click',function(){var a=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateUserColor',color:d.val(),record:c.data('record')}).done(function(a){return Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),a.result}),f.css('background',d.val()),c.data('color',d.val()),a.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(e,function(a){'function'==typeof g&&g(a);},{width:'1000px'});},generateUserColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewUser'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateUserColor',record:b.data('record')}).done(function(a){c.css('background',a.result.color),c.data('color',a.result.color),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});});},removeUserColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewUser'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeUserColor',record:b.data('record')}).done(function(a){c.css('background',''),c.data('color',''),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});});},updateGroupColor:function h(a,b){var c=$(a.currentTarget),d=jQuery('.UserColors .editColorContainer'),e=d.clone(!0,!0),f=$('#calendarColorPreviewGroup'+c.data('record')),g=function(a){a.find('.editColorContainer').removeClass('d-none').show();var d=a.find('.selectedColor');d.val(f.data('color')),b.registerColorPicker(a,f,d),a.find('[name="saveButton"]').on('click',function(){var a=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateGroupColor',color:d.val(),record:c.data('record')}).done(function(a){return Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),a.result}),f.css('background',d.val()),c.data('color',d.val()),a.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(e,function(a){'function'==typeof g&&g(a);},{width:'1000px'});},generateGroupColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewGroup'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateGroupColor',record:b.data('record')}).done(function(a){c.css('background',a.result.color),c.data('color',a.result.color),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});});},removeGroupColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewGroup'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeGroupColor',record:b.data('record')}).done(function(a){c.css('background',''),c.data('color',''),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});});},updateModuleColor:function h(a,b){var c=$(a.currentTarget),d=jQuery('.UserColors .editColorContainer'),e=d.clone(!0,!0),f=$('#calendarColorPreviewModule'+c.data('record')),g=function(a){a.find('.editColorContainer').removeClass('d-none').show();var d=a.find('.selectedColor');d.val(f.data('color')),b.registerColorPicker(a,f,d),a.find('[name="saveButton"]').on('click',function(){var a=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateModuleColor',color:d.val(),record:c.data('record')}).done(function(a){return Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),a.result}),f.css('background',d.val()),c.data('color',d.val()),a.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(e,function(a){'function'==typeof g&&g(a);},{width:'1000px'});},generateModuleColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewModule'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateModuleColor',record:b.data('record')}).done(function(a){c.css('background',a.result.color),c.data('color',a.result.color),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});});},removeModuleColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewModule'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeModuleColor',record:b.data('record')}).done(function(a){c.css('background',''),c.data('color',''),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});});},activeModuleColor:function d(a){var b=$(a.currentTarget),c=$('#calendarColorPreviewModule'+b.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'activeModuleColor',status:b.is(':checked'),color:c.data('color'),record:b.data('record')}).done(function(a){Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),c.css('background',a.result.color),c.data('color',a.result.color);});},addPicklistColorColumn:function d(a){var b=jQuery('.picklistViewContentDiv'),c=$(a.currentTarget);AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'addPicklistColorColumn',picklistModule:c.data('fieldmodule'),fieldId:c.data('fieldid')}).done(function(a){Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),b.find('.modulePickList').trigger('change');});},updatePicklistValueColor:function i(a,b){var c=jQuery('.picklistViewContentDiv'),d=$(a.currentTarget),e=jQuery('.UserColors .editColorContainer'),f=e.clone(!0,!0),g=c.find('#calendarColorPreviewPicklistValue'+d.data('fieldvalueid')),h=function(a){a.find('.editColorContainer').removeClass('d-none').show();var c=a.find('.selectedColor');c.val(g.data('color')),b.registerColorPicker(a,g,c),a.find('[name="saveButton"]').on('click',function(){var a=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updatePicklistValueColor',color:c.val(),fieldId:d.data('fieldid'),fieldValueId:d.data('fieldvalueid')}).done(function(a){return Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),a.result}),g.css('background',c.val()),d.data('color',c.val()),a.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(f,function(a){'function'==typeof h&&h(a);},{width:'1000px'});},generatePicklistValueColor:function f(a){var b=jQuery('.picklistViewContentDiv'),c=$(a.currentTarget),d=b.find('#calendarColorPreviewPicklistValue'+c.data('fieldvalueid')),e=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updatePicklistValueColor',fieldId:c.data('fieldid'),fieldValueId:c.data('fieldvalueid')}).done(function(a){d.css('background',a.result.color),d.data('color',a.result.color),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});}),e.progressIndicator({mode:'hide'}),app.hideModalWindow();},removePicklistValueColor:function f(a){var b=jQuery('.picklistViewContentDiv'),c=$(a.currentTarget),d=b.find('#calendarColorPreviewPicklistValue'+c.data('fieldvalueid')),e=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removePicklistValueColor',fieldId:c.data('fieldid'),fieldValueId:c.data('fieldvalueid')}).done(function(a){d.css('background',''),d.data('color',''),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});}),e.progressIndicator({mode:'hide'}),app.hideModalWindow();},generateCalendarColor:function d(a){var b=$(a.currentTarget),c=b.closest('tr');AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateCalendarColor',id:c.data('id'),table:c.data('table'),field:c.data('field')}).done(function(a){Settings_Colors_Index_Js.showMessage({type:'success',text:a.result.message}),c.find('.calendarColor').css('background',a.result.color),c.data('color',a.result.color);});},updateCalendarColor:function h(a,b){var c=$(a.currentTarget),d=c.closest('tr'),e=jQuery('.UserColors .editColorContainer'),f=e.clone(!0,!0),g=function(a){a.find('.editColorContainer').removeClass('d-none').show();var c=a.find('.selectedColor');c.val(d.data('color')),b.registerColorPicker(a,d,c),a.find('[name="saveButton"]').on('click',function(){var a=$.progressIndicator({message:app.vtranslate('Update labels'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateCalendarColor',color:c.val(),id:d.data('id'),table:d.data('table'),field:d.data('field')}).done(function(a){return Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'}),a.result}),d.find('.calendarColor').css('background',c.val()),d.data('color',c.val()),a.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(f,function(a){'function'==typeof g&&g(a);},{width:'1000px'});},removeCalendarColor:function f(a){var b=jQuery('#calendarColors'),c=$(a.currentTarget),d=b.find('#calendarColorPreviewCalendar'+c.data('record')),e=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeCalendarColor',id:c.data('record')}).done(function(a){d.css('background',''),d.data('color',''),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'});}),e.progressIndicator({mode:'hide'}),app.hideModalWindow();},registerModuleTabEvent:function b(){var a=this;jQuery('#picklistsColorsTab').on('click',function(){var b=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),view:'IndexAjax',mode:'getPickListView'}).done(function(c){var d=jQuery('.picklistViewContentDiv');d.html(c),b.progressIndicator({mode:'hide'}),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),a.registerModuleChangeEvent(),d.find('.modulePickList').trigger('change');});});},registerModuleChangeEvent:function c(){var a=this,b=jQuery('.picklistViewContentDiv');b.find('.pickListModules').on('change',function(c){var d=jQuery(c.currentTarget).val();if(0>=d.length)return jQuery('#picklistsColorsTab').trigger('click'),!1;var e=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),source_module:d,view:'IndexAjax',mode:'getPickListView'}).done(function(c){b.html(c),e.progressIndicator({mode:'hide'}),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesPicklistSelectContainer')),a.registerModuleChangeEvent(),a.registerModulePickListChangeEvent(),jQuery('#modulePickList').trigger('change');});});},registerModulePickListChangeEvent:function c(){var a=this,b=jQuery('.picklistViewContentDiv');b.find('.modulePickList').on('change',function(c){var d=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),source_module:jQuery('#pickListModules').val(),view:'IndexAjax',mode:'getPickListView',fieldId:jQuery(c.currentTarget).val()}).done(function(c){b.html(c),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesPicklistSelectContainer')),a.registerModuleChangeEvent(),a.registerModulePickListChangeEvent(),$('.UserColors .addPicklistColorColumn').on('click',a.addPicklistColorColumn),$('.UserColors .updatePicklistValueColor').on('click',function(b){a.updatePicklistValueColor(b,a);}),$('.UserColors .generatePicklistValueColor').on('click',a.generatePicklistValueColor),$('.UserColors .removePicklistValueColor').on('click',a.removePicklistValueColor),d.progressIndicator({mode:'hide'});});});}});
//# sourceMappingURL=Index.min.js.map
