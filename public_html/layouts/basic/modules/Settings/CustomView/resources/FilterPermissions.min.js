'use strict';

jQuery.Class('Settings_CustomView_FilterPermissions_Js',{},{formElement:!1,registerButtonsEvent:function c(){var a=this,b=this.getForm();b.find('button.moveItem').on('click',function(b){a.setDefaultPreferences(b);});},registerDisabledButtons:function b(){var a=this.getForm();a.find('button.moveItem').each(function(b,c){var d=jQuery(c),e=d.data('source'),f=a.find('.'+e);f.find('option').length&&!f.is(':disabled')?d.prop('disabled',!1):d.prop('disabled',!0);});},move:function j(a){var b=this.getForm(),c=a.data('source'),d=a.data('target'),e=b.find('.'+d),f=b.find('.'+c).find('option:selected'),g={};g.val=f.val(),g.label=f.text(),g.blockLabel=f.closest('optgroup').attr('label');var h='<option value="'+g.val+'">'+g.label+'</option>',i=e.find('optgroup[label="'+g.blockLabel+'"]');i.length?i.append(h):e.append('<optgroup label="'+g.blockLabel+'">'+h+'</optgroup>'),f.remove(),App.Fields.Picklist.showSelect2ElementView(b.find('.select2'));},setDefaultPreferences:function h(a){var b=this,c=this.getForm(),d=$.progressIndicator({message:app.vtranslate('JS_SAVE_LOADER_INFO'),position:this.getForm(),blockInfo:{enabled:!0}}),e=$(a.currentTarget),f=e.data('source'),g={tabid:c.find('#sourceModule').val(),user:c.find('.'+f).val(),cvid:c.find('#cvid').val(),operator:e.data('operator'),type:c.find('#type').val()};app.saveAjax('setFilterPermissions',{},g).done(function(a){a.success?a.result.success?(b.move(e),b.registerDisabledButtons(),d.progressIndicator({mode:'hide'}),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'success'})):(d.progressIndicator({mode:'hide'}),Vtiger_Helper_Js.showPnotify({text:a.result.message,type:'error'})):d.progressIndicator({mode:'hide'});});},getForm:function a(){return !1==this.formElement&&this.setForm(jQuery('#modalFilterPermissions')),this.formElement},setForm:function b(a){return this.formElement=a,this},registerEvents:function a(){this.registerButtonsEvent(),this.registerDisabledButtons();}}),jQuery(document).ready(function(){var a=new Settings_CustomView_FilterPermissions_Js;a.registerEvents();});
//# sourceMappingURL=FilterPermissions.min.js.map
