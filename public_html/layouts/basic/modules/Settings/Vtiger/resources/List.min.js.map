{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\"Settings_Vtiger_List_Js\", {\n\ttriggerDelete: function (event, url) {\n\t\tevent.stopPropagation();\n\t\tvar instance = Vtiger_List_Js.getInstance();\n\t\tinstance.DeleteRecord(url);\n\t},\n\tdeleteById: function (id) {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar instance = Vtiger_List_Js.getInstance();\n\t\tvar params = $.extend(instance.getDeleteParams(), {\n\t\t\trecord: id,\n\t\t});\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tif (data.success) {\n\t\t\t\t$('#recordsCount').val('');\n\t\t\t\t$('#totalPageCount').text('');\n\t\t\t\tinstance.getListViewRecords().done(function () {\n\t\t\t\t\tinstance.updatePagination();\n\t\t\t\t});\n\t\t\t}\n\t\t\taDeferred.resolve(data);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n}, {\n\tgetDeleteParams: function () {\n\t\treturn {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\taction: \"DeleteAjax\"\n\t\t};\n\t},\n\t/*\n\t * Function to register the list view container\n\t */\n\tgetListViewContainer: function () {\n\t\tif (this.listViewContainer == false) {\n\t\t\tthis.listViewContainer = jQuery('div.listViewContentDiv');\n\t\t}\n\t\treturn this.listViewContainer;\n\t},\n\n\t/*\n\t * Function to register the list view delete record click event\n\t */\n\tDeleteRecord: function (url) {\n\t\tvar thisInstance = this;\n\t\tvar css = jQuery.extend({'text-align': 'left'}, css);\n\n\t\tAppConnector.request(url).done(function (data) {\n\t\t\tif (data) {\n\t\t\t\tapp.showModalWindow(data, function (container) {\n\t\t\t\t\tthisInstance.postDeleteAction(container);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Function to load list view after deletion of record from list view\n\t */\n\tpostDeleteAction: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar deleteConfirmForm = jQuery(container).find('#DeleteModal');\n\t\tdeleteConfirmForm.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar deleteActionUrl = deleteConfirmForm.serializeFormData();\n\t\t\tAppConnector.request(deleteActionUrl).done(function () {\n\t\t\t\tapp.hideModalWindow();\n\t\t\t\tvar params = {\n\t\t\t\t\ttext: app.vtranslate('JS_RECORD_DELETED_SUCCESSFULLY')\n\t\t\t\t};\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\tjQuery('#recordsCount').val('');\n\t\t\t\tjQuery('#totalPageCount').text('');\n\t\t\t\tthisInstance.getListViewRecords().done(function () {\n\t\t\t\t\tthisInstance.updatePagination();\n\t\t\t\t});\n\t\t\t}).fail(function (error, err) {\n\t\t\t\tapp.hideModalWindow();\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * Function to get Page Jump Params\n\t */\n\tgetPageJumpParams: function () {\n\t\tvar module = app.getModuleName();\n\t\tvar cvId = this.getCurrentCvId();\n\t\tvar pageCountParams = {\n\t\t\t'module': module,\n\t\t\t'parent': \"Settings\",\n\t\t\t'action': \"ListAjax\",\n\t\t\t'mode': \"getPageCount\",\n\t\t\t\"viewname\": cvId\n\t\t}\n\t\tvar sourceModule = jQuery('#moduleFilter').val();\n\t\tif (typeof sourceModule !== \"undefined\") {\n\t\t\tpageCountParams['sourceModule'] = sourceModule;\n\t\t}\n\t\treturn pageCountParams;\n\t},\n\tregisterEvents: function () {\n\t\t//this.triggerDisplayTypeEvent();\n\t\tthis.registerRowClickEvent();\n\t\tthis.registerCheckBoxClickEvent();\n\t\tthis.registerHeadersClickEvent();\n\t\tthis.registerPageNavigationEvents();\n\t\tthis.registerEventForTotalRecordsCount();\n\t}\n});\n"],"names":["Vtiger_List_Js","triggerDelete","event","url","stopPropagation","getInstance","instance","DeleteRecord","deleteById","id","jQuery","Deferred","params","$","extend","getDeleteParams","record","request","done","data","success","val","text","getListViewRecords","updatePagination","aDeferred","resolve","promise","module","app","getModuleName","parent","getParentModuleName","action","getListViewContainer","listViewContainer","css","AppConnector","showModalWindow","container","thisInstance","postDeleteAction","deleteConfirmForm","find","on","e","preventDefault","serializeFormData","deleteActionUrl","hideModalWindow","vtranslate","Settings_Vtiger_Index_Js","showMessage","fail","getPageJumpParams","cvId","getCurrentCvId","pageCountParams","sourceModule","registerEvents","registerRowClickEvent","registerCheckBoxClickEvent","registerHeadersClickEvent","registerPageNavigationEvents","registerEventForTotalRecordsCount"],"mappings":"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"}