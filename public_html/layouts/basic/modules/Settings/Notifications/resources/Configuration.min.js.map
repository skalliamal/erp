{"version":3,"file":"Configuration.min.js","sources":["Configuration.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Notifications_Configuration_Js', {}, {\n\tcontainer: false,\n\t/**\n\t * Function to register the change event for layout editor modules list\n\t */\n\tregisterModulesChangeEvent: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('#supportedModule').on('change', function (e) {\n\t\t\tvar progress = thisInstance.progress();\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = app.getViewName();\n\t\t\tparams['srcModule'] = jQuery(e.currentTarget).val();\n\t\t\tAppConnector.requestPjax(params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tcontainer.html(data);\n\t\t\t\tApp.Fields.Picklist.changeSelectElementView(container);\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tapp.errorLog(textStatus, errorThrown);\n\t\t\t});\n\t\t});\n\t},\n\tprogress: function () {\n\t\treturn jQuery.progressIndicator({\n\t\t\t'position': 'html',\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t},\n\tregisterButtonEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.wrapperTrash, .wrapperLock').on('click', '[data-fa-i2svg]', function (e) {\n\t\t\tvar progress = thisInstance.progress();\n\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\tvar mode = element.data('mode');\n\t\t\tvar dataElement = element.closest('tr');\n\t\t\tvar params = {\n\t\t\t\tmembers: dataElement.data('value'),\n\t\t\t\tsrcModule: container.find('#supportedModule').val()\n\t\t\t};\n\t\t\tif (mode === 'lock') {\n\t\t\t\tparams.lock = dataElement.data('lock') === 0 ? 1 : 0;\n\t\t\t}\n\t\t\tapp.saveAjax(mode, null, params).done(function (data) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.refreshView();\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.addUser, .wrapperExceptions').on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar reload = true;\n\t\t\t\tvar element = jQuery(e.currentTarget);\n\t\t\t\tvar url =\n\t\t\t\t\t'index.php?module=' + app.getModuleName() +\n\t\t\t\t\t'&parent=' + app.getParentModuleName() +\n\t\t\t\t\t'&srcModule=' + container.find('#supportedModule').val() +\n\t\t\t\t\t'&view=Members';\n\t\t\t\tif (element.hasClass('wrapperExceptions')) {\n\t\t\t\t\turl += '&mode=' + element.data('mode') + '&member=' + element.closest('tr').data('value');\n\t\t\t\t\treload = false;\n\t\t\t\t}\n\t\t\t\tapp.showModalWindow(null, url, function (data) {\n\t\t\t\t\tvar form = data.find('form');\n\t\t\t\t\tform.on('submit', function (e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tvar progress = thisInstance.progress();\n\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\tapp.saveAjax(params.mode, null, params).done(function (data) {\n\t\t\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\tif (reload) {\n\t\t\t\t\t\t\t\tthisInstance.refreshView();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t},\n\trefreshView: function () {\n\t\tthis.getContainer().find('#supportedModule').trigger('change');\n\t},\n\tgetContainer: function () {\n\t\tif (this.container === false) {\n\t\t\tthis.container = jQuery('div.contentsDiv');\n\t\t}\n\t\treturn this.container;\n\t},\n\tregisterEvents: function () {\n\t\tvar container = this.getContainer();\n\t\tthis.registerModulesChangeEvent(container);\n\t\tapp.registerDataTables(container.find('.dataTable'));\n\t\tthis.registerButtonEvents(container);\n\n\t}\n});\n"],"names":["jQuery","Class","container","registerModulesChangeEvent","find","on","e","thisInstance","progress","params","app","getModuleName","getParentModuleName","getViewName","currentTarget","val","AppConnector","requestPjax","done","data","progressIndicator","html","App","Fields","Picklist","changeSelectElementView","registerEvents","fail","textStatus","errorThrown","errorLog","registerButtonEvents","element","mode","dataElement","closest","members","srcModule","lock","saveAjax","refreshView","stopPropagation","preventDefault","url","hasClass","reload","showModalWindow","form","serializeFormData","hideModalWindow","getContainer","trigger","registerDataTables"],"mappings":"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"}