{"version":3,"file":"Notifications.min.js","sources":["Notifications.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_Notifications_List_Js', {}, {\n\tregisterSave: function (container, id) {\n\t\tvar thisInstance = this;\n\t\tvar containerValidate = container.find('.validationEngineContainer');\n\t\tvar roleId = $('[name=\"roleMenu\"]').val();\n\t\tcontainerValidate.validationEngine(app.validationEngineOptions);\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function () {\n\t\t\tif (containerValidate.validationEngine('validate')) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'SaveAjax',\n\t\t\t\t\tmode: 'saveType',\n\t\t\t\t\tname: container.find('[name=\"name\"]').val(),\n\t\t\t\t\twidth: container.find('[name=\"width\"]').val(),\n\t\t\t\t\theight: container.find('[name=\"height\"]').val(),\n\t\t\t\t\troleId: roleId,\n\t\t\t\t\tid: id\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tregisterButtons: function () {\n\t\tvar thisInstance = this;\n\t\t$('.createNotification').on('click', function () {\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, \"index.php?module=Notifications&parent=Settings&view=CreateNotification\", function (container) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.registerSave(container, 0);\n\t\t\t});\n\t\t});\n\t\t$('[name=\"roleMenu\"]').on('change', function () {\n\t\t\tthisInstance.showTable();\n\t\t});\n\t},\n\tshowTable: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = $('.listWithNotifications');\n\t\tvar params = {\n\t\t\tmodule: app.getModuleName(),\n\t\t\tparent: app.getParentModuleName(),\n\t\t\tview: 'ListContent',\n\t\t\troleId: $('[name=\"roleMenu\"]').val(),\n\t\t};\n\t\tvar progress = jQuery.progressIndicator();\n\t\tAppConnector.request(params).done(function (data) {\n\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\tcontainer.html(data);\n\t\t\tthisInstance.registerTableEvents(container);\n\t\t});\n\t},\n\tregisterTableEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.edit').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\tapp.showModalWindow(null, currentTarget.data('url'), function (container) {\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tvar trRow = currentTarget.closest('tr');\n\t\t\t\tthisInstance.registerSave(container, trRow.data('id'));\n\t\t\t});\n\n\t\t});\n\t\tcontainer.find('.remove').on('click', function (e) {\n\t\t\tvar removeButton = jQuery(e.currentTarget);\n\t\t\tvar currentTrElement = removeButton.closest('tr');\n\t\t\tvar message = app.vtranslate('JS_DELETE_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Delete',\n\t\t\t\t\tid: currentTrElement.data('id')\n\t\t\t\t};\n\t\t\t\tvar progress = jQuery.progressIndicator();\n\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\t\tthisInstance.showTable();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerButtons();\n\t\tthis.showTable();\n\t}\n})\n"],"names":["jQuery","Class","registerSave","container","id","containerValidate","find","roleId","$","val","validationEngine","app","validationEngineOptions","on","module","getModuleName","parent","getParentModuleName","action","mode","name","width","height","progress","progressIndicator","AppConnector","request","params","done","hideModalWindow","thisInstance","showTable","registerButtons","showModalWindow","view","data","html","registerTableEvents","e","currentTarget","closest","trRow","currentTrElement","removeButton","message","vtranslate","Vtiger_Helper_Js","showConfirmationBox","registerEvents"],"mappings":"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"}