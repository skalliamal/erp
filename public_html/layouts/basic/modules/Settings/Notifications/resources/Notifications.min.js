'use strict';

jQuery.Class('Settings_Notifications_List_Js',{},{registerSave:function f(a,b){var c=this,d=a.find('.validationEngineContainer'),e=$('[name="roleMenu"]').val();d.validationEngine(app.validationEngineOptions),a.find('[name="saveButton"]').on('click',function(){if(d.validationEngine('validate')){var f={module:app.getModuleName(),parent:app.getParentModuleName(),action:'SaveAjax',mode:'saveType',name:a.find('[name="name"]').val(),width:a.find('[name="width"]').val(),height:a.find('[name="height"]').val(),roleId:e,id:b},g=jQuery.progressIndicator();AppConnector.request(f).done(function(){g.progressIndicator({mode:'hide'}),app.hideModalWindow(),c.showTable();});}});},registerButtons:function b(){var a=this;$('.createNotification').on('click',function(){var b=jQuery.progressIndicator();app.showModalWindow(null,'index.php?module=Notifications&parent=Settings&view=CreateNotification',function(c){b.progressIndicator({mode:'hide'}),a.registerSave(c,0);});}),$('[name="roleMenu"]').on('change',function(){a.showTable();});},showTable:function e(){var a=this,b=$('.listWithNotifications'),c={module:app.getModuleName(),parent:app.getParentModuleName(),view:'ListContent',roleId:$('[name="roleMenu"]').val()},d=jQuery.progressIndicator();AppConnector.request(c).done(function(c){d.progressIndicator({mode:'hide'}),b.html(c),a.registerTableEvents(b);});},registerTableEvents:function c(a){var b=this;a.find('.edit').on('click',function(a){var c=$(a.currentTarget),d=jQuery.progressIndicator();app.showModalWindow(null,c.data('url'),function(a){d.progressIndicator({mode:'hide'});var e=c.closest('tr');b.registerSave(a,e.data('id'));});}),a.find('.remove').on('click',function(a){var c=jQuery(a.currentTarget),d=c.closest('tr'),e=app.vtranslate('JS_DELETE_CONFIRMATION');Vtiger_Helper_Js.showConfirmationBox({message:e}).done(function(){var a={module:app.getModuleName(),parent:app.getParentModuleName(),action:'Delete',id:d.data('id')},c=jQuery.progressIndicator();AppConnector.request(a).done(function(){c.progressIndicator({mode:'hide'}),b.showTable();});});});},registerEvents:function a(){this.registerButtons(),this.showTable();}});
//# sourceMappingURL=Notifications.min.js.map
